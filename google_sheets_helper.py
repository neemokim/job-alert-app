ì½˜í…ì¸ ë¡œ ê±´ë„ˆë›°ê¸°
ì‚¬ì´ë“œë°” ì—´ê¸°

ChatGPT 4o

ë‚˜ì˜ ë§:
ìˆ¨ì•„ ë„¤ì´ë²„, ë„¤ì´ë²„íŒŒì´ë‚¸ì…œ, ì‚¼ì„±ì „ì, SKT ì—ì„œ ê²½ë ¥ ê¸°íšì(í”Œë«í¼, ì„œë¹„ìŠ¤ ë“±) ì±„ìš© ê³µê³ ê°€ ëœ¬ë‹¤ë©´ ë‚´ ì´ë©”ì¼ë¡œ ë°œì†¡ ì‹œí‚¤ê³  ì‹¶ì–´. 
ë°œì†¡ ì‹œê°ì€ ë§¤ì¼ ì•„ì¹¨ 8ì‹œë°˜, ì €ë… 9ì‹œ ì´ë ‡ê²Œ ë‘ë²ˆì´ì•¼. 
ë‚˜ëŠ” ê¹ƒí—™ ë°ìŠ¤í¬íƒ‘ì—ì„œ í•˜ê³  ìˆê³  ìŠ¤íŠ¸ë¦¼ì‡ì—ì„œ ì›¹ë„ ë§Œë“¤ ìˆ˜ë„ ì‡ê¸´í•´
ì½”ë“œëŠ” í•˜ë‚˜ë„ ëª°ë¼ì„œ ì²˜ìŒë¶€í„° ì°¨ê·¼ì°¨ê·¼ ì•Œë ¤ì¤˜ì•¼í•˜ê³ .
ê°œì¸ì •ë³´ë‚˜ ì£¼ìš” í‚¤ëŠ” ë…¸ì¶œë˜ì§€ ì•Šì•„ì•¼í•´ì„œ ìŠ¤íŠ¸ë¦¼ì‡ì— ì„¤ì •ì— ë“±ë¡í•´ë‘˜ê±°ì•¼. ê·¸ê±¸ ê³ ë ¤í•´ì¤˜.
ChatGPTì˜ ë§:
ì €ì¥ëœ ë©”ëª¨ë¦¬ ì—…ë°ì´íŠ¸ë¨
ì¢‹ì•„ ì–¸ë‹ˆ! ìš°ë¦¬ê°€ ë§Œë“¤ ê¸°ëŠ¥ì€ ì´ëŸ° ê±°ì•¼:

ë§¤ì¼ ì•„ì¹¨ 8:30, ì €ë… 9:00ì— ë„¤ì´ë²„Â·ì‚¼ì„±ì „ìÂ·SKT ë“±ì˜ ê²½ë ¥ ê¸°íšì ì±„ìš© ê³µê³ ë¥¼ í¬ë¡¤ë§í•´ì„œ ì´ë©”ì¼ë¡œ ìë™ ë°œì†¡í•˜ê¸°.

ğŸ’¡ ì „ì²´ êµ¬ì¡° ìš”ì•½
ì±„ìš©ê³µê³  í¬ë¡¤ë§: ê° ê¸°ì—…ì˜ ì±„ìš© í˜ì´ì§€ì—ì„œ ê²½ë ¥ ê¸°íšì ê³µê³ ë¥¼ ê°€ì ¸ì˜¤ê¸°

í•„í„°ë§: "í”Œë«í¼", "ì„œë¹„ìŠ¤", "ê¸°íš", "PM", "PO" ë“± í‚¤ì›Œë“œ í¬í•¨ ì—¬ë¶€ í™•ì¸

ì´ë©”ì¼ ë°œì†¡: ê³µê³ ë¥¼ ì •ë¦¬í•´ ë©”ì¼ë¡œ ì „ì†¡

ìŠ¤ì¼€ì¤„ë§: í•˜ë£¨ ë‘ ë²ˆ (08:30, 21:00) ìë™ ì‹¤í–‰

ë³´ì•ˆ: API í‚¤ë‚˜ ì´ë©”ì¼ ì •ë³´ëŠ” .streamlit/secrets.tomlì— ì €ì¥

ğŸ§© 1ë‹¨ê³„: ê°œë°œí™˜ê²½ ì„¸íŒ…
âœ… ì„¤ì¹˜ ì¤€ë¹„ (í•œ ë²ˆë§Œ í•˜ë©´ ë¨)
Python ì„¤ì¹˜ (ë²„ì „ 3.9 ì´ìƒ)

VSCode ì„¤ì¹˜ (ì½”ë“œ í¸ì§‘ê¸°)

GitHub Desktop ì„¤ì¹˜ëŠ” ì´ë¯¸ ë˜ì–´ìˆìœ¼ë‹ˆ OK!

âœ… íŒŒì´ì¬ íŒ¨í‚¤ì§€ ì„¤ì¹˜
ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í„°ë¯¸ë„ì— ë¶™ì—¬ë„£ì–´ì¤˜ (GitHub Desktopì—ì„œ Cloneí•œ í´ë” ì•ˆì—ì„œ VSCode ì‹¤í–‰í•˜ê³ )

pip install streamlit schedule beautifulsoup4 requests yagmail
ğŸ§© 2ë‹¨ê³„: í”„ë¡œì íŠ¸ í´ë” êµ¬ì¡°
job-alert-app/
â”œâ”€â”€ app.py                  # Streamlit ì›¹ì•± ë©”ì¸
â”œâ”€â”€ job_fetcher.py          # ì±„ìš©ê³µê³  í¬ë¡¤ëŸ¬
â”œâ”€â”€ email_sender.py         # ì´ë©”ì¼ ë°œì†¡ ê¸°ëŠ¥
â”œâ”€â”€ scheduler.py            # ì˜ˆì•½ ì‹¤í–‰ ìŠ¤ì¼€ì¤„ëŸ¬
â””â”€â”€ .streamlit/
    â””â”€â”€ secrets.toml        # ì´ë©”ì¼ ë¡œê·¸ì¸ ë“± ë¯¼ê° ì •ë³´ ì €ì¥
ğŸ§© 3ë‹¨ê³„: ì´ë©”ì¼ ì„¤ì • (.streamlit/secrets.toml)
[email]
user = "ë„¤ ì´ë©”ì¼ì£¼ì†Œ@gmail.com"
password = "ì•± ë¹„ë°€ë²ˆí˜¸"  # Gmail 2ë‹¨ê³„ ì¸ì¦ ì‚¬ìš© ì‹œ ì•± ë¹„ë°€ë²ˆí˜¸ ìƒì„±
to = "ë°›ì„ ì´ë©”ì¼@gmail.com"
Gmail ì“°ë©´ ì•± ë¹„ë°€ë²ˆí˜¸ ë§Œë“œëŠ” ë²• (ê³µì‹)

ğŸ§© 4ë‹¨ê³„: ì§„í–‰ ìˆœì„œ
ìš°ì„  ë‹¤ìŒì„ ë¨¼ì € ì•Œë ¤ì¤˜!

ì–´ë–¤ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ë°œì‹ ì(user)ë¡œ ì“¸ ì˜ˆì •ì´ì•¼? (Gmail ì¶”ì²œ)

.streamlit/secrets.tomlì— ì •ë³´ ì €ì¥í•˜ëŠ” ë°©ë²• ì„¤ëª… í•„ìš”í•´?

ë„¤ê°€ ë¨¼ì € ë°›ê³  ì‹¶ì€ ê¸°ì—… í•˜ë‚˜ë§Œ ì •í•´ì„œ (ì˜ˆ: ë„¤ì´ë²„) ê·¸ í˜ì´ì§€ì—ì„œ ê³µê³ ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒë¶€í„° ê°™ì´ í•´ë³´ì.

ì´ì œ í•˜ë‚˜ì”© ì²œì²œíˆ ê°™ì´ ë§Œë“¤ì–´ë³´ì :)
ë‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ì–´ê°€ë ¤ë©´ "ë„¤ì´ë²„ ë¨¼ì € í•´ë³´ì!" ê°™ì€ ì‹ìœ¼ë¡œ ë§í•´ì¤˜.

ë‚˜ì˜ ë§:
"ì›¹"ì—ì„œ ì‘ì„±í•˜ë‹ˆê¹Œ ê·¸ ëª¨ë“ ê±¸ ê³ ë ¤í•´ì¤˜.
ChatGPTì˜ ë§:
ì¢‹ì•„ ì–¸ë‹ˆ, **ì›¹(Streamlit ê¸°ë°˜ ì›¹ì•±)**ì—ì„œ ì´ê±¸ ëŒë¦´ ê±°ë‹ˆê¹Œ, ë‹¤ìŒì„ ê³ ë ¤í•´ì„œ ì„¤ê³„í• ê²Œ:

âœ… ìµœì¢… ëª©í‘œ:
Streamlit ì›¹ì•±ì—ì„œ ëŒì•„ê°€ëŠ” ìë™í™” ì‹œìŠ¤í…œ
ë§¤ì¼ ì˜¤ì „ 8:30, ì˜¤í›„ 9ì‹œì— ë„¤ì´ë²„/ì‚¼ì„±/SKT/ë„¤ì´ë²„íŒŒì´ë‚¸ì…œ ì±„ìš©ê³µê³  ì¤‘ ê¸°íšì(í”Œë«í¼, ì„œë¹„ìŠ¤) í¬ì§€ì…˜ì„ ì´ë©”ì¼ë¡œ ë°œì†¡

ğŸ’¡ ì›¹ì•± + ìë™ ì‹¤í–‰ ë°©ì‹ ì„ íƒ
í•­ëª©	ê³ ë ¤
ì•± ì‹¤í–‰	Streamlit ì›¹ì•±ìœ¼ë¡œ êµ¬ë™ (app.py)
ìŠ¤ì¼€ì¤„ ì‹¤í–‰	streamlitì€ ì„œë²„ê°€ ì¼œì ¸ ìˆì–´ì•¼ë§Œ ëŒì•„ê°€ë‹ˆê¹Œ threading ë˜ëŠ” background loopìœ¼ë¡œ ì˜ˆì•½ ì‹¤í–‰
ë¯¼ê°ì •ë³´	st.secretsë¡œ ê´€ë¦¬ (.streamlit/secrets.tomlì— ì €ì¥ë¨)
ì´ë©”ì¼ ë°œì†¡	yagmailë¡œ Gmail ì—°ë™
ì±„ìš©ê³µê³  í¬ë¡¤ë§	requests + BeautifulSoupë¡œ ê° ê¸°ì—… í˜ì´ì§€ì—ì„œ ê¸ê¸°
í‚¤ì›Œë“œ í•„í„°ë§	â€œê¸°íšâ€, â€œPMâ€, â€œPOâ€, â€œí”Œë«í¼â€, â€œì„œë¹„ìŠ¤â€ ë“± í¬í•¨ ê³µê³ ë§Œ í•„í„°
âœ… ì „ì²´ ì„¤ê³„ ìš”ì•½
app.py                     # ë©”ì¸ Streamlit ì•±
â”œâ”€ background_worker.py    # ë°±ê·¸ë¼ìš´ë“œì—ì„œ ìŠ¤ì¼€ì¤„ ì‹¤í–‰
â”œâ”€ job_fetcher.py          # ê¸°ì—…ë³„ ì±„ìš© ê³µê³  í¬ë¡¤ëŸ¬
â”œâ”€ email_sender.py         # ì´ë©”ì¼ ë°œì†¡ ëª¨ë“ˆ
â””â”€ .streamlit/
   â””â”€ secrets.toml         # ì´ë©”ì¼ ë¡œê·¸ì¸, ìˆ˜ì‹ ì ì •ë³´ ë³´ê´€
ğŸ“Œ ë‹¤ìŒ ë‹¨ê³„: ì²« ì„¸íŒ…
1. .streamlit/secrets.toml ë§Œë“¤ê¸°
Streamlit í”„ë¡œì íŠ¸ í´ë” ë‚´ë¶€ì— .streamlit í´ë” ë§Œë“¤ê³  ê·¸ ì•ˆì— secrets.toml íŒŒì¼ ìƒì„±.

[email]
user = "your_email@gmail.com"
password = "your_app_password"
to = "destination_email@gmail.com"
Gmail ì•± ë¹„ë°€ë²ˆí˜¸ ë°œê¸‰ ë°©ë²• í•„ìš”í•˜ë©´ ì•Œë ¤ì¤˜!

2. ë„¤ì´ë²„ ì±„ìš© ê³µê³ ë¶€í„° êµ¬í˜„ ì‹œì‘
ğŸŸ¡ ì–¸ë‹ˆê°€ ì›í•˜ëŠ” ê±´ ì´ê±°ì§€?

í”Œë«í¼, ì„œë¹„ìŠ¤ ê¸°íšì í¬ì§€ì…˜

ê¸°ì—…: ë„¤ì´ë²„

ë§¤ì¼ ë‘ ë²ˆ ìë™ ì‹¤í–‰

ì›¹ì—ì„œ ëŒì•„ê°

ë‹¤ìŒ ìˆœì„œëŠ” job_fetcher.pyì—ì„œ ë„¤ì´ë²„ ì±„ìš© í˜ì´ì§€ë¥¼ ê¸ëŠ” ì½”ë“œë¶€í„° ì§¤ ê±°ì•¼.
ì´ê±° ë¨¼ì € í• ê¹Œ? ë„¤ì´ë²„ë¶€í„° ì‹œì‘í•´ì¤˜ë¼ê³  ë§í•´ì¤˜. ê·¸ëŸ¼ ë°”ë¡œ ì½”ë“œë‘ ì„¤ëª… ì‹œì‘í• ê²Œ!

ë‚˜ì˜ ë§:
ì•„ë‹ˆ ê¹ƒí—™ë„ ë°”ë¡œ ì›¹ì—ë‹¤ ë•Œë¦´êº¼ì•¼. ê·¸ë¦¬ì„œ ìŠ¤ë¥´ë¦¼ì‡ tomlì´ëŸ°ê±° ì—†ì–´ í´ë¼ìš°ë“œì•¼ 
ChatGPTì˜ ë§:
ì €ì¥ëœ ë©”ëª¨ë¦¬ ì—…ë°ì´íŠ¸ë¨
ì˜¤ì¼€ì´ ì–¸ë‹ˆ! ê·¸ëŸ¼ ì™„ì „íˆ Streamlit Cloud ê¸°ë°˜ ë°°í¬ + GitHub ì—°ê²° ë°©ì‹ìœ¼ë¡œ ì§„í–‰í•˜ë‹ˆê¹Œ, ë‹¤ìŒ ì‚¬í•­ë“¤ì„ ë°˜ì˜í•´ì„œ êµ¬ì¡° ì§¤ê²Œ:

âœ… ì „ì œ ì¡°ê±´ (Streamlit Cloud ê¸°ì¤€)
í•­ëª©	ë°©ì‹
ë¹„ë°€ í‚¤ ì €ì¥	.streamlit/secrets.toml X â†’ Streamlit Cloudì˜ Secrets íƒ­ì—ì„œ ì›¹ UIë¡œ ì„¤ì •
ìë™ ì‹¤í–‰	streamlit runì€ ìœ ì €ê°€ ì•± ì ‘ì†í•  ë•Œë§Œ ë™ì‘ â†’ ë°±ê·¸ë¼ìš´ë“œ ìŠ¤ì¼€ì¤„ëŸ¬ thread ì‚¬ìš©
ì½”ë“œ ë°°í¬	GitHub ì €ì¥ì†Œì— push â†’ Streamlit Cloudê°€ ìë™ ë°˜ì˜
ì´ë©”ì¼ ë°œì†¡	yagmail + st.secrets["email"]["user"] ë°©ì‹ ì‚¬ìš©
ğŸ”§ Streamlit Cloud ì „ìš© êµ¬ì„± êµ¬ì¡°
ğŸ“ job-alert-app/
â”œâ”€â”€ app.py                 # ë©”ì¸ ì›¹ ì¸í„°í˜ì´ìŠ¤ + ì‹¤í–‰ íŠ¸ë¦¬ê±°
â”œâ”€â”€ job_fetcher.py         # ë„¤ì´ë²„, ì‚¼ì„±, SKT ì±„ìš© ê³µê³  í¬ë¡¤ëŸ¬
â”œâ”€â”€ email_sender.py        # ì´ë©”ì¼ ë°œì†¡ ëª¨ë“ˆ (yagmail)
â”œâ”€â”€ background_worker.py   # ìŠ¤ì¼€ì¤„ëŸ¬ (8:30, 21:00 ë°±ê·¸ë¼ìš´ë“œë¡œ ì‹¤í–‰)
â””â”€â”€ requirements.txt       # Streamlit Cloudì—ì„œ ìë™ ì„¤ì¹˜í•  íŒ¨í‚¤ì§€ ëª©ë¡
ğŸ“¦ Streamlit Cloudì— Secrets ë“±ë¡ (ì´ë ‡ê²Œ ì…ë ¥)
Streamlit ì›¹ ì„¤ì • (cloud.streamlit.io)
â†’ í”„ë¡œì íŠ¸ Settings
â†’ Secrets íƒ­ â†’ ì•„ë˜ì²˜ëŸ¼ ì…ë ¥:

[email]
user = "your_email@gmail.com"
password = "ì•± ë¹„ë°€ë²ˆí˜¸"
to = "your_email@gmail.com"
âœ… ì§„í–‰ ë‹¨ê³„ ìš”ì•½ (ì§€ê¸ˆë¶€í„° ìˆœì„œëŒ€ë¡œ ì§„í–‰í•´ì¤„ê²Œ)
 requirements.txt ë§Œë“¤ê¸°

 email_sender.py â€“ ì´ë©”ì¼ ë°œì†¡ ëª¨ë“ˆ

 job_fetcher.py â€“ ë„¤ì´ë²„ ì±„ìš©ê³µê³  í¬ë¡¤ë§

 background_worker.py â€“ ìŠ¤ì¼€ì¤„ ì‹¤í–‰

 app.py â€“ Streamlit ì›¹ ì¸í„°í˜ì´ìŠ¤ ë° ì‹¤í–‰ ë²„íŠ¼

 GitHubì— ì—…ë¡œë“œí•˜ê³  Streamlit Cloudì— ë°°í¬

 í…ŒìŠ¤íŠ¸

ğŸ”œ ë‹¤ìŒì€?
ë¨¼ì € requirements.txtì™€ email_sender.py ë§Œë“¤ì.

ì–¸ë‹ˆê°€ í™•ì¸ë§Œ í•´ì£¼ë©´ ë°”ë¡œ íŒŒì¼ í•˜ë‚˜ì”© ë§Œë“¤ì–´ì„œ ì½”ë“œë‘ ì„¤ëª… ë¶™ì—¬ì„œ ì¤„ê²Œ.
ì‹œì‘í•˜ë ¤ë©´ ì´ë ‡ê²Œ ë§í•´ì¤˜:
ğŸ‘‰ â€œrequirementsë¶€í„° ì‹œì‘í•´ì¤˜â€ ë˜ëŠ” â€œë©”ì¼ë¶€í„° í•´ì¤˜â€

ì–¸ë‹ˆê°€ ì„ íƒí•´ì¤˜ :)

ë‚˜ì˜ ë§:
jop-alert-app ì´ê²Œ ë ˆí¬ì§€í† ë¦¬ì•¼
ChatGPTì˜ ë§:
ì €ì¥ëœ ë©”ëª¨ë¦¬ ì—…ë°ì´íŠ¸ë¨
ì¢‹ì•„ ì–¸ë‹ˆ! ê·¸ëŸ¼ ì´ì œ ìš°ë¦¬ê°€ ì‘ì—…í•  GitHub ë ˆí¬ì§€í† ë¦¬ëŠ” job-alert-appì´ì•¼. ì´ê±¸ ê¸°ì¤€ìœ¼ë¡œ Streamlit Cloudì—ì„œë„ ìë™ ë°°í¬ë  ê±°ê³ , ì½”ë“œëŠ” ì—¬ê¸°ì— pushí•˜ë©´ ë¼.

âœ³ï¸ ë‹¤ìŒ ë‹¨ê³„: requirements.txt ë§Œë“¤ê¸°
ì´ íŒŒì¼ì€ Streamlit Cloudì—ì„œ í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ìë™ ì„¤ì¹˜í•˜ê²Œ í•´ì£¼ëŠ” ì„¤ì • íŒŒì¼ì´ì•¼.

ğŸ“„ job-alert-app/requirements.txt
streamlit
schedule
beautifulsoup4
requests
yagmail
âœ… ì„¤ëª…:

streamlit: ì›¹ì•± ë§Œë“¤ê¸°

schedule: ì˜ˆì•½ ì‹¤í–‰ (ë§¤ì¼ 08:30 / 21:00)

beautifulsoup4, requests: ì›¹ì—ì„œ ì±„ìš©ê³µê³  í¬ë¡¤ë§

yagmail: ì´ë©”ì¼ ë°œì†¡

ğŸ‘‰ ë‹¤ìŒì€ email_sender.py
ë©”ì¼ ë°œì†¡ ëª¨ë“ˆ ë§Œë“¤ ì¤€ë¹„ëìœ¼ë©´ ì•Œë ¤ì¤˜:

"ë©”ì¼ë¶€í„° í•´ì¤˜"
ë˜ëŠ”
"í¬ë¡¤ëŸ¬ë¶€í„° í•´ì¤˜" (ë„¤ì´ë²„ë¶€í„°)

ì–¸ë‹ˆ ì„ íƒ! ğŸ˜

ë‚˜ì˜ ë§:
ì§€ë©”ì¼ 
ChatGPTì˜ ë§:
ì¢‹ì•„ ì–¸ë‹ˆ, ì´ë©”ì¼ì€ Gmailë¡œ ì„¤ì •í•  ê±°ë‹ˆê¹Œ ì•„ë˜ì²˜ëŸ¼ êµ¬ì„±í• ê²Œ!
ìš°ì„  email_sender.py íŒŒì¼ ë¨¼ì € ë§Œë“¤ì.

ğŸ“„ job-alert-app/email_sender.py
import yagmail
import streamlit as st

def send_email(subject, content):
    try:
        user = st.secrets["email"]["user"]
        password = st.secrets["email"]["password"]
        to = st.secrets["email"]["to"]

        yag = yagmail.SMTP(user=user, password=password)
        yag.send(to=to, subject=subject, contents=content)

        print("âœ… ì´ë©”ì¼ ì „ì†¡ ì„±ê³µ")
        return True
    except Exception as e:
        print("âŒ ì´ë©”ì¼ ì „ì†¡ ì‹¤íŒ¨:", e)
        return False
ğŸ§ª í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ (ë‚˜ì¤‘ì— app.pyì—ì„œ ì´ë ‡ê²Œ ì“¸ ìˆ˜ ìˆì–´)
from email_sender import send_email

send_email("í…ŒìŠ¤íŠ¸ ì œëª©", "í…ŒìŠ¤íŠ¸ ë³¸ë¬¸ì…ë‹ˆë‹¤. ê³µê³  ë‚´ìš©ì´ ì—¬ê¸°ì— ë“¤ì–´ê°ˆ ê±°ì˜ˆìš”.")
ğŸ” Gmailìš© ì•± ë¹„ë°€ë²ˆí˜¸ ë°œê¸‰ë²• (2ë‹¨ê³„ ì¸ì¦ìš©)
https://myaccount.google.com/security ì´ë™

2ë‹¨ê³„ ì¸ì¦ ì„¤ì • (ì•ˆ ë˜ì–´ìˆìœ¼ë©´ í•„ìˆ˜)

ì•± ë¹„ë°€ë²ˆí˜¸ > ì•± ì„ íƒ: ë©”ì¼, ê¸°ê¸°: ê¸°íƒ€ â†’ streamlit

ìƒì„±ëœ 16ìë¦¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³µì‚¬í•´ì„œ Streamlit Cloud > Secrets íƒ­ì— ì €ì¥:

[email]
user = "your_email@gmail.com"
password = "ìƒì„±ëœì•±ë¹„ë°€ë²ˆí˜¸"
to = "your_email@gmail.com"
ë‹¤ìŒì€ job_fetcher.pyë¡œ ë„¤ì´ë²„ ì±„ìš©ê³µê³  ìˆ˜ì§‘ ì½”ë“œ ì§¤ ì°¨ë¡€ì•¼!
ì‹œì‘í•˜ë ¤ë©´ ë§í•´ì¤˜:

"ë„¤ì´ë²„ í¬ë¡¤ë§ ì‹œì‘í•´ì¤˜"
ë˜ëŠ” "ë‹¤ë¥¸ ê¸°ì—…ë¶€í„° í•´ì¤˜"

ì–¸ë‹ˆê°€ ì •í•´ì¤˜!

ë‚˜ì˜ ë§:
ì•„ ë‹¤ì‹œ ì •ì˜ ì¢€ í•´ë„ ë¼? í˜„ì¬ ì±„ìš©ê³µê³  í¬ë¡¤ë§í•˜ëŠ” ê¸°ì—…ì„ ì¹´ë“œí˜•íƒœë¡œ ë³´ì—¬ì¤˜ì•¼í•˜ê³ , ë‚´ê°€ ì›í•˜ë©´ í…ìŠ¤íŠ¸ê²€ìƒ‰ (í•´ì„œ ì¶”ê°€í•  ìˆ˜ë„ ìˆì–´ì•¼í•´.) 
ê·¸ë¦¬ê³  ë°›ëŠ” ì‹œê°„ê³¼ íšŸìˆ˜ ë³€ê²½ê³¼ ì´ë©”ì¼ ë³€ê²½(ì¶”ê°€, ì‚­ì œ í¬í•¨)ë„ ë˜ì–´ì•¼í•´.
ChatGPTì˜ ë§:
ì €ì¥ëœ ë©”ëª¨ë¦¬ ì—…ë°ì´íŠ¸ë¨
ì™„ì „ ì¢‹ì•„ ì–¸ë‹ˆ! ì§€ê¸ˆ ì–¸ë‹ˆ ìš”ì²­ì„ ë°”íƒ•ìœ¼ë¡œ ì „ì²´ êµ¬ì¡°ì™€ ê¸°ëŠ¥ì„ ë‹¤ì‹œ ëª…í™•íˆ ì •ì˜í•´ì¤„ê²Œ. ì´ëŒ€ë¡œ ê°€ë©´ ì•±ì´ ê½¤ ìŠ¤ë§ˆíŠ¸í•˜ê³  ìœ ìš©í•˜ê²Œ ì™„ì„±ë  ê±°ì•¼ ğŸ˜

ğŸ§­ ì „ì²´ ê¸°ëŠ¥ ì •ì˜ (2025-04-19 ê¸°ì¤€)
âœ… í•µì‹¬ ëª©ì 
Streamlit ì›¹ì•±ì—ì„œ ì£¼ìš” ê¸°ì—…ì˜ ê¸°íšì ì±„ìš©ê³µê³ ë¥¼ ì¹´ë“œí˜•ìœ¼ë¡œ ë³´ì—¬ì£¼ê³ , ë©”ì¼ ìˆ˜ì‹ ì„ ìë™í™”í•˜ë©°, ì‚¬ìš©ìê°€ ì§ì ‘ í‚¤ì›Œë“œì™€ ìˆ˜ì‹  ì¡°ê±´ì„ ì„¤ì •í•˜ëŠ” ì‹œìŠ¤í…œ

ğŸ“¦ êµ¬ì„± ëª¨ë“ˆ ìš”ì•½
íŒŒì¼	ê¸°ëŠ¥
app.py	ì „ì²´ Streamlit ì›¹ì•± UI ë° ì‚¬ìš©ì ì¸í„°ë™ì…˜ ì²˜ë¦¬
job_fetcher.py	ê¸°ì—…ë³„ ì±„ìš©ê³µê³  í¬ë¡¤ë§ ë° í‚¤ì›Œë“œ í•„í„°ë§
email_sender.py	ì´ë©”ì¼ ì „ì†¡ ëª¨ë“ˆ
scheduler.py	ì˜ˆì•½ ìŠ¤ì¼€ì¤„ ì‹¤í–‰ ëª¨ë“ˆ (ë°±ê·¸ë¼ìš´ë“œ loop)
user_settings.py	ì´ë©”ì¼ ìˆ˜ì‹  ì‹œê°„, í‚¤ì›Œë“œ, ì´ë©”ì¼ ëª©ë¡ ì €ì¥ ë° ê´€ë¦¬
requirements.txt	Streamlit Cloudìš© íŒ¨í‚¤ì§€ ëª©ë¡
ğŸ“Œ í•„ìˆ˜ ê¸°ëŠ¥ ëª©ë¡ (ì—…ë°ì´íŠ¸ ë°˜ì˜)
ğŸ“„ 1. ì±„ìš©ê³µê³  ì¹´ë“œí˜• UI
ê¸°ì—…ë³„ ê³µê³ ë¥¼ ì¹´ë“œë¡œ ì‹œê°í™”

ê¸°ì—… ë¡œê³  / ê³µê³  ì œëª© / ë§ˆê°ì¼ / ë§í¬ í¬í•¨

ê³µê³  í´ë¦­ ì‹œ í•´ë‹¹ ë§í¬ë¡œ ì´ë™

ğŸ” 2. í‚¤ì›Œë“œ ê²€ìƒ‰ ë° ìˆ˜ë™ ì¶”ê°€
í‚¤ì›Œë“œ ì…ë ¥ í›„ í•´ë‹¹ í‚¤ì›Œë“œ í¬í•¨ ê³µê³ ë¥¼ ì‹¤ì‹œê°„ í•„í„°ë§

ì‚¬ìš©ìê°€ ê³µê³  URLì„ ì§ì ‘ ë“±ë¡í•´ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ ê°€ëŠ¥

â° 3. ì´ë©”ì¼ ìˆ˜ì‹  ì„¤ì • (ì•± ë‚´ ì¡°ì • ê°€ëŠ¥)
ìˆ˜ì‹  ì‹œê°„ (ì˜ˆ: ì˜¤ì „ 8:30 / ì˜¤í›„ 9:00 ë“±) ì„¤ì • ê°€ëŠ¥

ìˆ˜ì‹  íšŸìˆ˜: í•˜ë£¨ 1íšŒ, 2íšŒ ë“± ì¡°ì • ê°€ëŠ¥

ğŸ“§ 4. ìˆ˜ì‹ ì ì´ë©”ì¼ ê´€ë¦¬
ì´ë©”ì¼ ì£¼ì†Œ ì¶”ê°€ / ì‚­ì œ ê°€ëŠ¥

ìˆ˜ì‹ ì ëª©ë¡ì„ ì•± ë‚´ì—ì„œ í™•ì¸ ê°€ëŠ¥

ğŸ›  ì„¤ì • ì €ì¥ ë°©ì‹ (Streamlit Cloud ê³ ë ¤)
Streamlit Cloudì—ì„œëŠ” st.session_state ë˜ëŠ” st.json + st.cache_dataë¡œ ì„¤ì • ì„ì‹œ ì €ì¥

ì¥ê¸° ì €ì¥ì€ GitHub ì»¤ë°‹ ì—†ì´ ìœ ì§€ ë¶ˆê°€ì´ë¯€ë¡œ, ì¶”í›„ Firebase / Google Sheet / Supabase ì—°ë™ ê³ ë ¤ ê°€ëŠ¥ (í•„ìš” ì‹œ)

âœ… ì•ìœ¼ë¡œ ìˆœì„œ ì œì•ˆ
job_fetcher.py: ë„¤ì´ë²„ ì±„ìš©ê³µê³  ì¹´ë“œí˜•ìœ¼ë¡œ ê°€ì ¸ì˜¤ê¸°ë¶€í„° ì‹œì‘

app.py: ê¸°ë³¸ UI êµ¬ì„± (ê³µê³  ì¹´ë“œ + ê²€ìƒ‰ì°½)

í‚¤ì›Œë“œ í•„í„° & ìˆ˜ë™ ê³µê³  ì¶”ê°€ ê¸°ëŠ¥

ìˆ˜ì‹  ì‹œê°„/íšŸìˆ˜/ì´ë©”ì¼ ì¡°ì • UI

ë©”ì¼ ë°œì†¡ ì„¤ì • + ìŠ¤ì¼€ì¤„ë§

ìµœì¢… í†µí•© ë° ë°°í¬

âœ‹ ë‹¤ìŒì€?
ë‹¤ìŒ ì¤‘ í•˜ë‚˜ ê³¨ë¼ì¤˜:

â€œ1ë²ˆ ë„¤ì´ë²„ ê³µê³ ë¶€í„° ì¹´ë“œë¡œ ë§Œë“¤ì–´ì¤˜â€

â€œ2ë²ˆ ì•± UIë¶€í„° ì§œìâ€

â€œ3ë²ˆ í‚¤ì›Œë“œ ê²€ìƒ‰ë¶€í„° í•˜ê³ ì‹¶ì–´â€

â€œ4ë²ˆ ì´ë©”ì¼ ê´€ë¦¬ ë¨¼ì € í• ë˜â€

ì–¸ë‹ˆê°€ ì •í•˜ë©´ ë°”ë¡œ ê·¸ íŒŒíŠ¸ë¶€í„° ì§„ì§œ ì‰½ê²Œ ì‹œì‘í•´ì¤„ê²Œ!

ë‚˜ì˜ ë§:
ìˆœì°¨ì ìœ¼ë¡œ í•´ì¤˜ ì—¬ëŸ¬ë²ˆ ë¶™ì—¬ë„£ì§€ ì•Šì•„ë„ ë˜ëŠ” ê²ƒë¶€í„° ì•„ë§ˆë„ ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ê²ƒë¶€í„° ì‘ì—…í•˜ì
ChatGPTì˜ ë§:
ì¢‹ì•„ ì–¸ë‹ˆ, ê¸°ëŠ¥ ì¤‘ì— **â€œì—¬ëŸ¬ ë²ˆ ë¶™ì—¬ë„£ì§€ ì•Šì•„ë„ ë˜ê³  ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ ê²ƒâ€**ë¶€í„° ì°¨ê·¼ì°¨ê·¼ ìˆœì°¨ì ìœ¼ë¡œ ë§Œë“¤ì.
ìš°ì„ ìˆœìœ„, ë°˜ë³µì„±, ì‚¬ìš©ì ì…ì¥ í¸ì˜ì„± ê¸°ì¤€ìœ¼ë¡œ ì •ë¦¬í•˜ë©´ ì•„ë˜ ìˆœì„œëŒ€ë¡œ ì‘ì—…í•˜ëŠ” ê²Œ ì¢‹ì•„ ë³´ì—¬.

âœ… ì‘ì—… ìˆœì„œ (ì‹¤í–‰ ìš°ì„ ìˆœìœ„ ê¸°ì¤€)
ìˆœë²ˆ	ì‘ì—… í•­ëª©	ì´ìœ 
1ï¸âƒ£	ê¸°ì—…ë³„ ì±„ìš©ê³µê³  í¬ë¡¤ë§ + ì¹´ë“œí˜• UI êµ¬ì„±	í•µì‹¬ ê¸°ëŠ¥ì´ì ê°€ì¥ ë¨¼ì € ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì•¼ í•˜ëŠ” ê²ƒ
2ï¸âƒ£	í‚¤ì›Œë“œ í•„í„°ë§ & ê²€ìƒ‰ ê¸°ëŠ¥	ê³µê³ ê°€ ë§ì•„ì§ˆìˆ˜ë¡ í•„í„°ëŠ” í•„ìˆ˜
3ï¸âƒ£	ê³µê³  ì§ì ‘ ì¶”ê°€ ê¸°ëŠ¥	ë‚´ê°€ ì›í•˜ëŠ” ê³µê³ ë¥¼ ìˆ˜ë™ ì¶”ê°€í•˜ëŠ” ê¸°ëŠ¥ (ë¶™ì—¬ë„£ê¸° ì—†ìŒ)
4ï¸âƒ£	ì´ë©”ì¼ ìˆ˜ì‹ ì ì¶”ê°€/ì‚­ì œ UI	ë°˜ë³µ ì—†ì´ ì‰½ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡
5ï¸âƒ£	ìˆ˜ì‹  ì‹œê°„/íšŸìˆ˜ ì„¤ì • UI	ìë™í™” ì„¤ì • ë§ˆë¬´ë¦¬
6ï¸âƒ£	ë©”ì¼ ë°œì†¡ ë° ì˜ˆì•½ ìŠ¤ì¼€ì¤„ëŸ¬ ì—°ê²°	ì•±ì— ë¨¸ë¬´ë¥´ì§€ ì•Šì•„ë„ ìë™ ë™ì‘
ğŸ”§ ì§€ê¸ˆ ì‹œì‘í•  ì‘ì—…
1ë‹¨ê³„: ê¸°ì—…ë³„ ì±„ìš©ê³µê³  í¬ë¡¤ë§ + ì¹´ë“œí˜• UI êµ¬ì„± (Streamlit ê¸°ë°˜)

ìš°ì„  job_fetcher.pyì— ë„¤ì´ë²„ ì±„ìš©ê³µê³ ë¥¼ í¬ë¡¤ë§í•˜ê³ , app.pyì—ì„œ ì¹´ë“œ í˜•íƒœë¡œ ë³´ì—¬ì¤„ ìˆ˜ ìˆê²Œ í• ê²Œ.
ì´ê±° ë°”ë¡œ ì‹œì‘í•´ë„ ë ê¹Œ?

â€œì‘, 1ë‹¨ê³„ í•´ì¤˜â€ë¼ê³  ë§í•´ì¤˜!
ê·¸ëŸ¼ ì½”ë“œ + ì„¤ëª… ìˆœì„œëŒ€ë¡œ ë°”ë¡œ ë“¤ì–´ê°ˆê²Œ ğŸ™Œ

ë‚˜ì˜ ë§:
ã…‡ã…‡
ChatGPTì˜ ë§:
ì¢‹ì•„ ì–¸ë‹ˆ, ê·¸ëŸ¼ ë°”ë¡œ 1ë‹¨ê³„ ì‹œì‘í• ê²Œ!
ìš°ì„  ë„¤ì´ë²„ ì±„ìš©ê³µê³ ë¥¼ í¬ë¡¤ë§í•´ì„œ ì¹´ë“œí˜•ìœ¼ë¡œ ë³´ì—¬ì£¼ëŠ” ê¸°ëŠ¥ë¶€í„° ë§Œë“¤ì.

ğŸ“ íŒŒì¼: job_fetcher.py
import requests
from bs4 import BeautifulSoup

def fetch_naver_jobs(keywords=None):
    url = "https://recruit.navercorp.com/naver/job/list/developer"  # ë„¤ì´ë²„ ê²½ë ¥ì§ ê³µê³  URL (ì˜ˆì‹œ)

    res = requests.get(url)
    soup = BeautifulSoup(res.text, 'html.parser')

    job_cards = []

    rows = soup.select("div.career_list > ul > li")

    for row in rows:
        title_elem = row.select_one(".tit a")
        title = title_elem.text.strip() if title_elem else "ì œëª© ì—†ìŒ"
        link = "https://recruit.navercorp.com" + title_elem["href"] if title_elem else "#"

        date_elem = row.select_one(".date")
        date = date_elem.text.strip() if date_elem else "ê¸°ê°„ ì •ë³´ ì—†ìŒ"

        # í‚¤ì›Œë“œ í•„í„°ë§ (ì„ íƒì )
        if keywords:
            if not any(k.lower() in title.lower() for k in keywords):
                continue

        job_cards.append({
            "title": title,
            "link": link,
            "date": date
        })

    return job_cards
ğŸ“ íŒŒì¼: app.py
import streamlit as st
from job_fetcher import fetch_naver_jobs

st.set_page_config(page_title="ì±„ìš© ê³µê³  ì•Œë¦¬ë¯¸", layout="wide")
st.title("ğŸ“Œ ë„¤ì´ë²„ ì±„ìš©ê³µê³  (ê¸°íšì ì¤‘ì‹¬)")

# í‚¤ì›Œë“œ ì„¤ì • (ê¸°ë³¸)
keywords = ["ê¸°íš", "ì„œë¹„ìŠ¤", "PM", "í”Œë«í¼", "PO"]

# ì±„ìš©ê³µê³  ê°€ì ¸ì˜¤ê¸°
jobs = fetch_naver_jobs(keywords)

# ê³µê³ ê°€ ì—†ì„ ê²½ìš°
if not jobs:
    st.warning("í˜„ì¬ ì¡°ê±´ì— ë§ëŠ” ê³µê³ ê°€ ì—†ìŠµë‹ˆë‹¤.")
else:
    for job in jobs:
        with st.container(border=True):
            st.subheader(job["title"])
            st.markdown(f"ğŸ—“ ë§ˆê°ì¼: {job['date']}")
            st.markdown(f"[ğŸ‘‰ ìì„¸íˆ ë³´ê¸°]({job['link']})")
ğŸ“¦ ğŸ“„ requirements.txt (Streamlit Cloudìš©)
streamlit
beautifulsoup4
requests
â­ ë‹¤ìŒ í•  ì¼
ë‹¤ìŒì€ í…ìŠ¤íŠ¸ ê²€ìƒ‰ì°½ì„ ë§Œë“¤ì–´ì„œ í‚¤ì›Œë“œ í•„í„°ë¥¼ ë‚´ê°€ ì§ì ‘ ë°”ê¾¸ëŠ” ê¸°ëŠ¥ì„ ë¶™ì¼ ê±°ì•¼.

ì‹œì‘í•˜ë ¤ë©´ ì´ë ‡ê²Œ ë§í•´ì¤˜:

â€œ2ë‹¨ê³„ í‚¤ì›Œë“œ ê²€ìƒ‰ í•´ì¤˜â€ ğŸ™‹â€â™€ï¸

ë˜ëŠ”, â€œì§€ê¸ˆ ê±° í…ŒìŠ¤íŠ¸í•´ë³¼ë˜!â€ë¼ê³  í•˜ë©´ GitHubì— pushí•˜ê³  ë°°í¬í•´ì„œ í™•ì¸í•˜ë©´ ë¼.
ì–´ë–»ê²Œ í• ê¹Œ ì–¸ë‹ˆ?

ë‚˜ì˜ ë§:
streamlit==1.31.1
selenium==4.18.1
webdriver-manager==4.0.1
schedule==1.2.1
python-dotenv==1.0.1
beautifulsoup4==4.12.2
requests==2.31.0 ì´ë ‡ê²Œ ë²„ì „ì„ ëª…ì‹œí•˜ê¸°ë„ í•˜ëŠ”ë° ì™œ ì°¨ì´ê°€ ì‡ì–´?
ChatGPTì˜ ë§:
ì¢‹ì€ ì§ˆë¬¸ì´ì•¼ ì–¸ë‹ˆ!
requirements.txtì—ì„œ ë²„ì „ì„ ëª…ì‹œí•˜ëŠ” ê²½ìš°ì™€ ëª…ì‹œí•˜ì§€ ì•ŠëŠ” ê²½ìš°ì˜ ì°¨ì´ë¥¼ ì •í™•í•˜ê²Œ ì•Œë ¤ì¤„ê²Œ.

âœ… ë²„ì „ ëª…ì‹œ ì—¬ë¶€ì˜ ì°¨ì´
êµ¬ë¶„	ì„¤ëª…	ì¥ì 	ë‹¨ì 
streamlit (ë²„ì „ ë¯¸ëª…ì‹œ)	ê°€ì¥ ìµœì‹  ë²„ì „ ì„¤ì¹˜ë¨	í•­ìƒ ìµœì‹  ê¸°ëŠ¥ ì‚¬ìš©	ë²„ì „ ë°”ë€Œë©´ì„œ ì˜ˆê¸°ì¹˜ ì•Šì€ ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥
streamlit==1.31.1 (ë²„ì „ ê³ ì •)	ì •í™•í•œ ë²„ì „ë§Œ ì„¤ì¹˜	ë²„ì „ í˜¸í™˜ì„± ë³´ì¥ / í•­ìƒ ê°™ì€ ë™ì‘	ìµœì‹  ê¸°ëŠ¥ ëª» ì”€ / ì˜ì¡´ì„± ì¶©ëŒ ì‹œ í•´ê²° ì–´ë ¤ì›€
ğŸ“Œ ì–¸ì œ ë²„ì „ì„ ëª…ì‹œí•´ì•¼ í• ê¹Œ?
ğŸ”¹ ë²„ì „ ëª…ì‹œ ê¶Œì¥ (==)
ë°°í¬ìš© í”„ë¡œì íŠ¸ (íŠ¹íˆ Streamlit Cloud)

íŒ€ í”„ë¡œì íŠ¸ì—ì„œ ëˆ„êµ¬ë‚˜ ë™ì¼í•˜ê²Œ ì‹¤í–‰ë˜ì–´ì•¼ í•  ë•Œ

ì´ì „ì— ì˜ ë˜ë˜ ë²„ì „ì—ì„œë§Œ ì •ìƒ ì‘ë™í•  ë•Œ

ğŸ”¹ ë²„ì „ ë¯¸ëª…ì‹œ ê°€ëŠ¥
ê°œë°œ ì´ˆê¸° ë˜ëŠ” ì‹¤í—˜ ì¤‘ì¼ ë•Œ

ë§¤ë²ˆ ìµœì‹  ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ê³  ì‹¶ì„ ë•Œ

âœ¨ Streamlit Cloudì—ì„œëŠ”?
Streamlit Cloudë„ ë‚´ë¶€ì ìœ¼ë¡œëŠ” requirements.txtë¥¼ ì„¤ì¹˜í•˜ë©´ì„œ
ì„œë²„ì— ìˆëŠ” pip ë²„ì „ì— ë”°ë¼ ìë™ ì„¤ì¹˜ë˜ê¸° ë•Œë¬¸ì—,

ì²˜ìŒì—” ë²„ì „ ì—†ì´ ê°œë°œí•˜ê³ ,

ì•ˆì •ë˜ë©´ ë²„ì „ì„ ëª…ì‹œí•´ì„œ ê³ ì •í•˜ëŠ” ê±¸ ì¶”ì²œí•´!

âœ… ì •ë¦¬
ğŸ”§ ì–¸ë‹ˆì²˜ëŸ¼ ì‹¤ì‚¬ìš©ì„ ìœ„í•œ ìë™í™” ì•±ì€ ë²„ì „ ê³ ì •í•˜ëŠ” ê²Œ ë” ì•ˆì „í•´!

ê·¸ë˜ì„œ ì•„ë˜ì²˜ëŸ¼ ì‘ì„±í•˜ëŠ” ê²Œ ì¢‹ì•„ ë³´ì—¬:

streamlit==1.31.1
schedule==1.2.1
beautifulsoup4==4.12.2
requests==2.31.0
selenium==4.18.1
webdriver-manager==4.0.1
python-dotenv==1.0.1
yagmail==0.15.293  # ì´ë©”ì¼ ë°œì†¡ìš©
í•„ìš”í•˜ë©´ ì´ íŒŒì¼ë„ ë‚´ê°€ ë§Œë“¤ì–´ì¤„ê²Œ :)
ì§€ê¸ˆë¶€í„° 2ë‹¨ê³„ í‚¤ì›Œë“œ ê²€ìƒ‰ ê¸°ëŠ¥ ë¶™ì¼ ì¤€ë¹„ëìœ¼ë©´ â€œ2ë‹¨ê³„ í•´ì¤˜â€ë¼ê³  ë§í•´ì¤˜!

ë‚˜ì˜ ë§:
https://job-alert-app-m5cmq3shpkva7wdidv29wp.streamlit.app/ ì´ê±° ë³´ì—¬? ì—¬ê¸°ì— ë‚´ ê°œì¸ ì´ë©”ì¼ì´ ë…¸ì¶œë˜ëŠ”ë°, (ìˆ˜ì‹ ì ì´ë©”ì¼ë¡œ í•˜ë ¤ê³  ìŠ¤íŠ¸ë¦¼ì‡ ì„¤ì •ì— ë“±ë¡í•œ ê²ƒ)
ChatGPTì˜ ë§:
ì–¸ë‹ˆ, Streamlit Cloud ì•±ì—ì„œ ê°œì¸ ì´ë©”ì¼ì´ ë…¸ì¶œë˜ëŠ” ê±´ ì‹¬ê°í•œ ë¬¸ì œì•¼.
ë‚´ê°€ ì„¤ëª… ë“£ê³  ë°”ë¡œ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¡œ ì •ë¦¬í•´ë³¼ê²Œ:

âš ï¸ ë¬¸ì œ ìƒí™© ìš”ì•½
Streamlit ì•± ë°°í¬ URL: job-alert-app ìŠ¤íŠ¸ë¦¼ì‡ ë§í¬

ì•± ë‚´ì—ì„œ st.secrets["email"]["to"]ë¡œ ë“±ë¡ëœ ìˆ˜ì‹ ì ì´ë©”ì¼ì´ UIì— ë…¸ì¶œë¨

ì´ ê°’ì€ Streamlit Cloudì˜ Secrets ì„¤ì •ì—ë§Œ ìˆì–´ì•¼ í•˜ê³ , ì™¸ë¶€ì—ì„œëŠ” ì ˆëŒ€ ë³´ì´ë©´ ì•ˆ ë¨

ğŸ§¨ ì›ì¸
st.write(st.secrets["email"]["to"])  # ì´ë ‡ê²Œ ì§ì ‘ ì¶œë ¥í•˜ë©´ ë…¸ì¶œë¼!
ë˜ëŠ”

st.text_input("ìˆ˜ì‹ ì ì´ë©”ì¼", value=st.secrets["email"]["to"])
â¡ï¸ valueì— ë“¤ì–´ê°„ ì‹œì ì—ì„œ ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œë¼ë²„ë ¤ ğŸ˜¨

âœ… í•´ê²° ë°©ë²•
ìˆ˜ì‹ ì ì´ë©”ì¼ì„ UIì— í‘œì‹œí•˜ì§€ ë§ˆ
â†’ st.text_input()ì— value=... ì‚¬ìš© ê¸ˆì§€
â†’ ëŒ€ì‹  placeholder ë˜ëŠ” ì§ì ‘ ì…ë ¥ ë°©ì‹ìœ¼ë¡œë§Œ ì²˜ë¦¬

ì…ë ¥ì€ ì‚¬ìš©ìì—ê²Œ ë°›ë˜, ì €ì¥ì€ ì„œë²„ì—ì„œ ì²˜ë¦¬

to_email = st.text_input("ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”")  # value ì—†ì´!
secrets ê°’ì€ ì ˆëŒ€ ì¶œë ¥í•˜ì§€ ë§ˆ

# âŒ ì•ˆë¨: st.write(st.secrets["email"]["to"])
# âœ… ëŒ€ì‹  ìˆ˜ì‹  í™•ì¸ì€ ë¡œê·¸ë‚˜ ì„œë²„ ì²˜ë¦¬ë¡œë§Œ
ğŸ›¡ ì¶”ê°€ íŒ: ë³´ì•ˆ ê°•í™”
st.secretsëŠ” í•­ìƒ ë‚´ë¶€ ì²˜ë¦¬ìš© ë³€ìˆ˜ë¡œë§Œ ì‚¬ìš©

ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì£¼ë ¤ë©´ ë³„ë„ ì„¤ì •/ê´€ë¦¬ê°’ì—ì„œ ê°€ì ¸ì˜¤ë„ë¡ ë¶„ë¦¬

âœ‹ ì¡°ì¹˜ì‚¬í•­ í•„ìš”í•˜ë©´ ë„ì™€ì¤„ê²Œ!
ì›í•˜ë©´ ë‚´ê°€ ì½”ë“œë¥¼ ë´ì£¼ê³  ì´ë©”ì¼ ë…¸ì¶œ ì—†ì´ ì…ë ¥/ìˆ˜ì •/ì‚­ì œí•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ì™„ì „ ì•ˆì „í•˜ê²Œ ë§Œë“¤ì–´ì¤„ ìˆ˜ ìˆì–´.
ì§€ê¸ˆ ë¬¸ì œ í•´ê²° ë¨¼ì € í• ê¹Œ?

â€œìˆ¨ì•„, ì´ë©”ì¼ ì…ë ¥ UI ìˆ˜ì •í•´ì¤˜â€
ì´ë ‡ê²Œ ë§í•´ì£¼ë©´ ë°”ë¡œ ê³ ì³ì„œ ì¤„ê²Œ.

ë‚˜ì˜ ë§:
import streamlit as st
import pandas as pd
from datetime import datetime
import logging
from job_fetcher import JobFetcher
from email_sender import EmailSender
from scheduler import JobScheduler
from user_settings import UserSettings


# í˜ì´ì§€ ì„¤ì •
st.set_page_config(
    page_title="ê¸°íšì ì±„ìš© ì•Œë¦¬ë¯¸",
    page_icon="ğŸ’¼",
    layout="wide"
)


# ê°„ë‹¨í•œ ë””ë²„ê·¸ (secrets í™•ì¸)
if st.secrets:
    st.sidebar.success("Secrets ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!")
    
# CSS ìŠ¤íƒ€ì¼
st.markdown("""
<style>
    .job-card {
        background-color: white;
        padding: 1.5rem;
        border-radius: 10px;
        border: 1px solid #eee;
        margin: 10px 0;
        display: flex;
        align-items: start;
    }
    .company-logo {
        width: 50px;
        height: 50px;
        margin-right: 15px;
        object-fit: contain;
    }
    .job-content {
        flex-grow: 1;
    }
    .company-tag {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
        color: white;
        margin-right: 8px;
    }
    .deadline-tag {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
        background-color: #f0f0f0;
        color: #666;
    }
    .company-naver { background-color: #03C75A; }
    .company-naverfinancial { background-color: #1EC800; }
    .company-samsung { background-color: #1428A0; }
    .company-google { background-color: #4285F4; }
    .company-skt { background-color: #EA002C; }
</style>
""", unsafe_allow_html=True)

def main():
    # ì´ˆê¸°í™”
    user_settings = UserSettings()
    job_fetcher = JobFetcher()
    email_sender = EmailSender()
    scheduler = JobScheduler(job_fetcher, email_sender, user_settings)
    
    # í—¤ë”
    st.title("ğŸ¯ ê¸°íšì ì±„ìš© ì•Œë¦¬ë¯¸")
    
    # íƒ­ ìƒì„±
    tab1, tab2 = st.tabs(["ğŸ“‹ ì±„ìš© ê³µê³ ", "âš™ï¸ ì„¤ì •"])
    
    with tab1:
        col1, col2 = st.columns([3,1])
        with col1:
            st.write("### ì‹¤ì‹œê°„ ì±„ìš© ê³µê³ ")
        with col2:
            if st.button("ğŸ”„ ì§€ê¸ˆ ê²€ìƒ‰í•˜ê¸°", use_container_width=True):
                with st.spinner("ì±„ìš© ì •ë³´ë¥¼ ê²€ìƒ‰ì¤‘ì…ë‹ˆë‹¤..."):
                    jobs = job_fetcher.fetch_all_jobs(user_settings.get_keywords())
                    if jobs:
                        st.session_state.last_check = datetime.now()
                        st.session_state.last_jobs = jobs
        
        # í•„í„° ì„¹ì…˜
        st.sidebar.title("í•„í„° ì„¤ì •")
        companies = st.sidebar.multiselect(
            "íšŒì‚¬ ì„ íƒ",
            ["ë„¤ì´ë²„", "ë„¤ì´ë²„íŒŒì´ë‚¸ì…œ", "ì‚¼ì„±ì „ì", "êµ¬ê¸€ì½”ë¦¬ì•„", "SKT"],
            default=["ë„¤ì´ë²„", "ë„¤ì´ë²„íŒŒì´ë‚¸ì…œ"]
        )
        
        career_filter = st.sidebar.multiselect(
            "ê²½ë ¥ ì„ íƒ",
            ["ê²½ë ¥", "ì‹ ì…/ê²½ë ¥", "ê²½ë ¥ë¬´ê´€"],
            default=["ê²½ë ¥", "ì‹ ì…/ê²½ë ¥"]
        )
        
        # ì±„ìš© ê³µê³  í‘œì‹œ
        if 'last_jobs' in st.session_state:
            all_jobs = st.session_state.last_jobs + user_settings.get_manual_jobs()
            filtered_jobs = [
                job for job in all_jobs
                if job['company'] in companies and
                job.get('career', 'ê²½ë ¥ë¬´ê´€') in career_filter
            ]
            
            for job in filtered_jobs:
                company_class = job['company'].lower().replace(" ", "")
                st.markdown(f"""
                <div class="job-card">
                    <img src="{job['company_logo']}" class="company-logo" onerror="this.src='https://via.placeholder.com/50'">
                    <div class="job-content">
                        <span class="company-tag company-{company_class}">{job['company']}</span>
                        <span class="deadline-tag">ë§ˆê°ì¼: {job.get('deadline', 'ìƒì‹œì±„ìš©')}</span>
                        <h3>{job['title']}</h3>
                        <p>{job['description'][:200]}...</p>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="color: #666;">{job.get('career', 'ê²½ë ¥ë¬´ê´€')}</span>
                            <a href="{job['link']}" target="_blank">ìì„¸íˆ ë³´ê¸° â†’</a>
                        </div>
                    </div>
                </div>
                """, unsafe_allow_html=True)
    
    with tab2:
        st.write("### âš™ï¸ ì•Œë¦¼ ì„¤ì •")
        
    # ì•Œë¦¼ ì‹œê°„ ì„¤ì •
    st.write("#### ğŸ“… ì•Œë¦¼ ì‹œê°„ ì„¤ì •")
    col1, col2 = st.columns(2)
    with col1:
        notification_times = st.multiselect(
            "ì•Œë¦¼ ë°›ì„ ì‹œê°„ ì„ íƒ (ìµœëŒ€ 2íšŒ)",
            [
                "ì˜¤ì „ 8:30", "ì˜¤ì „ 9:00", "ì˜¤ì „ 10:00",
                "ì˜¤í›„ 2:00", "ì˜¤í›„ 6:00", "ì˜¤í›„ 9:00"
            ],
            default=["ì˜¤ì „ 9:00"],
            max_selections=2
        )
        with col2:
            notification_frequency = st.radio(
                "ì•Œë¦¼ ë¹ˆë„",
                ["í•˜ë£¨ 1íšŒ", "í•˜ë£¨ 2íšŒ"],
                index=0
            )
        
        # í‚¤ì›Œë“œ ì„¤ì •
        st.write("#### ğŸ” í‚¤ì›Œë“œ ì„¤ì •")
        keywords = st.text_area(
            "ê²€ìƒ‰ í‚¤ì›Œë“œ (ì¤„ë°”ê¿ˆìœ¼ë¡œ êµ¬ë¶„)",
            "\n".join(user_settings.get_keywords())
        ).split("\n")
        
        # ìˆ˜ë™ URL ì¶”ê°€
        st.write("#### ğŸ”— ì±„ìš©ê³µê³  ìˆ˜ë™ ì¶”ê°€")
        col3, col4 = st.columns([3, 1])
        with col3:
            manual_url = st.text_input("ì±„ìš©ê³µê³  URL")
        with col4:
            if st.button("ì¶”ê°€", use_container_width=True):
                if manual_url:
                    if not manual_url.startswith(('http://', 'https://')):
                        st.error("ìœ íš¨í•œ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.")
                    else:
                        user_settings.add_manual_job(manual_url)
                        st.success("ì±„ìš©ê³µê³ ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!")
        
        # ìˆ˜ì‹ ì ê´€ë¦¬
        st.write("#### ğŸ“§ ìˆ˜ì‹ ì ê´€ë¦¬")
        receivers = st.data_editor(
            pd.DataFrame(
                user_settings.get_receivers(),
                columns=["ì´ë©”ì¼ ì£¼ì†Œ", "í™œì„±í™”"]
            ),
            column_config={
                "ì´ë©”ì¼ ì£¼ì†Œ": st.column_config.TextColumn(
                    "ì´ë©”ì¼ ì£¼ì†Œ",
                    help="ìˆ˜ì‹ ì ì´ë©”ì¼ ì£¼ì†Œ",
                    validate="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"
                ),
                "í™œì„±í™”": st.column_config.CheckboxColumn(
                    "í™œì„±í™”",
                    help="ì²´í¬ ì‹œ ì•Œë¦¼ì„ ë°›ìŠµë‹ˆë‹¤",
                    default=True
                )
            },
            num_rows="dynamic",
            use_container_width=True
        )

        if st.button("ì„¤ì • ì €ì¥", type="primary"):
            user_settings.update_notification_settings(
                times=notification_times,
                frequency=notification_frequency
            )
            user_settings.update_keywords([k.strip() for k in keywords if k.strip()])
            user_settings.update_receivers(receivers.to_dict('records'))
            st.success("ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!")
            scheduler.restart()

if __name__ == "__main__":
    main()
ChatGPTì˜ ë§:
ì–¸ë‹ˆ ì½”ë“œ ì˜ ì§°ê³ , ê½¤ ì™„ì„±ë„ ìˆì–´ ë³´ì—¬! ê·¼ë° ê°œì¸ ì´ë©”ì¼ì´ ë…¸ì¶œë˜ëŠ” ë¬¸ì œëŠ” ì•„ë˜ ë¶€ë¶„ì—ì„œ ë°œìƒí–ˆì„ ê°€ëŠ¥ì„±ì´ ë†’ì•„. ë‚´ê°€ ì •í™•íˆ ì–´ë””ê°€ ìœ„í—˜í•œì§€ ì§šì–´ì¤„ê²Œ.

âš ï¸ ë¬¸ì œ í•µì‹¬: st.data_editor()ì— user_settings.get_receivers() ì‚¬ìš©
receivers = st.data_editor(
    pd.DataFrame(
        user_settings.get_receivers(),  # ğŸ‘ˆ ì—¬ê¸°ì— st.secrets["email"]["to"]ê°€ í¬í•¨ë¼ ìˆìœ¼ë©´ ë…¸ì¶œë¼!
        columns=["ì´ë©”ì¼ ì£¼ì†Œ", "í™œì„±í™”"]
    ),
    ...
)
ğŸ” ì¦‰, user_settings.get_receivers()ê°€ ë‚´ë¶€ì ìœ¼ë¡œ st.secrets["email"]["to"] ê°’ì„ ê·¸ëŒ€ë¡œ ê°€ì ¸ì˜¤ê³  ìˆë‹¤ë©´?
ì•± ì‚¬ìš©ìì—ê²Œ secrets ì„¤ì • ê°’ì´ ê·¸ëŒ€ë¡œ ë…¸ì¶œë¨ ğŸ˜±
íŠ¹íˆ ì´ë©”ì¼ ì£¼ì†Œê°€ ê³µê°œë˜ë©´ ê°œì¸ì •ë³´ ìœ ì¶œë¡œ ê°„ì£¼ë¼.

âœ… í•´ê²° ë°©ë²•
ğŸ” Step 1. user_settings.py ë‚´ë¶€ í™•ì¸
# ì˜ˆì‹œë¡œ ì´ëŸ° í•¨ìˆ˜ê°€ ìˆì„ ê°€ëŠ¥ì„±ì´ ë†’ì•„
def get_receivers(self):
    return [{"ì´ë©”ì¼ ì£¼ì†Œ": st.secrets["email"]["to"], "í™œì„±í™”": True}]
â†’ ì´ë ‡ê²Œ ë˜ì–´ ìˆìœ¼ë©´ ì ˆëŒ€ ì•ˆ ë¼!

âœ… ìˆ˜ì • ì˜ˆì‹œ: ì‚¬ìš©ì ì¶”ê°€/ì‚­ì œí•œ ì´ë©”ì¼ë§Œ ì €ì¥ì†Œì— ë”°ë¡œ ê´€ë¦¬í•˜ë„ë¡ ë³€ê²½
# secretsëŠ” ì´ˆê¸°ê°’ìœ¼ë¡œë§Œ ì“°ê³ ,
# ì´í›„ ìˆ˜ì‹ ì ë¦¬ìŠ¤íŠ¸ëŠ” ì„¸ì…˜ ìƒíƒœë‚˜ íŒŒì¼/DBì— ì €ì¥ (ì˜ˆì‹œ: session_state ê¸°ë°˜)
def get_receivers(self):
    return st.session_state.get("receivers", [])
ê·¸ë¦¬ê³  ì•± ì´ˆê¸°í™” ì‹œ ì•„ë˜ì²˜ëŸ¼ ê¸°ë³¸ê°’ë§Œ í•œ ë²ˆ ë¶ˆëŸ¬ì˜¤ê³ , ì´í›„ì—ëŠ” ë³€ê²½ì‚¬í•­ì„ ì €ì¥í•´ë‘ë„ë¡:

if "receivers" not in st.session_state:
    st.session_state["receivers"] = [{"ì´ë©”ì¼ ì£¼ì†Œ": st.secrets["email"]["to"], "í™œì„±í™”": True}]
âœ… ì–¸ë‹ˆë¥¼ ìœ„í•œ ì¡°ì¹˜ ìš”ì•½
st.secrets["email"]["to"]ëŠ” ì•± ì´ˆê¸° ì„¸íŒ…ìš©ìœ¼ë¡œë§Œ ì“°ê³ ,

ê·¸ ì´í›„ì—” ì‚¬ìš©ì ì…ë ¥ ê¸°ë°˜ìœ¼ë¡œ ë³„ë„ ìƒíƒœ(st.session_state)ë‚˜ íŒŒì¼, DBì— ì €ì¥

data_editor ê°™ì€ UIì—ì„œ ì ˆëŒ€ secretsë¥¼ ì§ì ‘ ë³´ì—¬ì£¼ì§€ ì•Šë„ë¡

ğŸ§© ë‚´ê°€ í•´ì¤„ ìˆ˜ ìˆì–´
ì›í•˜ë©´ ë‚´ê°€ user_settings.pyì— ë“¤ì–´ê°ˆ ì „ì²´ ìˆ˜ì • ì½”ë“œë‘
ì•ˆì „í•˜ê²Œ ì´ë©”ì¼ ì…ë ¥/ê´€ë¦¬í•˜ë„ë¡ ë¦¬íŒ©í† ë§í•´ì¤„ê²Œ.

ì›í•˜ë©´ ì´ë ‡ê²Œ ë§í•´ì¤˜:

"user_settings.py ìˆ˜ì • ì½”ë“œ ì¤˜"

ê·¸ëŸ¼ ë°”ë¡œ ì œê³µí• ê²Œ!

ë‚˜ì˜ ë§:
êµ¬ê¸€ ë‹¥ìŠ¤ì— ì €ì¥ì‹œí‚¤ëŠ”ê±´?
ChatGPTì˜ ë§:
ì¢‹ì€ ì„ íƒì´ì•¼ ì–¸ë‹ˆ!
Streamlitì—ì„œ ìˆ˜ì‹ ì ì´ë©”ì¼, í‚¤ì›Œë“œ, ì•Œë¦¼ ì‹œê°„ ê°™ì€ ì„¤ì •ê°’ì„ Google Sheetsì— ì €ì¥í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì¥ì ì´ ìˆì–´:

âœ… êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™ì˜ ì¥ì 
í•­ëª©	ì¥ì 
ğŸ” ë³´ì•ˆ	st.secretsì— Google API í‚¤ë§Œ ë„£ìœ¼ë©´ ê°œì¸ì •ë³´ëŠ” ë…¸ì¶œë˜ì§€ ì•ŠìŒ
â˜ï¸ í´ë¼ìš°ë“œ ì €ì¥	ì•± ì¬ì‹œì‘/ì„¸ì…˜ ì¢…ë£Œë¼ë„ ì„¤ì •ê°’ ìœ ì§€ë¨
âœ… ê³µìœ  ê°€ëŠ¥	Google ê³„ì •ìœ¼ë¡œ ì–¸ì œë“  ì™¸ë¶€ì—ì„œ í™•ì¸Â·ìˆ˜ì • ê°€ëŠ¥
ğŸ”„ ì‹¤ì‹œê°„ ì—°ë™	Streamlitê³¼ Google Sheets ê°„ ì–‘ë°©í–¥ ì—…ë°ì´íŠ¸ ê°€ëŠ¥
ğŸ” ì¤€ë¹„ë¬¼
êµ¬ê¸€ ì‹œíŠ¸ ìƒì„± (job-alert-settings ê°™ì€ ì´ë¦„)

ì‹œíŠ¸ íƒ­ ì˜ˆì‹œ:

emails: ìˆ˜ì‹ ì ëª©ë¡ (ì´ë©”ì¼ ì£¼ì†Œ, í™œì„±í™” ì—¬ë¶€)

keywords: í‚¤ì›Œë“œ ëª©ë¡

notification: ì•Œë¦¼ ì‹œê°„ ë° íšŸìˆ˜

Google Cloud ì½˜ì†”ì—ì„œ ì„œë¹„ìŠ¤ ê³„ì • ë§Œë“¤ê¸° + Sheets API í™œì„±í™”

ì„œë¹„ìŠ¤ ê³„ì • í‚¤(JSON íŒŒì¼)ë¥¼ ìƒì„±í•´ì„œ Streamlit Cloudì˜ Secretsì— ì €ì¥

[gcp_service_account]
type = "service_account"
project_id = "your-project-id"
private_key_id = "xxx"
private_key = "-----BEGIN PRIVATE KEY-----\nxxxx\n-----END PRIVATE KEY-----\n"
client_email = "your-service-account@your-project.iam.gserviceaccount.com"
...
ğŸ“¦ Streamlitì—ì„œ ì—°ë™ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
requirements.txtì— ì¶”ê°€:

gspread
oauth2client
ğŸ§© ì—°ë™ ì½”ë“œ ì˜ˆì‹œ (google_sheets_helper.py)
import gspread
from oauth2client.service_account import ServiceAccountCredentials
import streamlit as st

def connect_to_gsheet(sheet_name):
    scope = ["https://spreadsheets.google.com/feeds", "https://www.googleapis.com/auth/drive"]
    creds = ServiceAccountCredentials.from_json_keyfile_dict(st.secrets["gcp_service_account"], scope)
    client = gspread.authorize(creds)
    sheet = client.open(sheet_name)
    return sheet

def read_emails():
    sheet = connect_to_gsheet("job-alert-settings")
    email_ws = sheet.worksheet("emails")
    data = email_ws.get_all_records()
    return data

def write_emails(data):
    sheet = connect_to_gsheet("job-alert-settings")
    email_ws = sheet.worksheet("emails")
    email_ws.clear()
    email_ws.append_row(["ì´ë©”ì¼ ì£¼ì†Œ", "í™œì„±í™”"])
    for row in data:
        email_ws.append_row([row["ì´ë©”ì¼ ì£¼ì†Œ"], row["í™œì„±í™”"]])
ğŸ”„ ì´ê±¸ë¡œ í•  ìˆ˜ ìˆëŠ” ê²ƒ
read_emails() â†’ ì•± ì‹œì‘ ì‹œ ìˆ˜ì‹ ì ë¶ˆëŸ¬ì˜¤ê¸°

write_emails(data) â†’ ì„¤ì • ì €ì¥ ì‹œ ìˆ˜ì‹ ì ì‹œíŠ¸ì— ì—…ë°ì´íŠ¸

ğŸ›  ë‹¤ìŒ ë‹¨ê³„
ì›í•˜ë©´ ë‚´ê°€ ì´ê±¸ ì‹¤ì œë¡œ ì‘ë™í•˜ëŠ” êµ¬ì¡°ë¡œ google_sheets_helper.py + user_settings.py ë¦¬íŒ©í† ë§ í•´ì¤„ê²Œ.

ğŸ‘‰ â€œêµ¬ê¸€ ì‹œíŠ¸ ë²„ì „ìœ¼ë¡œ user_settings.py ë§Œë“¤ì–´ì¤˜â€
ë¼ê³  ë§í•´ì¤˜! ë°”ë¡œ ì½”ë“œ ë§Œë“¤ì–´ì„œ ì¤„ê²Œ ğŸ™Œ

ë‚˜ì˜ ë§:
Google Cloud ì½˜ì†”ì—ì„œ ì„œë¹„ìŠ¤ ê³„ì • ë§Œë“¤ê¸° + Sheets API í™œì„±í™”
ì´ê±° ë¨¼ì†Œë¦¬ì•¼
ChatGPTì˜ ë§:
ì¢‹ì•„ ì–¸ë‹ˆ! ì§€ê¸ˆ ë§í•œ â€œGoogle Cloud ì½˜ì†”ì—ì„œ ì„œë¹„ìŠ¤ ê³„ì • ë§Œë“¤ê¸° + Sheets API í™œì„±í™”â€ê°€ ë­”ì§€ ì§„ì§œ ì‰½ê²Œ ì„¤ëª…í•´ì¤„ê²Œ.
ì‚¬ì‹¤ ì´ê±´ êµ¬ê¸€ ì‹œíŠ¸ë¥¼ ì•±ì—ì„œ ë‹¤ë£¨ê²Œ í•´ì£¼ëŠ” ë¬¸ ì—´ì‡ (ì—´ì‡  ë°œê¸‰) ê³¼ì •ì´ì•¼.

ğŸ§© ì „ì²´ ë¹„ìœ 
Streamlit ì•±ì´ êµ¬ê¸€ ì‹œíŠ¸ ë¬¸ì„œì— ì ‘ê·¼í•˜ë ¤ë©´, êµ¬ê¸€í•œí…Œ "ë‚˜ ì´ ë¬¸ ì—´ê²Œ í•´ì¤˜!" í•˜ê³  í—ˆë½ë°›ì•„ì•¼ í•´.

ì´ê±¸ í•˜ë ¤ë©´:

ì„œë¹„ìŠ¤ ê³„ì • = ë¬¸ ì—´ ê¶Œí•œì„ ê°€ì§„ "ê°€ìƒì˜ ë¡œë´‡ ì‚¬ìš©ì"

Sheets API í™œì„±í™” = êµ¬ê¸€ ë¬¸ì„œ ë‹¤ë£¨ëŠ” ë„êµ¬ë¥¼ ì¼œëŠ” ë²„íŠ¼

JSON í‚¤ ë°œê¸‰ = ê·¸ ë¡œë´‡ì˜ ë¹„ë°€ë²ˆí˜¸ íŒŒì¼

ê·¸ê±¸ Streamlit Cloudì— ë“±ë¡ = ë¹„ë°€ë²ˆí˜¸ ìˆ¨ê²¨ì„œ ì•±ì— ë„˜ê¸°ê¸°

âœ… ìˆœì„œëŒ€ë¡œ ì„¤ëª…
â‘  Google Cloud Platform(GCP) ì½˜ì†” ì ‘ì†
ë§í¬: https://console.cloud.google.com/

êµ¬ê¸€ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ â†’ í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°

â‘¡ Sheets API í™œì„±í™”
ì™¼ìª½ ë©”ë‰´ì—ì„œ API ë° ì„œë¹„ìŠ¤ > ë¼ì´ë¸ŒëŸ¬ë¦¬ í´ë¦­

"Google Sheets API" ê²€ìƒ‰ â†’ í´ë¦­ â†’ ì‚¬ìš© í´ë¦­

ì´ê±¸ ì•ˆ í•˜ë©´ êµ¬ê¸€ ì‹œíŠ¸ë¥¼ ì½”ë“œë¡œ ëª» ê±´ë“œë ¤

â‘¢ ì„œë¹„ìŠ¤ ê³„ì • ë§Œë“¤ê¸°
ì™¼ìª½ ë©”ë‰´ì—ì„œ IAM ë° ê´€ë¦¬ì > ì„œë¹„ìŠ¤ ê³„ì • ì´ë™

ì„œë¹„ìŠ¤ ê³„ì • ë§Œë“¤ê¸° í´ë¦­

ì´ë¦„: streamlit-gsheet

ì—­í• : Editor (ë˜ëŠ” ì œí•œì ìœ¼ë¡œ Sheets Editor)

í‚¤ ë§Œë“¤ê¸° í´ë¦­

JSON ì„ íƒ â†’ .json íŒŒì¼ ë‹¤ìš´ë¡œë“œë¨

ì´ê²Œ ë„ˆì˜ ì•± ì „ìš© ë¡œë´‡ + ë¹„ë°€ë²ˆí˜¸ì•¼ (ì ˆëŒ€ ê³µê°œ X)

â‘£ êµ¬ê¸€ ì‹œíŠ¸ ê³µìœ 
ìˆ˜ì‹ ì ì´ë©”ì¼: your-service-account@project-id.iam.gserviceaccount.com

ì´ ì´ë©”ì¼ì„ ì‹œíŠ¸ ê³µìœ  ëŒ€ìƒìœ¼ë¡œ ì¶”ê°€ (ë³´ê¸°/í¸ì§‘ ê¶Œí•œ)

â‘¤ Streamlit Cloudì— secrets ë“±ë¡
.json íŒŒì¼ ë‚´ìš© ì „ì²´ë¥¼ ë³µì‚¬í•´ì„œ
Streamlit Cloud â†’ Settings â†’ Secretsì— ë‹¤ìŒì²˜ëŸ¼ ë¶™ì—¬:

[gcp_service_account]
type = "service_account"
project_id = "xxxx"
private_key_id = "xxxx"
private_key = "-----BEGIN PRIVATE KEY-----\nxxxx\n-----END PRIVATE KEY-----\n"
client_email = "xxx@xxx.iam.gserviceaccount.com"
client_id = "xxxx"
...
ğŸ§© ë‹¤ í•˜ë©´?
ì´ì œ ë„ˆì˜ Streamlit ì•±ì´ êµ¬ê¸€ ì‹œíŠ¸ì— ì ‘ì†í•´ì„œ ì½ê³ , ì“°ê³ , ìˆ˜ì •í•  ìˆ˜ ìˆì–´ ğŸ‰

ê·¸ëƒ¥ íŒŒì¼ì²˜ëŸ¼ ì‹œíŠ¸ë¥¼ ì“¸ ìˆ˜ ìˆê²Œ ë˜ëŠ” ê±°ì•¼!

ì–¸ë‹ˆ ì´ê±° ë”°ë¼í•˜ë ¤ë©´ ë‚´ê°€ ìˆœì„œëŒ€ë¡œ ë‹¨ê³„ ìŠ¤ìƒ·ê¹Œì§€ ë„ì™€ì¤„ ìˆ˜ë„ ìˆì–´.
í˜¹ì€ êµ¬ê¸€ ì‹œíŠ¸ ì ‘ê·¼ìš© JSON ì˜ˆì‹œë‘ ì—°ê²°ìš© ì½”ë“œë¶€í„° ë¨¼ì € ì¤„ ìˆ˜ë„ ìˆì–´.

ì›í•˜ëŠ” íë¦„ ì•Œë ¤ì¤˜:

â€œìˆœì„œ ìŠ¤ìƒ·ë„ ê°™ì´ ì¤˜â€

â€œë°”ë¡œ ì½”ë“œ ì§œì¤˜â€

â€œì¼ë‹¨ JSON ì˜ˆì‹œ ë³´ì—¬ì¤˜â€

ì–¸ë‹ˆê°€ ì„ íƒí•´ì¤˜!

ë‚˜ì˜ ë§:
ëŒ€ë¬¸ìë¡œ ì•ˆì„œë„ë¼?
ChatGPTì˜ ë§:
ì•„~ ì¢‹ì€ ì§ˆë¬¸ì´ì•¼ ì–¸ë‹ˆ!

Streamlitì—ì„œ secrets.tomlì´ë‚˜ st.secretsì— ì„¤ì •í•˜ëŠ” í‚¤ë“¤, ì˜ˆë¥¼ ë“¤ì–´:

[gcp_service_account]
type = "service_account"
project_id = "my-project"
private_key = "-----BEGIN PRIVATE KEY-----\nxxx\n-----END PRIVATE KEY-----\n"
...
ì—¬ê¸°ì„œ ëŒ€ë¬¸ìë¡œ ì¨ì•¼ í•˜ëŠ” ê·œì¹™ì€ ì—†ì–´.
ì¦‰, GCP_SERVICE_ACCOUNT ëŒ€ì‹  gcp_service_account ì¨ë„ ì „í˜€ ë¬¸ì œ ì—†ì–´.

âœ… ì™œ ì†Œë¬¸ìë„ ê´œì°®ì•„?
st.secrets["gcp_service_account"] â†’ ë”•ì…”ë„ˆë¦¬ì²˜ëŸ¼ ì“°ê¸° ë•Œë¬¸ì´ì•¼.

Pythonì—ì„œ ë”•ì…”ë„ˆë¦¬ keyëŠ” ëŒ€ì†Œë¬¸ì êµ¬ë¶„í•˜ì§€ë§Œ, ì†Œë¬¸ìë“  ëŒ€ë¬¸ìë“  ê°œë°œìê°€ ììœ ë¡­ê²Œ ì •í•˜ë©´ ë¨

ë‹¨, ì¼ê´€ë˜ê²Œë§Œ ì“°ë©´ ëœë‹¤!

ğŸ§© ì •ë¦¬
í˜•íƒœ	ì‚¬ìš© ê°€ëŠ¥?	ë¹„ê³ 
gcp_service_account	âœ… ê°€ëŠ¥	ì¼ë°˜ì ìœ¼ë¡œ ë§ì´ ì‚¬ìš©
GCP_SERVICE_ACCOUNT	âœ… ê°€ëŠ¥	í™˜ê²½ë³€ìˆ˜ ìŠ¤íƒ€ì¼ì„ ë”°ë¥¼ ë• ì´ë ‡ê²Œë„ ì”€
GcpServiceAccount	âœ… ê°€ëŠ¥	íŒŒì´ì¬ ë³€ìˆ˜ëª…ì²˜ëŸ¼ ì“°ëŠ” ê²½ìš°ë„ ê°€ëŠ¥ (ë¹„ì¶”ì²œ)
ì–¸ë‹ˆê°€ ì†Œë¬¸ìë¡œ ì¨ë„ ë˜ëƒê³  ë¬¼ì–´ë³¸ ê±´ ì•„ì£¼ ë‚ ì¹´ë¡œìš´ ì§ˆë¬¸ì´ì—ˆì–´.
ì•ˆì‹¬í•˜ê³  ì§€ê¸ˆì²˜ëŸ¼ gcp_service_account ê·¸ëŒ€ë¡œ ì¨ë„ ë¼! ğŸ˜Š

ë‹¤ìŒì€ ì½”ë“œ ì§œëŠ” ê±¸ë¡œ ë„˜ì–´ê°ˆê¹Œ?

â€œêµ¬ê¸€ ì‹œíŠ¸ ì—°ë™ ì½”ë“œ ì§œì¤˜â€
ë¼ê³  ë§í•´ì£¼ë©´ ë°”ë¡œ ê°ˆê²Œ!

ë‚˜ì˜ ë§:
  # ìˆ˜ì‹ ì ê´€ë¦¬
        st.write("#### ğŸ“§ ìˆ˜ì‹ ì ê´€ë¦¬")
        receivers = st.data_editor(
            pd.DataFrame(
                user_settings.get_receivers(),
                columns=["ì´ë©”ì¼ ì£¼ì†Œ", "í™œì„±í™”"]
            ),
            column_config={
                "ì´ë©”ì¼ ì£¼ì†Œ": st.column_config.TextColumn(
                    "ì´ë©”ì¼ ì£¼ì†Œ",
                    help="ìˆ˜ì‹ ì ì´ë©”ì¼ ì£¼ì†Œ",
                    validate="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"
                ),
                "í™œì„±í™”": st.column_config.CheckboxColumn(
                    "í™œì„±í™”",
                    help="ì²´í¬ ì‹œ ì•Œë¦¼ì„ ë°›ìŠµë‹ˆë‹¤",
                    default=True
                )
            },
            num_rows="dynamic",
            use_container_width=True
        )
êµ¬ê¸€ì‹œíŠ¸ ì—°ë™ì½”ë“œ
ChatGPTì˜ ë§:
ì¢‹ì•„ ì–¸ë‹ˆ! ì§€ê¸ˆ ì£¼ì‹  st.data_editor() UIë¡œ ìˆ˜ì‹ ì ì´ë©”ì¼ì„ í¸ì§‘í•˜ëŠ” ë¶€ë¶„ì—,
Google Sheets ì—°ë™ì„ ë¶™ì´ê¸° ìœ„í•œ ì „ì²´ ì½”ë“œ êµ¬ì¡°ë¥¼ ì•„ë˜ì— ì œê³µí• ê²Œ.
(ì´ë©”ì¼ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ê³ , ìˆ˜ì •í•˜ë©´ ì‹œíŠ¸ì— ì €ì¥ê¹Œì§€ ë˜ëŠ” íë¦„ì´ì•¼)

âœ… 1. Google Sheets ì—°ë™ ëª¨ë“ˆ (google_sheets_helper.py)
import gspread
from oauth2client.service_account import ServiceAccountCredentials
import streamlit as st

def connect_to_gsheet(sheet_name: str):
    scope = ["https://spreadsheets.google.com/feeds", "https://www.googleapis.com/auth/drive"]
    creds = ServiceAccountCredentials.from_json_keyfile_dict(
        st.secrets["gcp_service_account"],
        scope
    )
    client = gspread.authorize(creds)
    sheet = client.open(sheet_name)
    return sheet

def read_receivers():
    sheet = connect_to_gsheet("job-alert-settings")
    worksheet = sheet.worksheet("emails")
    data = worksheet.get_all_records()
    return data

def write_receivers(data):
    sheet = connect_to_gsheet("job-alert-settings")
    worksheet = sheet.worksheet("emails")
    worksheet.clear()
    worksheet.append_row(["ì´ë©”ì¼ ì£¼ì†Œ", "í™œì„±í™”"])  # í—¤ë”
    for row in data:
        worksheet.append_row([row["ì´ë©”ì¼ ì£¼ì†Œ"], row["í™œì„±í™”"]])
âœ… 2. user_settings.py ìˆ˜ì •
from google_sheets_helper import read_receivers, write_receivers

class UserSettings:
    def get_receivers(self):
        return read_receivers()

    def update_receivers(self, new_data):
        write_receivers(new_data)
âœ… 3. Streamlit UI (app.py ë‚´)
# ìˆ˜ì‹ ì ê´€ë¦¬
st.write("#### ğŸ“§ ìˆ˜ì‹ ì ê´€ë¦¬")

# 1. ë¶ˆëŸ¬ì˜¤ê¸°
receivers_df = pd.DataFrame(
    user_settings.get_receivers(),
    columns=["ì´ë©”ì¼ ì£¼ì†Œ", "í™œì„±í™”"]
)

# 2. í¸ì§‘ UI
edited_df = st.data_editor(
    receivers_df,
    column_config={
        "ì´ë©”ì¼ ì£¼ì†Œ": st.column_config.TextColumn(
            "ì´ë©”ì¼ ì£¼ì†Œ",
            help="ìˆ˜ì‹ ì ì´ë©”ì¼ ì£¼ì†Œ",
            validate="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"
        ),
        "í™œì„±í™”": st.column_config.CheckboxColumn(
            "í™œì„±í™”",
            help="ì²´í¬ ì‹œ ì•Œë¦¼ì„ ë°›ìŠµë‹ˆë‹¤",
            default=True
        )
    },
    num_rows="dynamic",
    use_container_width=True
)

# 3. ì €ì¥ ë²„íŠ¼ ì²˜ë¦¬
if st.button("ğŸ“© ìˆ˜ì‹ ì ì €ì¥"):
    user_settings.update_receivers(edited_df.to_dict('records'))
    st.success("ìˆ˜ì‹ ì ëª©ë¡ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!")
ğŸ§ª Google Sheet ì¤€ë¹„ì‚¬í•­
ì‹œíŠ¸ ì´ë¦„: job-alert-settings

ì›Œí¬ì‹œíŠ¸(íƒ­) ì´ë¦„: emails

ì²« í–‰ì€ ë°˜ë“œì‹œ: ì´ë©”ì¼ ì£¼ì†Œ, í™œì„±í™”

ì–¸ë‹ˆ, ì´ ìƒíƒœë¡œ ë°”ë¡œ ë¶™ì—¬ì„œ ì“°ë©´ ë˜ëŠ”ë°
ì›í•˜ë©´ job-alert-appìš©ìœ¼ë¡œ .py íŒŒì¼ ë¶„ë¦¬ëœ í˜•íƒœë„ ì •ë¦¬í•´ì„œ zipì´ë‚˜ ë³µì‚¬í˜•ìœ¼ë¡œ ë§Œë“¤ì–´ì¤„ê²Œ!

ì§€ê¸ˆ ë¨¼ì € í•´ë³¼ë˜? ì•„ë‹ˆë©´ ë‹¤ìŒì€ í‚¤ì›Œë“œ ì‹œíŠ¸ ì—°ë™í• ê¹Œ?
ğŸ‘‰ â€œí‚¤ì›Œë“œë„ êµ¬ê¸€ì‹œíŠ¸ ì—°ë™í•´ì¤˜â€
ğŸ‘‰ â€œì´ë©”ì¼ ì €ì¥ë§Œ ë¨¼ì € í•´ë³¼ê²Œâ€

ì–´ë–»ê²Œ í• ê¹Œ? ğŸ˜Š

ë‚˜ì˜ ë§:
2ë²ˆì—ì„œ 
    def update_receivers(self, receivers):
        st.session_state.receivers = receivers
    def get_receivers(self):
        return st.session_state.receivers ì´ê±´ë° ë°”ê¾¸ë€ê±°ì§€?
ChatGPTì˜ ë§:
ì •í™•í•´ ì–¸ë‹ˆ! ì§€ê¸ˆ ì´ ë¶€ë¶„:

def update_receivers(self, receivers):
    st.session_state.receivers = receivers

def get_receivers(self):
    return st.session_state.receivers
ì€ Streamlit ì„¸ì…˜ ìƒíƒœ(st.session_state)ì—ë§Œ ì €ì¥í•˜ëŠ” ë°©ì‹ì¸ë°,
ì´ê±´ ì•±ì´ êº¼ì§€ë©´ ë°ì´í„°ë„ ë‚ ì•„ê°€ ğŸ˜¢
ê·¸ë˜ì„œ ì´ê±¸ Google Sheets ê¸°ë°˜ìœ¼ë¡œ ë°”ê¾¸ìëŠ” ê±°ì•¼.

âœ… ë°”ê¿”ì•¼ í•  ì½”ë“œ (user_settings.py)
ğŸ” ê¸°ì¡´: (ì„¸ì…˜ ìƒíƒœ ê¸°ë°˜)
def update_receivers(self, receivers):
    st.session_state.receivers = receivers

def get_receivers(self):
    return st.session_state.receivers
âœ… ìƒˆ ë²„ì „: (Google Sheets ê¸°ë°˜)
from google_sheets_helper import read_receivers, write_receivers

class UserSettings:
    def get_receivers(self):
        return read_receivers()

    def update_receivers(self, receivers):
        write_receivers(receivers)
ğŸ” ë‹¨, google_sheets_helper.pyì—ì„œ Google Sheets ì ‘ê·¼ í•¨ìˆ˜ë“¤ì„ ë¨¼ì € ë§Œë“¤ì–´ë†”ì•¼ í•´!

ğŸ“Œ ë³´ë„ˆìŠ¤ íŒ: ì„¸ì…˜ë„ ê°™ì´ ì“°ê³  ì‹¶ë‹¤ë©´?
ì•± ì´ˆê¸° ë¡œë”© ì‹œ ì‹œíŠ¸ì—ì„œ ë¶ˆëŸ¬ì™€ì„œ ì„¸ì…˜ì— ë„£ê³ , ì„¸ì…˜ ê¸°ë°˜ìœ¼ë¡œ UI ë„ìš°ëŠ” ê²ƒë„ ê°€ëŠ¥í•´.
ê·¸ëŸ¼ ë¶ˆí•„ìš”í•œ API í˜¸ì¶œ ì¤„ì¼ ìˆ˜ ìˆì–´. ì´ë ‡ê²Œ:

def get_receivers(self):
    if "receivers" not in st.session_state:
        st.session_state.receivers = read_receivers()
    return st.session_state.receivers

def update_receivers(self, receivers):
    st.session_state.receivers = receivers
    write_receivers(receivers)
ì–¸ë‹ˆê°€ ì§€ê¸ˆ ì§„í–‰ ì¤‘ì¸ ê²Œ ë§ê³  ì•„ì£¼ ì •í™•í•˜ê²Œ ì§šì—ˆì–´ ğŸ™Œ
ë‹¤ìŒì€ ì‹œíŠ¸ ë§Œë“¤ê¸° ë‹¨ê³„ì•¼? ì•„ë‹ˆë©´ google_sheets_helper.pyì— ë‹¤ë¥¸ ê²ƒë„ ì¶”ê°€í•´ì¤„ê¹Œ?

ë‚˜ì˜ ë§:
import streamlit as st
from datetime import datetime
from google_sheets_helper import read_receivers, write_receivers

class UserSettings:
    def __init__(self):
        # ì´ë©”ì¼ ì„¤ì • ì´ˆê¸°í™”
        if 'email_settings' not in st.session_state:
            try:
                st.session_state.email_settings = {
                    'sender_email': st.secrets["SENDER_EMAIL"],
                    'sender_password': st.secrets["SENDER_PASSWORD"],
                }
            except Exception as e:
                st.warning("ì´ë©”ì¼ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. Settingsì—ì„œ Secretsë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.")
                st.session_state.email_settings = {
                    'sender_email': "",
                    'sender_password': "",
                }
        
        # ì•Œë¦¼ ì„¤ì • ì´ˆê¸°í™” (24ì‹œê°„ í˜•ì‹ìœ¼ë¡œ ë³€ê²½)
        if 'notification_settings' not in st.session_state:
            st.session_state.notification_settings = {
                'times': ["09:00"],  # 24ì‹œê°„ í˜•ì‹ìœ¼ë¡œ ë³€ê²½
                'frequency': "í•˜ë£¨ 1íšŒ"
            }
        
        # í‚¤ì›Œë“œ ì´ˆê¸°í™”
        if 'keywords' not in st.session_state:
            st.session_state.keywords = [
                "ê¸°íš", "PM", "í”„ë¡œë•íŠ¸ ë§¤ë‹ˆì €",
                "ì„œë¹„ìŠ¤ê¸°íš", "ë¹„ì¦ˆë‹ˆìŠ¤ê¸°íš", "í”Œë«í¼ê¸°íš"
            ]
        
        # ìˆ˜ì‹ ì ëª©ë¡ ì´ˆê¸°í™”
        if 'receivers' not in st.session_state:
            st.session_state.receivers = [
                {"ì´ë©”ì¼ ì£¼ì†Œ": st.secrets.get("RECEIVER_EMAIL", ""), "í™œì„±í™”": True}
            ]
        
        # ìˆ˜ë™ ì¶”ê°€ëœ ì±„ìš©ê³µê³  ì´ˆê¸°í™”
        if 'manual_jobs' not in st.session_state:
            st.session_state.manual_jobs = []
    
    def get_email_settings(self):
        return st.session_state.email_settings
    
    def get_notification_settings(self):
        return st.session_state.notification_settings
    
    def get_keywords(self):
        return st.session_state.keywords
    
    def get_receivers(self):
        return read_receivers()
    
    def get_manual_jobs(self):
        return st.session_state.manual_jobs
    
    def add_manual_job(self, url):
        st.session_state.manual_jobs.append({
            'company': "ìˆ˜ë™ ì¶”ê°€",
            'company_logo': "https://via.placeholder.com/50",
            'title': "ìˆ˜ë™ ì¶”ê°€ëœ ì±„ìš©ê³µê³ ",
            'description': url,
            'link': url,
            'career': "ê²½ë ¥ë¬´ê´€",
            'deadline': "ìƒì‹œì±„ìš©",
            'added_at': datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        })
    
    def update_notification_settings(self, times, frequency):
        st.session_state.notification_settings = {
            'times': times,
            'frequency': frequency
        }
    
    def update_keywords(self, keywords):
        st.session_state.keywords = keywords
    
    def update_receivers(self, new_data):
        write_receivers(new_data)

    def _convert_to_24h_format(self, time_str):
        """ì‹œê°„ì„ 24ì‹œê°„ í˜•ì‹ìœ¼ë¡œ ë³€í™˜"""
        if "ì˜¤ì „" in time_str:
            time = time_str.replace("ì˜¤ì „ ", "")
            hour, minute = map(int, time.split(":"))
            if hour == 12:
                hour = 0
        else:  # ì˜¤í›„
            time = time_str.replace("ì˜¤í›„ ", "")
            hour, minute = map(int, time.split(":"))
            if hour != 12:
                hour += 12
        return f"{hour:02d}:{minute:02d}"

    def update_notification_settings(self, times, frequency):
        # ì‹œê°„ì„ 24ì‹œê°„ í˜•ì‹ìœ¼ë¡œ ë³€í™˜
        converted_times = [self._convert_to_24h_format(time) for time in times]
        st.session_state.notification_settings = {
            'times': converted_times,
            'frequency': frequency
        }

ê·¸ëŸ¼ ì—¬ê¸°ì„œ ì„¸ì…˜ì¸ê±° ë‹¤ ë°” ì €ì¥í•˜ê²Œ í•´ì¤˜
ChatGPTì˜ ë§:
ì¢‹ì•„ ì–¸ë‹ˆ!
ì§€ê¸ˆ UserSettings í´ë˜ìŠ¤ì—ì„œ ëª¨ë“  ì„¤ì •ê°’ì„ ì„¸ì…˜(st.session_state)ì—ë§Œ ì €ì¥í•˜ê³  ìˆëŠ”ë°,
ì´ê±¸ Google Sheetsì— ì €ì¥ë˜ë„ë¡ ì „í™˜í•´ì¤„ê²Œ.
(ìˆ˜ì‹ ì, í‚¤ì›Œë“œ, ì•Œë¦¼ ì„¤ì • ì „ë¶€ ì €ì¥ â†’ ì„¸ì…˜ì€ ìºì‹± ìš©ë„ë¡œë§Œ í™œìš©)

âœ… ì €ì¥ ëŒ€ìƒ: Google Sheets íƒ­ êµ¬ì¡°
emails: ìˆ˜ì‹ ì ì´ë©”ì¼ ëª©ë¡

keywords: í‚¤ì›Œë“œ ëª©ë¡

notification: ì•Œë¦¼ ì‹œê°„/íšŸìˆ˜

(ì´ë©”ì¼ ë¡œê·¸ì¸ ì •ë³´ëŠ” secretsì—ì„œë§Œ ìœ ì§€)

âœ… ì—…ë°ì´íŠ¸ëœ user_settings.py (Google Sheets ì—°ë™ ë²„ì „)
import streamlit as st
from datetime import datetime
from google_sheets_helper import (
    read_receivers, write_receivers,
    read_keywords, write_keywords,
    read_notification_settings, write_notification_settings
)

class UserSettings:
    def __init__(self):
        # ì´ë©”ì¼ ë¡œê·¸ì¸ ì •ë³´ (secretsì—ì„œë§Œ ìœ ì§€)
        if 'email_settings' not in st.session_state:
            try:
                st.session_state.email_settings = {
                    'sender_email': st.secrets["SENDER_EMAIL"],
                    'sender_password': st.secrets["SENDER_PASSWORD"],
                }
            except Exception as e:
                st.warning("ì´ë©”ì¼ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. Streamlit Secretsì— SENDER_EMAIL, SENDER_PASSWORDë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.")
                st.session_state.email_settings = {
                    'sender_email': "",
                    'sender_password': "",
                }

        # ìˆ˜ì‹ ì ì´ˆê¸°í™”
        if 'receivers' not in st.session_state:
            st.session_state.receivers = read_receivers()

        # í‚¤ì›Œë“œ ì´ˆê¸°í™”
        if 'keywords' not in st.session_state:
            st.session_state.keywords = read_keywords()

        # ì•Œë¦¼ ì„¤ì • ì´ˆê¸°í™”
        if 'notification_settings' not in st.session_state:
            st.session_state.notification_settings = read_notification_settings()

        # ìˆ˜ë™ ì±„ìš©ê³µê³ ëŠ” ë¡œì»¬ ìƒíƒœì—ë§Œ ì €ì¥
        if 'manual_jobs' not in st.session_state:
            st.session_state.manual_jobs = []

    def get_email_settings(self):
        return st.session_state.email_settings

    def get_notification_settings(self):
        return st.session_state.notification_settings

    def get_keywords(self):
        return st.session_state.keywords

    def get_receivers(self):
        return st.session_state.receivers

    def get_manual_jobs(self):
        return st.session_state.manual_jobs

    def add_manual_job(self, url):
        st.session_state.manual_jobs.append({
            'company': "ìˆ˜ë™ ì¶”ê°€",
            'company_logo': "https://via.placeholder.com/50",
            'title': "ìˆ˜ë™ ì¶”ê°€ëœ ì±„ìš©ê³µê³ ",
            'description': url,
            'link': url,
            'career': "ê²½ë ¥ë¬´ê´€",
            'deadline': "ìƒì‹œì±„ìš©",
            'added_at': datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        })

    def update_notification_settings(self, times, frequency):
        converted_times = [self._convert_to_24h_format(t) for t in times]
        updated = {
            'times': converted_times,
            'frequency': frequency
        }
        st.session_state.notification_settings = updated
        write_notification_settings(updated)

    def update_keywords(self, keywords):
        cleaned = [k.strip() for k in keywords if k.strip()]
        st.session_state.keywords = cleaned
        write_keywords(cleaned)

    def update_receivers(self, receivers):
        st.session_state.receivers = receivers
        write_receivers(receivers)

    def _convert_to_24h_format(self, time_str):
        """ì‹œê°„ì„ 24ì‹œê°„ í˜•ì‹ìœ¼ë¡œ ë³€í™˜"""
        if "ì˜¤ì „" in time_str:
            time = time_str.replace("ì˜¤ì „ ", "")
            hour, minute = map(int, time.split(":"))
            if hour == 12:
                hour = 0
        else:  # ì˜¤í›„
            time = time_str.replace("ì˜¤í›„ ", "")
            hour, minute = map(int, time.split(":"))
            if hour != 12:
                hour += 12
        return f"{hour:02d}:{minute:02d}"
ğŸ”§ google_sheets_helper.pyì—ëŠ” ë‹¤ìŒ í•¨ìˆ˜ë“¤ í•„ìš”
def read_keywords():
    sheet = connect_to_gsheet("job-alert-settings")
    ws = sheet.worksheet("keywords")
    return [row[0] for row in ws.get_all_values()[1:]]

def write_keywords(keywords):
    sheet = connect_to_gsheet("job-alert-settings")
    ws = sheet.worksheet("keywords")
    ws.clear()
    ws.append_row(["í‚¤ì›Œë“œ"])
    for k in keywords:
        ws.append_row([k])

def read_notification_settings():
    sheet = connect_to_gsheet("job-alert-settings")
    ws = sheet.worksheet("notification")
    values = ws.get_all_values()[1:]
    times = [v[0] for v in values]
    frequency = values[0][1] if values else "í•˜ë£¨ 1íšŒ"
    return {"times": times, "frequency": frequency}

def write_notification_settings(data):
    sheet = connect_to_gsheet("job-alert-settings")
    ws = sheet.worksheet("notification")
    ws.clear()
    ws.append_row(["ì‹œê°„", "ë¹ˆë„"])
    for time in data["times"]:
        ws.append_row([time, data["frequency"]])
ì–¸ë‹ˆê°€ ì´ê±¸ë¡œ .py íŒŒì¼ ë‚˜ëˆ ì„œ zip í˜•ì‹ì´ë‚˜ GitHub-ready ìƒíƒœë¡œë„ ë°›ì„ ìˆ˜ ìˆì–´.
í•„ìš”í•˜ë©´ ë°”ë¡œ ì •ë¦¬í•´ì¤„ê²Œ.
ì´ì œ google_sheets_helper.py ì™„ì„± ë²„ì „ ì¤„ê¹Œ? ì•„ë‹ˆë©´ ì´ê±¸ ë¨¼ì € ë¶™ì—¬ë³¼ë˜?

ë‚˜ì˜ ë§:
í–‡ì–´
File "/home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 535, in _run_script
    exec(code, module.__dict__)
File "/mount/src/job-alert-app/app.py", line 8, in <module>
    from user_settings import UserSettings
File "/mount/src/job-alert-app/user_settings.py", line 3, in <module>
    from google_sheets_helper import (
File "/mount/src/job-alert-app/google_sheets_helper.py", line 1, in <module>
    import gspread
ChatGPTì˜ ë§:
ì–¸ë‹ˆ, ì´ ì—ëŸ¬ëŠ” ì•„ì£¼ ê°„ë‹¨íˆ í•´ê²°ë¼! ğŸ‘‡

â—ï¸ì—ëŸ¬ ì›ì¸
ModuleNotFoundError: No module named 'gspread'
â†’ gspreadë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ Streamlitì´ ì‹¤í–‰ ì¤‘ì¸ í™˜ê²½ì— ì„¤ì¹˜í•˜ì§€ ì•Šì•„ì„œ ìƒê¸´ ê±°ì•¼.

âœ… í•´ê²° ë°©ë²•
Streamlit Cloudì— ë°°í¬ ì¤‘ì´ë¼ë©´, requirements.txtì— ë‹¤ìŒ ë‘ ì¤„ì„ ê¼­ ë„£ì–´ì¤˜ì•¼ í•´:

gspread==5.12.0
oauth2client==4.1.3
ğŸ“„ requirements.txt ì „ì²´ ì˜ˆì‹œëŠ” ì´ë ‡ê²Œ:

streamlit==1.31.1
schedule==1.2.1
beautifulsoup4==4.12.2
requests==2.31.0
selenium==4.18.1
webdriver-manager==4.0.1
python-dotenv==1.0.1
yagmail==0.15.293
gspread==5.12.0
oauth2client==4.1.3
ğŸ” ì´í›„ ìˆœì„œ
ìœ„ ë‚´ìš©ì„ requirements.txtì— ì €ì¥í•˜ê³ 

GitHubì— ì»¤ë°‹ + push

Streamlit Cloudê°€ ìë™ìœ¼ë¡œ ë‹¤ì‹œ ë°°í¬ ì‹œì‘í•´

â†’ 1~2ë¶„ ì•ˆì— í•´ê²°ë¨! â±

ì°¸ê³ : gspreadëŠ” êµ¬ê¸€ ì‹œíŠ¸ë¥¼ ì½ê³  ì“°ê¸° ìœ„í•œ í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ê³ ,
oauth2clientëŠ” êµ¬ê¸€ API ë¡œê·¸ì¸ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬ì•¼.

í•„ìš”í•˜ë©´ ë‚´ê°€ requirements.txtë¥¼ ì „ì²´ì ìœ¼ë¡œ ì •ë¦¬í•´ì„œ ë‹¤ì‹œ ì¤„ ìˆ˜ë„ ìˆì–´.
ì–¸ë‹ˆ pushí•˜ë©´ ì•Œë ¤ì¤˜! ë°”ë¡œ ë‹¤ìŒ ë‹¨ê³„ ê°™ì´ ê°ˆê²Œ. ğŸ˜Š

ë‚˜ì˜ ë§:
# ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ UI í”„ë ˆì„ì›Œí¬ - ëŒ€ì‹œë³´ë“œ êµ¬í˜„ì— ì‚¬ìš©
streamlit==1.31.1

# ì›¹ ë¸Œë¼ìš°ì € ìë™í™” ë„êµ¬ - ë™ì  ì›¹í˜ì´ì§€(ì±„ìš©ê³µê³ ) í¬ë¡¤ë§ì— ì‚¬ìš©
selenium==4.18.1

# Selenium WebDriver ìë™ ê´€ë¦¬ ë„êµ¬ - ë¸Œë¼ìš°ì € ë“œë¼ì´ë²„ ì„¤ì¹˜/ì—…ë°ì´íŠ¸ ìë™í™”
webdriver-manager==4.0.1

# ì‘ì—… ìŠ¤ì¼€ì¤„ë§ ë¼ì´ë¸ŒëŸ¬ë¦¬ - ì •í•´ì§„ ì‹œê°„ì— ì±„ìš©ê³µê³  ê²€ìƒ‰ ë° ì´ë©”ì¼ ë°œì†¡
schedule==1.2.1

# í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬ ë„êµ¬ - ì´ë©”ì¼ ê³„ì • ë“± ë¯¼ê°í•œ ì •ë³´ ê´€ë¦¬
python-dotenv==1.0.1

# HTML íŒŒì‹± ë¼ì´ë¸ŒëŸ¬ë¦¬ - ì›¹í˜ì´ì§€ ë‚´ìš© ì¶”ì¶œì— ì‚¬ìš©
beautifulsoup4==4.12.2

# HTTP í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ - ì›¹ ìš”ì²­ ì²˜ë¦¬ì— ì‚¬ìš©
requests==2.31.0

# Chrome ë“œë¼ì´ë²„ ìë™ ì„¤ì¹˜
chromedriver-autoinstaller==0.6.3

gspread==5.12.0
oauth2client==4.1.3

ì´ë ‡ê²Œ ì£¼ì„ì„ ë‹¬ì•„ë†”ì„œ ì£¼ì„ì¢€ í•´ì¤˜
ChatGPTì˜ ë§:
ì¢‹ì•„ ì–¸ë‹ˆ! ì•„ë˜ëŠ” ì–¸ë‹ˆê°€ ì£¼ì‹  requirements.txtì— ê¹”ë”í•˜ê²Œ ì •ë¦¬í•œ ì£¼ì„ ë²„ì „ì´ì•¼.
ê° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜†ì— ê¸°ëŠ¥ ì„¤ëª…ì„ ì •ëˆí•´ì„œ ì£¼ì„ìœ¼ë¡œ ë„£ì—ˆì–´. Streamlit Cloudì—ì„œë„ ë¬¸ì œ ì—†ì´ ì‘ë™í•´.

ğŸ“„ requirements.txt (ì£¼ì„ í¬í•¨)
# ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ UI í”„ë ˆì„ì›Œí¬ - ëŒ€ì‹œë³´ë“œ êµ¬í˜„
streamlit==1.31.1

# ë™ì  ì›¹í˜ì´ì§€ í¬ë¡¤ë§ìš© ë¸Œë¼ìš°ì € ìë™í™” ë„êµ¬
selenium==4.18.1

# WebDriver ìë™ ì„¤ì¹˜ ë° ê´€ë¦¬ (Seleniumìš©)
webdriver-manager==4.0.1

# ì£¼ê¸°ì  ì‘ì—… ì˜ˆì•½ ì‹¤í–‰ (ì˜ˆ: í•˜ë£¨ 2íšŒ ì•Œë¦¼)
schedule==1.2.1

# í™˜ê²½ë³€ìˆ˜(.env) ê´€ë¦¬ ë„êµ¬ - ê°œë°œí™˜ê²½ ì„¤ì •ìš©
python-dotenv==1.0.1

# HTML íŒŒì‹± ë„êµ¬ - ì±„ìš©ê³µê³  ë‚´ìš© ì¶”ì¶œ
beautifulsoup4==4.12.2

# HTTP ìš”ì²­ ë¼ì´ë¸ŒëŸ¬ë¦¬ - ì›¹ í¬ë¡¤ë§ ì‹œ ì‚¬ìš©
requests==2.31.0

# Chrome ë“œë¼ì´ë²„ ìë™ ì„¤ì¹˜ (Seleniumìš©)
chromedriver-autoinstaller==0.6.3

# Google Sheets ì—°ë™ - ì‹œíŠ¸ ì½ê¸°/ì“°ê¸° ê¸°ëŠ¥
gspread==5.12.0

# Google ì¸ì¦ìš© OAuth 2.0 í´ë¼ì´ì–¸íŠ¸
oauth2client==4.1.3
ì´ íŒŒì¼ì„ ê·¸ëŒ€ë¡œ requirements.txtì— ì €ì¥í•˜ê³  pushí•˜ë©´,
Streamlit Cloudê°€ í•„ìš”í•œ ëª¨ë“  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ìë™ìœ¼ë¡œ ì„¤ì¹˜í•´ì¤˜.

í•„ìš”í•˜ë©´ yagmailë„ ì¶”ê°€í•´ì¤„ ìˆ˜ ìˆì–´ (ì´ë©”ì¼ ì „ì†¡ ê¸°ëŠ¥ í¬í•¨).
ì¶”ê°€í•˜ê³  ì‹¶ìœ¼ë©´ ë§í•´ì¤˜:

â€œë©”ì¼ë„ ì“¸ ê±°ì•¼, yagmail ì¶”ê°€í•´ì¤˜â€
ë¼ê³  ë§í•˜ë©´ ë°”ë¡œ ì¶”ê°€í•´ì„œ ì¤„ê²Œ! ğŸ˜Š

ë‚˜ì˜ ë§:
yagmail í•´ì¤˜
ChatGPTì˜ ë§:
ì™„ì „ ì¢‹ì•„ ì–¸ë‹ˆ!
ì´ì œ ì´ë©”ì¼ ë°œì†¡ ê¸°ëŠ¥ê¹Œì§€ ì“¸ ê±°ë‹ˆê¹Œ yagmailì„ ì¶”ê°€í•´ì¤„ê²Œ. ì•„ë˜ëŠ” **ìµœì¢… ë²„ì „ requirements.txt**ì´ì•¼, ì£¼ì„ í¬í•¨ìœ¼ë¡œ ê¹”ë”í•˜ê²Œ ì •ë¦¬í–ˆì–´.

ğŸ“„ ìµœì¢… requirements.txt (ğŸ“¬ yagmail í¬í•¨)
# ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ UI í”„ë ˆì„ì›Œí¬ - ëŒ€ì‹œë³´ë“œ êµ¬í˜„
streamlit==1.31.1

# ë™ì  ì›¹í˜ì´ì§€ í¬ë¡¤ë§ìš© ë¸Œë¼ìš°ì € ìë™í™” ë„êµ¬
selenium==4.18.1

# WebDriver ìë™ ì„¤ì¹˜ ë° ê´€ë¦¬ (Seleniumìš©)
webdriver-manager==4.0.1

# ì£¼ê¸°ì  ì‘ì—… ì˜ˆì•½ ì‹¤í–‰ (ì˜ˆ: í•˜ë£¨ 2íšŒ ì•Œë¦¼)
schedule==1.2.1

# í™˜ê²½ë³€ìˆ˜(.env) ê´€ë¦¬ ë„êµ¬ - ê°œë°œí™˜ê²½ ì„¤ì •ìš©
python-dotenv==1.0.1

# HTML íŒŒì‹± ë„êµ¬ - ì±„ìš©ê³µê³  ë‚´ìš© ì¶”ì¶œ
beautifulsoup4==4.12.2

# HTTP ìš”ì²­ ë¼ì´ë¸ŒëŸ¬ë¦¬ - ì›¹ í¬ë¡¤ë§ ì‹œ ì‚¬ìš©
requests==2.31.0

# Chrome ë“œë¼ì´ë²„ ìë™ ì„¤ì¹˜ (Seleniumìš©)
chromedriver-autoinstaller==0.6.3

# Google Sheets ì—°ë™ - ì‹œíŠ¸ ì½ê¸°/ì“°ê¸° ê¸°ëŠ¥
gspread==5.12.0

# Google ì¸ì¦ìš© OAuth 2.0 í´ë¼ì´ì–¸íŠ¸
oauth2client==4.1.3

# ì´ë©”ì¼ ë°œì†¡ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬ (Gmail ê¸°ë°˜ SMTP)
yagmail==0.15.293
ì´ì œ ì´ íŒŒì¼ì„ requirements.txtë¡œ ì €ì¥í•˜ê³  GitHubì— pushí•˜ë©´
Streamlit Cloudê°€ ëª¨ë“  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ìë™ ì„¤ì¹˜í•´! ğŸ“¦

ë‹¤ìŒì€ ì–´ë–¤ ê±° í•´ë³¼ê¹Œ?

ğŸ“¬ ì´ë©”ì¼ ì „ì†¡ í…ŒìŠ¤íŠ¸?
ğŸ“Š êµ¬ê¸€ ì‹œíŠ¸ì— í‚¤ì›Œë“œ ì—°ë™?
ğŸ“… ìŠ¤ì¼€ì¤„ëŸ¬ ì„¤ì •?

ì–¸ë‹ˆê°€ ë§ë§Œ í•´! ğŸ˜

ë‚˜ì˜ ë§:
File "/home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 535, in _run_script
    exec(code, module.__dict__)
File "/mount/src/job-alert-app/app.py", line 212, in <module>
    main()
File "/mount/src/job-alert-app/app.py", line 70, in main
    user_settings = UserSettings()
                    ^^^^^^^^^^^^^^
File "/mount/src/job-alert-app/user_settings.py", line 27, in __init__
    st.session_state.receivers = read_receivers()
                                 ^^^^^^^^^^^^^^^^
File "/mount/src/job-alert-app/google_sheets_helper.py", line 16, in read_receivers
    sheet = connect_to_gsheet("job-alert-settings")
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
File "/mount/src/job-alert-app/google_sheets_helper.py", line 12, in connect_to_gsheet
    sheet = client.open(sheet_name)
            ^^^^^^^^^^^^^^^^^^^^^^^
File "/home/adminuser/venv/lib/python3.12/site-packages/gspread/client.py", line 183, in open
    spreadsheet_files, response = self._list_spreadsheet_files(title, folder_id)
                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
File "/home/adminuser/venv/lib/python3.12/site-packages/gspread/client.py", line 156, in _list_spreadsheet_files
    response = self.request("get", url, params=params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
File "/home/adminuser/venv/lib/python3.12/site-packages/gspread/client.py", line 93, in request
    raise APIError(response)
2025-04-19 10:26:15.528 503 GET /script-health-check (127.0.0.1) 209.43ms

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  /home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/scriptru  

  nner/script_runner.py:535 in _run_script                                      

                                                                                

  /mount/src/job-alert-app/app.py:212 in <module>                               

                                                                                

    209 â”‚   â”‚   â”‚   scheduler.restart()                                         

    210                                                                         

    211 if __name__ == "__main__":                                              

  â± 212 â”‚   main()                                                              

    213                                                                         

                                                                                

  /mount/src/job-alert-app/app.py:70 in main                                    

                                                                                

     67                                                                         

     68 def main():                                                             

     69 â”‚   # ì´ˆê¸°í™”                                                            

  â±  70 â”‚   user_settings = UserSettings()                                      

     71 â”‚   job_fetcher = JobFetcher()                                          

     72 â”‚   email_sender = EmailSender()                                        

     73 â”‚   scheduler = JobScheduler(job_fetcher, email_sender, user_settings)  

                                                                                

  /mount/src/job-alert-app/user_settings.py:27 in __init__                      

                                                                                

    24 â”‚   â”‚                                                                    

    25 â”‚   â”‚   # ìˆ˜ì‹ ì ì´ˆê¸°í™”                                                  

    26 â”‚   â”‚   if 'receivers' not in st.session_state:                          

  â± 27 â”‚   â”‚   â”‚   st.session_state.receivers = read_receivers()                

    28 â”‚   â”‚                                                                    

    29 â”‚   â”‚   # í‚¤ì›Œë“œ ì´ˆê¸°í™”                                                  

    30 â”‚   â”‚   if 'keywords' not in st.session_state:                           

                                                                                

  /mount/src/job-alert-app/google_sheets_helper.py:16 in read_receivers         

                                                                                

    13 â”‚   return sheet                                                         

    14                                                                          

    15 def read_receivers():                                                    

  â± 16 â”‚   sheet = connect_to_gsheet("job-alert-settings")                      

    17 â”‚   worksheet = sheet.worksheet("emails")                                

    18 â”‚   data = worksheet.get_all_records()                                   

    19 â”‚   return data                                                          

                                                                                

  /mount/src/job-alert-app/google_sheets_helper.py:12 in connect_to_gsheet      

                                                                                

     9 â”‚   â”‚   scope                                                            

    10 â”‚   )                                                                    

    11 â”‚   client = gspread.authorize(creds)                                    

  â± 12 â”‚   sheet = client.open(sheet_name)                                      

    13 â”‚   return sheet                                                         

    14                                                                          

    15 def read_receivers():                                                    

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/gspread/client.py:183 in    

  open                                                                          

                                                                                

    180 â”‚   â”‚                                                                   

    181 â”‚   â”‚   >>> gc.open('My fancy spreadsheet')                             

    182 â”‚   â”‚   """                                                             

  â± 183 â”‚   â”‚   spreadsheet_files, response = self._list_spreadsheet_files(tit  

    184 â”‚   â”‚   try:                                                            

    185 â”‚   â”‚   â”‚   properties = finditem(                                      

    186 â”‚   â”‚   â”‚   â”‚   lambda x: x["name"] == title,                           

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/gspread/client.py:156 in    

  _list_spreadsheet_files                                                       

                                                                                

    153 â”‚   â”‚   â”‚   if page_token:                                              

    154 â”‚   â”‚   â”‚   â”‚   params["pageToken"] = page_token                        

    155 â”‚   â”‚   â”‚                                                               

  â± 156 â”‚   â”‚   â”‚   response = self.request("get", url, params=params)          

    157 â”‚   â”‚   â”‚   response_json = response.json()                             

    158 â”‚   â”‚   â”‚   files.extend(response_json["files"])                        

    159                                                                         

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/gspread/client.py:93 in     

  request                                                                       

                                                                                

     90 â”‚   â”‚   if response.ok:                                                 

     91 â”‚   â”‚   â”‚   return response                                             

     92 â”‚   â”‚   else:                                                           

  â±  93 â”‚   â”‚   â”‚   raise APIError(response)                                    

     94 â”‚                                                                       

     95 â”‚   def get_file_drive_metadata(self, id):                              

     96 â”‚   â”‚   """Get the metadata from the Drive API for a specific file      

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

APIError: {'code': 403, 'message': 'Google Drive API has not been used in 

project 803159702695 before or it is disabled. Enable it by visiting 

https://console.developers.google.com/apis/api/drive.googleapis.com/overview?pro

ject=803159702695 then retry. If you enabled this API recently, wait a few 

minutes for the action to propagate to our systems and retry.', 'errors': 

[{'message': 'Google Drive API has not been used in project 803159702695 before 

or it is disabled. Enable it by visiting 

https://console.developers.google.com/apis/api/drive.googleapis.com/overview?pro

ject=803159702695 then retry. If you enabled this API recently, wait a few 

minutes for the action to propagate to our systems and retry.', 'domain': 

'usageLimits', 'reason': 'accessNotConfigured', 'extendedHelp': 

'https://console.developers.google.com'}], 'status': 'PERMISSION_DENIED', 

'details': [{'@type': 'type.googleapis.com/google.rpc.ErrorInfo', 'reason': 

'SERVICE_DISABLED', 'domain': 'googleapis.com', 'metadata': {'activationUrl': 

'https://console.developers.google.com/apis/api/drive.googleapis.com/overview?pr

oject=803159702695', 'service': 'drive.googleapis.com', 'consumer': 

'projects/803159702695', 'serviceTitle': 'Google Drive API', 'containerInfo': 

'803159702695'}}, {'@type': 'type.googleapis.com/google.rpc.LocalizedMessage', 

'locale': 'en-US', 'message': 'Google Drive API has not been used in project 

803159702695 before or it is disabled. Enable it by visiting 

https://console.developers.google.com/apis/api/drive.googleapis.com/overview?pro

ject=803159702695 then retry. If you enabled this API recently, wait a few 

minutes for the action to propagate to our systems and retry.'}, {'@type': 

'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Google 

developers console API activation', 'url': 

'https://console.developers.google.com/apis/api/drive.googleapis.com/overview?pr

oject=803159702695'}]}]}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  /home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/scriptru  

  nner/script_runner.py:535 in _run_script                                      

                                                                                

  /mount/src/job-alert-app/app.py:212 in <module>                               

                                                                                

    209 â”‚   â”‚   â”‚   scheduler.restart()                                         

    210                                                                         

    211 if __name__ == "__main__":                                              

  â± 212 â”‚   main()                                                              

    213                                                                         

                                                                                

  /mount/src/job-alert-app/app.py:70 in main                                    

                                                                                

     67                                                                         

     68 def main():                                                             

     69 â”‚   # ì´ˆê¸°í™”                                                            

  â±  70 â”‚   user_settings = UserSettings()                                      

     71 â”‚   job_fetcher = JobFetcher()                                          

     72 â”‚   email_sender = EmailSender()                                        

     73 â”‚   scheduler = JobScheduler(job_fetcher, email_sender, user_settings)  

                                                                                

  /mount/src/job-alert-app/user_settings.py:27 in __init__                      

                                                                                

    24 â”‚   â”‚                                                                    

    25 â”‚   â”‚   # ìˆ˜ì‹ ì ì´ˆê¸°í™”                                                  

    26 â”‚   â”‚   if 'receivers' not in st.session_state:                          

  â± 27 â”‚   â”‚   â”‚   st.session_state.receivers = read_receivers()                

    28 â”‚   â”‚                                                                    

    29 â”‚   â”‚   # í‚¤ì›Œë“œ ì´ˆê¸°í™”                                                  

    30 â”‚   â”‚   if 'keywords' not in st.session_state:                           

                                                                                

  /mount/src/job-alert-app/google_sheets_helper.py:16 in read_receivers         

                                                                                

    13 â”‚   return sheet                                                         

    14                                                                          

    15 def read_receivers():                                                    

  â± 16 â”‚   sheet = connect_to_gsheet("job-alert-settings")                      

    17 â”‚   worksheet = sheet.worksheet("emails")                                

    18 â”‚   data = worksheet.get_all_records()                                   

    19 â”‚   return data                                                          

                                                                                

  /mount/src/job-alert-app/google_sheets_helper.py:12 in connect_to_gsheet      

                                                                                

     9 â”‚   â”‚   scope                                                            

    10 â”‚   )                                                                    

    11 â”‚   client = gspread.authorize(creds)                                    

  â± 12 â”‚   sheet = client.open(sheet_name)                                      

    13 â”‚   return sheet                                                         

    14                                                                          

    15 def read_receivers():                                                    

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/gspread/client.py:183 in    

  open                                                                          

                                                                                

    180 â”‚   â”‚                                                                   

    181 â”‚   â”‚   >>> gc.open('My fancy spreadsheet')                             

    182 â”‚   â”‚   """                                                             

  â± 183 â”‚   â”‚   spreadsheet_files, response = self._list_spreadsheet_files(tit  

    184 â”‚   â”‚   try:                                                            

    185 â”‚   â”‚   â”‚   properties = finditem(                                      

    186 â”‚   â”‚   â”‚   â”‚   lambda x: x["name"] == title,                           

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/gspread/client.py:156 in    

  _list_spreadsheet_files                                                       

                                                                                

    153 â”‚   â”‚   â”‚   if page_token:                                              

    154 â”‚   â”‚   â”‚   â”‚   params["pageToken"] = page_token                        

    155 â”‚   â”‚   â”‚                                                               

  â± 156 â”‚   â”‚   â”‚   response = self.request("get", url, params=params)          

    157 â”‚   â”‚   â”‚   response_json = response.json()                             

    158 â”‚   â”‚   â”‚   files.extend(response_json["files"])                        

    159                                                                         

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/gspread/client.py:93 in     

  request                                                                       

                                                                                

     90 â”‚   â”‚   if response.ok:                                                 

     91 â”‚   â”‚   â”‚   return response                                             

     92 â”‚   â”‚   else:                                                           

  â±  93 â”‚   â”‚   â”‚   raise APIError(response)                                    

     94 â”‚                                                                       

     95 â”‚   def get_file_drive_metadata(self, id):                              

     96 â”‚   â”‚   """Get the metadata from the Drive API for a specific file      

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

APIError: {'code': 403, 'message': 'Google Drive API has not been used in 

project 803159702695 before or it is disabled. Enable it by visiting 

https://console.developers.google.com/apis/api/drive.googleapis.com/overview?pro

ject=803159702695 then retry. If you enabled this API recently, wait a few 

minutes for the action to propagate to our systems and retry.', 'errors': 

[{'message': 'Google Drive API has not been used in project 803159702695 before 

or it is disabled. Enable it by visiting 

https://console.developers.google.com/apis/api/drive.googleapis.com/overview?pro

ject=803159702695 then retry. If you enabled this API recently, wait a few 

minutes for the action to propagate to our systems and retry.', 'domain': 

'usageLimits', 'reason': 'accessNotConfigured', 'extendedHelp': 

'https://console.developers.google.com'}], 'status': 'PERMISSION_DENIED', 

'details': [{'@type': 'type.googleapis.com/google.rpc.ErrorInfo', 'reason': 

'SERVICE_DISABLED', 'domain': 'googleapis.com', 'metadata': {'serviceTitle': 

'Google Drive API', 'service': 'drive.googleapis.com', 'consumer': 

'projects/803159702695', 'activationUrl': 

'https://console.developers.google.com/apis/api/drive.googleapis.com/overview?pr

oject=803159702695', 'containerInfo': '803159702695'}}, {'@type': 

'type.googleapis.com/google.rpc.LocalizedMessage', 'locale': 'en-US', 'message':

'Google Drive API has not been used in project 803159702695 before or it is 

disabled. Enable it by visiting 

https://console.developers.google.com/apis/api/drive.googleapis.com/overview?pro

ject=803159702695 then retry. If you enabled this API recently, wait a few 

minutes for the action to propagate to our systems and retry.'}, {'@type': 

'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Google 

developers console API activation', 'url': 

'https://console.developers.google.com/apis/api/drive.googleapis.com/overview?pr

oject=803159702695'}]}]}

2025-04-19 10:26:20.881 503 GET /script-health-check (127.0.0.1) 489.47ms

main
neemokim/job-alert-app/main/app.py


ChatGPTì˜ ë§:
ì¢‹ì•„ ì–¸ë‹ˆ, ì´ ì—ëŸ¬ëŠ” ì•„ì£¼ ëª…í™•í•´.
ì§€ê¸ˆ Streamlit ì•±ì´ Google Sheetsì— ì ‘ê·¼í•˜ë ¤ê³  í•˜ëŠ”ë°,
âœ… Google Drive APIê°€ ì•„ì§ í”„ë¡œì íŠ¸ì—ì„œ í™œì„±í™”ë˜ì§€ ì•Šì•„ì„œ 403 ì˜¤ë¥˜ê°€ ëœ¨ëŠ” ê±°ì•¼.

â—ï¸ì—ëŸ¬ ìš”ì•½
APIError: Google Drive API has not been used in project [803159702695] before or it is disabled.
âœ… í•´ê²° ë°©ë²•: Google Drive API í™œì„±í™”
â‘  ì•„ë˜ ë§í¬ í´ë¦­í•´ì„œ í”„ë¡œì íŠ¸ë¡œ ì´ë™
ğŸ‘‰ ì—¬ê¸° ëˆŒëŸ¬ì„œ Google Drive API í™œì„±í™”í•˜ê¸°

â‘¡ "ì‚¬ìš©" ë˜ëŠ” "ENABLE" ë²„íŠ¼ í´ë¦­
í•´ë‹¹ í”„ë¡œì íŠ¸ì—ì„œ ì²˜ìŒìœ¼ë¡œ Google Sheetsë¥¼ ì‚¬ìš©í•  ê²½ìš°,
Sheets APIë¿ ì•„ë‹ˆë¼ Google Drive APIë„ í•¨ê»˜ í™œì„±í™”ë¼ ìˆì–´ì•¼ í•´.

Sheets API: ì‹œíŠ¸ë¥¼ ì—´ê³  ì½ê³  ì“°ëŠ” ê¸°ëŠ¥

Drive API: ì‹œíŠ¸ë¥¼ â€œíŒŒì¼â€ë¡œ ì°¾ê³  ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ê¶Œí•œ

gspreadëŠ” Drive APIë¥¼ í†µí•´ ì‹œíŠ¸ë¥¼ ì°¾ê¸° ë•Œë¬¸ì— í•„ìˆ˜ì•¼.

â± ì¶”ê°€ íŒ
APIë¥¼ í™œì„±í™”í•œ ì§í›„ì—ëŠ” ì ìš©ê¹Œì§€ 1~2ë¶„ ë”œë ˆì´ê°€ ìˆì„ ìˆ˜ ìˆì–´.

1~2ë¶„ í›„ ì•±ì„ ìƒˆë¡œê³ ì¹¨í•˜ê±°ë‚˜ ë‹¤ì‹œ ì‹¤í–‰í•´ë´!

âœ… ë‹¤ì‹œ ìš”ì•½í•˜ë©´:
ìœ„ ë§í¬ì—ì„œ ENABLE í´ë¦­ (Drive API)

1~2ë¶„ í›„ ë‹¤ì‹œ ì‹¤í–‰

ì •ìƒ ì‘ë™í•˜ë©´ ê·¸ ë‹¤ìŒì€ í‚¤ì›Œë“œ/ì•Œë¦¼ ì—°ë™ê¹Œì§€ ìì—°ìŠ¤ëŸ½ê²Œ ì—°ê²°í•  ìˆ˜ ìˆì–´!

ì–¸ë‹ˆê°€ ì„±ê³µí–ˆëŠ”ì§€ ì•Œë ¤ì¤˜!
ë°”ë¡œ ì´ì–´ì„œ í‚¤ì›Œë“œ/ì•Œë¦¼ ì„¤ì •ë„ êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™í•´ì¤„ê²Œ. ğŸ˜Š

ë‚˜ì˜ ë§:
í™œì„±í™” ë§í¬ ì£¼ì†Œë¡œ ì¤˜
ChatGPTì˜ ë§:
ì¢‹ì•„ ì–¸ë‹ˆ, ì§€ê¸ˆ ì˜¤ë¥˜ ë©”ì‹œì§€ì— ë‚˜ì˜¨ í”„ë¡œì íŠ¸ ID 803159702695 ê¸°ì¤€ìœ¼ë¡œ Google Drive APIë¥¼ í™œì„±í™”í•˜ë ¤ë©´ ì•„ë˜ ë§í¬ í´ë¦­í•˜ë©´ ë°”ë¡œ ì—´ë ¤! ğŸ‘‡

ğŸ”— Google Drive API í™œì„±í™”í•˜ê¸°

âœ… í´ë¦­ í›„ í•´ì•¼ í•  ì¼
Google ê³„ì • ë¡œê·¸ì¸ (Streamlitì—ì„œ ì—°ë™í–ˆë˜ ê³„ì •ì´ë‘ ê°™ì•„ì•¼ í•´)

ìƒë‹¨ì— ì‚¬ìš© ë˜ëŠ” ENABLE ë²„íŠ¼ ë³´ì´ë©´ í´ë¦­

ì™„ë£Œë˜ë©´ 1~2ë¶„ ê¸°ë‹¤ë¦¬ê³  Streamlit ì•± ë‹¤ì‹œ ì—´ê¸°

ì–¸ë‹ˆê°€ â€œí™œì„±í™” ì™„ë£Œí–ˆì–´â€ë¼ê³  ë§í•´ì£¼ë©´ ë‹¤ìŒ ë‹¨ê³„ë¡œ ë°”ë¡œ ì´ì–´ì¤„ê²Œ! ğŸ™Œ

ë‚˜ì˜ ë§:
ì•„ë‹ˆ ë‹ˆê»„ë¡œ ì•ˆì—´ë¦¬ë‹ˆê¹Œ ì£¼ì†Œë¡œ ì£¼ë¼ê³ 
ChatGPTì˜ ë§:
ì™„ì „ ì´í•´í–ˆì–´ ì–¸ë‹ˆ!
API í™œì„±í™”ëŠ” ì–¸ë‹ˆ ë³¸ì¸ì˜ Google Cloud í”„ë¡œì íŠ¸ì— ì§ì ‘ ì—°ê²°ëœ ë§í¬ì—¬ì•¼ í•˜ê¸° ë•Œë¬¸ì—,
ë‚´ê°€ ìƒì„±í•œ ë§í¬ë¡œëŠ” ì•ˆ ì—´ë ¤ ğŸ˜¢
ì–¸ë‹ˆê°€ ì§ì ‘ í™œì„±í™”í•´ì•¼ í•˜ëŠ” í”„ë¡œì íŠ¸ ê¸°ì¤€ìœ¼ë¡œ ì—´ë¦¬ëŠ” ì£¼ì†ŒëŠ” ì•„ë˜ì²˜ëŸ¼ ë˜ì–´ì•¼ í•´:

ğŸ§­ Google Drive API ì§ì ‘ í™œì„±í™”í•˜ëŠ” ë°©ë²•
ğŸ“ ì§ì ‘ ì ‘ì† ì£¼ì†Œ
ğŸ‘‡ ì´ ì£¼ì†Œë¥¼ í´ë¦­í•´ì„œ ë³¸ì¸ Google Cloud í”„ë¡œì íŠ¸ì—ì„œ ì—´ì–´ì¤˜:

https://console.cloud.google.com/apis/library/drive.googleapis.com
ğŸ‘‰ ì—¬ê¸° í´ë¦­í•´ì„œ ì´ë™í•˜ê¸°

âœ… í•´ì•¼ í•  ì¼
ìœ„ ë§í¬ ì ‘ì† (ë¡œê·¸ì¸ í•„ìš”)

ìƒë‹¨ì—ì„œ ë‚´ í”„ë¡œì íŠ¸ ì„ íƒ (Streamlitì—ì„œ ì„œë¹„ìŠ¤ ê³„ì • ë§Œë“  ê·¸ í”„ë¡œì íŠ¸)

Google Drive API í™”ë©´ì—ì„œ

ğŸ‘‰ ì‚¬ìš© ë˜ëŠ” ENABLE ë²„íŠ¼ í´ë¦­

â€œì‚¬ìš©â€ ë²„íŠ¼ì´ ì—†ìœ¼ë©´ ì´ë¯¸ í™œì„±í™”ëœ ìƒíƒœì•¼.

í™œì„±í™”í•˜ê³  ë‚˜ì„œ ì•± ë‹¤ì‹œ ì‹¤í–‰í•˜ë©´ ë°©ê¸ˆ ì˜¤ë¥˜ ì‚¬ë¼ì§ˆ ê±°ì•¼!
ì™„ë£Œë˜ë©´ ì•Œë ¤ì¤˜, ë°”ë¡œ ë‹¤ìŒ ë‹¨ê³„ ê°™ì´ í•´ì¤„ê²Œ ğŸ™Œ

ë‚˜ì˜ ë§:
í–‡ì–´
ChatGPTì˜ ë§:
ì˜í–ˆì–´ ì–¸ë‹ˆ! ğŸ™Œ
Google Drive API í™œì„±í™” ì™„ë£Œë©´ ë°©ê¸ˆ ì—ëŸ¬(APIError: SERVICE_DISABLED)ëŠ” í•´ê²°ëê³ ,
ì´ì œ Streamlit ì•±ì´ ì •ìƒì ìœ¼ë¡œ Google Sheetsì— ì ‘ê·¼í•  ìˆ˜ ìˆì–´.

âœ… ë‹¤ìŒ í™•ì¸ í¬ì¸íŠ¸
Streamlit ì•± ìƒˆë¡œê³ ì¹¨ or ì¬ë°°í¬ (ìµœì‹  ìƒíƒœ ë°˜ì˜)

user_settings.pyì—ì„œ:

ìˆ˜ì‹ ì ëª©ë¡ (read_receivers())

í‚¤ì›Œë“œ (read_keywords())

ì•Œë¦¼ ì‹œê°„ (read_notification_settings()) ì´ ê°’ë“¤ì´ ë¬¸ì œ ì—†ì´ ë¶ˆëŸ¬ì™€ì§€ë©´ ì„±ê³µ!

Google ì‹œíŠ¸ì—ëŠ” ì´ëŸ° íƒ­ì´ ìˆì–´ì•¼ í•´:

emails â†’ ìˆ˜ì‹ ì ëª©ë¡ (ì´ë©”ì¼ ì£¼ì†Œ, í™œì„±í™”)

keywords â†’ í‚¤ì›Œë“œ ë¦¬ìŠ¤íŠ¸ (í•œ ì—´ë¡œ)

notification â†’ ì‹œê°„/íšŸìˆ˜ ì„¤ì • (ì‹œê°„, ë¹ˆë„)

ğŸ§ª í…ŒìŠ¤íŠ¸ ìˆœì„œ ì¶”ì²œ
ìˆ˜ì‹ ì í¸ì§‘ í›„ â†’ â€œì €ì¥â€ í´ë¦­

Google Sheetì—ì„œ ê°’ì´ ë°”ë€Œì—ˆëŠ”ì§€ í™•ì¸

ìƒˆë¡œê³ ì¹¨í•´ì„œ ë‹¤ì‹œ ë¶ˆëŸ¬ì™€ì§€ëŠ”ì§€ í™•ì¸

ë‹¤ìŒì€ ë­í• ê¹Œ?

ğŸ‘‰ â€œí‚¤ì›Œë“œ/ì•Œë¦¼ë„ ì‹œíŠ¸ ì—°ë™í•´ì¤˜â€ (ì´ë¯¸ ì½”ë“œëŠ” ê±°ì˜ ë¼ ìˆìŒ)

ğŸ‘‰ â€œì´ë©”ì¼ í…ŒìŠ¤íŠ¸ í•´ë³¼ë˜â€

ğŸ‘‰ â€œìŠ¤ì¼€ì¤„ëŸ¬ ë¶™ì¼ë˜â€

ì–¸ë‹ˆê°€ ì›í•˜ëŠ” ëŒ€ë¡œ ê³ ë¥´ë©´ ë¼ ğŸ˜

ë‚˜ì˜ ë§:
File "/home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 535, in _run_script
    exec(code, module.__dict__)
File "/mount/src/job-alert-app/app.py", line 212, in <module>
    main()
File "/mount/src/job-alert-app/app.py", line 70, in main
    user_settings = UserSettings()
                    ^^^^^^^^^^^^^^
File "/mount/src/job-alert-app/user_settings.py", line 27, in __init__
    st.session_state.receivers = read_receivers()
                                 ^^^^^^^^^^^^^^^^
File "/mount/src/job-alert-app/google_sheets_helper.py", line 16, in read_receivers
    sheet = connect_to_gsheet("job-alert-settings")
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
File "/mount/src/job-alert-app/google_sheets_helper.py", line 12, in connect_to_gsheet
    sheet = client.open(sheet_name)
            ^^^^^^^^^^^^^^^^^^^^^^^
File "/home/adminuser/venv/lib/python3.12/site-packages/gspread/client.py", line 190, in open
    raise SpreadsheetNotFound(response) from ex
ChatGPTì˜ ë§:
ì¢‹ì•„ ì–¸ë‹ˆ, ì´ë²ˆ ì˜¤ë¥˜ëŠ” ì•ì„œ ê±°ë‘ ë‹¤ë¥´ê³  ì•„ì£¼ ê°„ë‹¨í•˜ê²Œ í•´ê²° ê°€ëŠ¥í•´!

â—ï¸ì˜¤ë¥˜ ìš”ì•½
SpreadsheetNotFound: spreadsheet not found
ì¦‰ ğŸ‘‰ client.open("job-alert-settings")ì—ì„œ "job-alert-settings"ë¼ëŠ” ì´ë¦„ì˜ êµ¬ê¸€ ì‹œíŠ¸ë¥¼ ì°¾ì§€ ëª»í–ˆì–´.

âœ… ì›ì¸
"job-alert-settings"ë¼ëŠ” ì´ë¦„ì˜ êµ¬ê¸€ ì‹œíŠ¸ë¥¼ ë§Œë“¤ì§€ ì•Šì•˜ê±°ë‚˜, ì´ë¦„ì´ ë‹¤ë¥´ê±°ë‚˜,
ì„œë¹„ìŠ¤ ê³„ì •ì—ê²Œ í•´ë‹¹ ì‹œíŠ¸ ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŒ.

âœ… í•´ê²° ë°©ë²• (3ë‹¨ê³„)
1ï¸âƒ£ Google Sheets ë¬¸ì„œ ë§Œë“¤ê¸°
Google Driveì—ì„œ ì‹œíŠ¸ í•˜ë‚˜ ë§Œë“¤ê¸°

ì´ë¦„ì„ ì •í™•íˆ job-alert-settings ë¡œ ì„¤ì • (ë„ì–´ì“°ê¸°/ëŒ€ì†Œë¬¸ì í¬í•¨)

2ï¸âƒ£ ì‹œíŠ¸ ë‚´ë¶€ íƒ­(worksheet) ìƒì„±
ì•„ë˜ 3ê°œì˜ íƒ­ì´ ìˆì–´ì•¼ í•´:

íƒ­ ì´ë¦„	ì²« ì¤„ (í—¤ë”)	ì„¤ëª…
emails	ì´ë©”ì¼ ì£¼ì†Œ, í™œì„±í™”	ìˆ˜ì‹ ì ë¦¬ìŠ¤íŠ¸ ì €ì¥
keywords	í‚¤ì›Œë“œ	í•„í„° í‚¤ì›Œë“œ ëª©ë¡
notification	ì‹œê°„, ë¹ˆë„	ì•Œë¦¼ ì‹œê°„ ë° íšŸìˆ˜ ì„¤ì •
ğŸ“Œ ê°ê° ì•„ë˜ì²˜ëŸ¼ ì±„ì›Œì¤˜ë„ ì¢‹ì•„:

â–¶ emails
ì´ë©”ì¼ ì£¼ì†Œ	í™œì„±í™”
test@example.com	TRUE
another@example.com	FALSE
â–¶ keywords
í‚¤ì›Œë“œ
ê¸°íš
PM
ì„œë¹„ìŠ¤ê¸°íš
â–¶ notification
ì‹œê°„	ë¹ˆë„
08:30	í•˜ë£¨ 2íšŒ
3ï¸âƒ£ í•´ë‹¹ ì‹œíŠ¸ë¥¼ ì„œë¹„ìŠ¤ ê³„ì • ì´ë©”ì¼ì— ê³µìœ 
ì„œë¹„ìŠ¤ ê³„ì •ì˜ ì´ë©”ì¼ ì£¼ì†ŒëŠ” .json íŒŒì¼ ì•ˆì— ìˆëŠ” client_emailì´ì•¼.
ì˜ˆì‹œ: streamlit-service@yourproject.iam.gserviceaccount.com

ì´ ì´ë©”ì¼ì„ ì‹œíŠ¸ ê³µìœ  ëŒ€ìƒì— ì¶”ê°€

ê¶Œí•œ: í¸ì§‘ì

ğŸ” ë‹¤ì‹œ ì‹¤í–‰
ìœ„ 3ë‹¨ê³„ ì™„ë£Œ í›„ Streamlit ì•± ìƒˆë¡œê³ ì¹¨í•˜ë©´ SpreadsheetNotFoundëŠ” ì‚¬ë¼ì ¸.

ë‹¤ í–ˆìœ¼ë©´ ë§í•´ì¤˜:

â€œì‹œíŠ¸ë‘ ê³µìœ ê¹Œì§€ ëëƒˆì–´â€
ê·¸ëŸ¼ ë°”ë¡œ ë‹¤ìŒ ìŠ¤í… ë„˜ì–´ê°€ì! ğŸ˜Š

ë‚˜ì˜ ë§:
ì‘ í–‡ëŠ”ë° ë””ê²Œ ì˜¤ë˜ ê±¸ë¦¬ë„¤;;
ChatGPTì˜ ë§:
í—‰ ì–¸ë‹ˆ ì§„ì§œ ê³ ìƒí–ˆì–´â€¦ ğŸ˜µâ€ğŸ’«
Google Cloud + Sheets ì—°ë™ì€ í•´ë†“ìœ¼ë©´ ë“ ë“ í•˜ì§€ë§Œ ì²˜ìŒ ì„¸íŒ…ì´ ì§„ì§œ ê·€ì°®ê³  ì˜¤ë˜ ê±¸ë¦¬ëŠ” ê±° ë§ì•„.
ë‚˜ë„ ì•Œê³  ìˆì–´ì„œ ë” ë””í…Œì¼í•˜ê²Œ ë„ì™€ë“œë¦¬ë ¤ê³  í–ˆë˜ ê±°ì•¼. ì˜ ë”°ë¼ì™€ì¤˜ì„œ ì§„ì§œ ë©‹ì ¸!

âœ… ì§€ê¸ˆ ìƒíƒœ ìš”ì•½
 Google Sheets ë¬¸ì„œ job-alert-settings ìƒì„±

 emails, keywords, notification íƒ­ ìƒì„± + ë°ì´í„° ì…ë ¥

 ì„œë¹„ìŠ¤ ê³„ì • ì´ë©”ì¼ì—ê²Œ ê³µìœ  ì™„ë£Œ

 API (Drive + Sheets) í™œì„±í™” ì™„ë£Œ

ğŸ‘‰ ì´ì œ Streamlit ì•±ì´ ë¬¸ì œì—†ì´ ì‹œíŠ¸ì™€ ì—°ê²°ë˜ì–´ì•¼ í•´.

â­ ë‹¤ìŒ ì¶”ì²œ ìŠ¤í…
ì•± ìƒˆë¡œê³ ì¹¨ ë˜ëŠ” ë‹¤ì‹œ ë°°í¬í•´ì„œ

ìˆ˜ì‹ ì ëª©ë¡, í‚¤ì›Œë“œ, ì•Œë¦¼ ì„¤ì •ì´ ì‹œíŠ¸ì—ì„œ ì˜ ë¶ˆëŸ¬ì™€ì§€ëŠ”ì§€ í™•ì¸í•´ë´.

ì˜ ë˜ë©´ â†’ ìˆ˜ì •í•˜ê³  ì €ì¥í•˜ë©´ ì‹œíŠ¸ì— ì—…ë°ì´íŠ¸ ë˜ëŠ”ì§€ë„ í™•ì¸!

í˜¹ì‹œ ì•„ì§ ëŠë¦¬ê±°ë‚˜ ì•ˆ ë˜ë©´?
ì²˜ìŒ ì—°ê²° í›„ ë°ì´í„° ì½ê¸°/ì“°ê¸°ì—ì„œ ì•½ê°„ ëŠë¦° í˜„ìƒì€ ìˆì„ ìˆ˜ ìˆì–´.

í•œë‘ ë²ˆë§Œ ì„±ê³µí•˜ë©´ ì´í›„ì—” í›¨ì”¬ ì•ˆì •ì ì´ì•¼.

Streamlitì´ secretsë‚˜ gspreadë¥¼ ë§¤ ì‹¤í–‰ ë•Œë§ˆë‹¤ ì¸ì¦í•´ì„œ ì‹œê°„ì´ ê±¸ë¦´ ìˆ˜ ìˆì–´.

ì–¸ë‹ˆ, ì§€ê¸ˆ ë‹¤ ì˜ ëìœ¼ë©´ ì•„ë˜ ì¤‘ì—ì„œ ë­ í•˜ê³  ì‹¶ì–´?

ğŸ‘‰ â€œì´ë©”ì¼ ë°œì†¡ ê¸°ëŠ¥ ë¶™ì¼ë˜â€

ğŸ‘‰ â€œìë™ ìŠ¤ì¼€ì¤„ëŸ¬ ì„¤ì •í• ë˜â€

ğŸ‘‰ â€œí‚¤ì›Œë“œ ê²€ìƒ‰ ê³ ë„í™”í•˜ê³  ì‹¶ì–´â€

ğŸ‘‰ â€œì „ì²´ ì½”ë“œ ì •ë¦¬í•´ì„œ ë¦¬íŒ©í„°ë§í•´ì¤˜â€

ì–¸ë‹ˆê°€ ë§ë§Œ í•´! ì§€ê¸ˆì€ ë„ˆê°€ ì£¼ì¸ê³µì´ë‹¤ ğŸ˜ğŸ’ª

ë‚˜ì˜ ë§:
[10:32:17] ğŸ Python dependencies were installed from /mount/src/job-alert-app/requirements.txt using uv.

Check if streamlit is installed

Streamlit is already installed

[10:32:18] ğŸ“¦ Processed dependencies!




â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  /home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/scriptru  

  nner/script_runner.py:535 in _run_script                                      

                                                                                

  /mount/src/job-alert-app/app.py:212 in <module>                               

                                                                                

    209 â”‚   â”‚   â”‚   scheduler.restart()                                         

    210                                                                         

    211 if __name__ == "__main__":                                              

  â± 212 â”‚   main()                                                              

    213                                                                         

                                                                                

  /mount/src/job-alert-app/app.py:70 in main                                    

                                                                                

     67                                                                         

     68 def main():                                                             

     69 â”‚   # ì´ˆê¸°í™”                                                            

  â±  70 â”‚   user_settings = UserSettings()                                      

     71 â”‚   job_fetcher = JobFetcher()                                          

     72 â”‚   email_sender = EmailSender()                                        

     73 â”‚   scheduler = JobScheduler(job_fetcher, email_sender, user_settings)  

                                                                                

  /mount/src/job-alert-app/user_settings.py:27 in __init__                      

                                                                                

    24 â”‚   â”‚                                                                    

    25 â”‚   â”‚   # ìˆ˜ì‹ ì ì´ˆê¸°í™”                                                  

    26 â”‚   â”‚   if 'receivers' not in st.session_state:                          

  â± 27 â”‚   â”‚   â”‚   st.session_state.receivers = read_receivers()                

    28 â”‚   â”‚                                                                    

    29 â”‚   â”‚   # í‚¤ì›Œë“œ ì´ˆê¸°í™”                                                  

    30 â”‚   â”‚   if 'keywords' not in st.session_state:                           

                                                                                

  /mount/src/job-alert-app/google_sheets_helper.py:18 in read_receivers         

                                                                                

    15 def read_receivers():                                                    

    16 â”‚   sheet = connect_to_gsheet("job-alert-settings")                      

    17 â”‚   worksheet = sheet.worksheet("emails")                                

  â± 18 â”‚   data = worksheet.get_all_records()                                   

    19 â”‚   return data                                                          

    20                                                                          

    21 def write_receivers(data):                                               

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/gspread/utils.py:739 in     

  wrapper                                                                       

                                                                                

    736 â”‚   â”‚   â”‚   â”‚   if v != REQUIRED_KWARGS:                                

    737 â”‚   â”‚   â”‚   â”‚   â”‚   kwargs.setdefault(k, v)                             

    738 â”‚   â”‚   â”‚                                                               

  â± 739 â”‚   â”‚   â”‚   return f(*args, **kwargs)                                   

    740 â”‚   â”‚                                                                   

    741 â”‚   â”‚   return wrapper                                                  

    742                                                                         

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/gspread/worksheet.py:568    

  in get_all_records                                                            

                                                                                

     565 â”‚   â”‚   â”‚   â”‚   returned dictionaries will contain all headers even i  

     566 â”‚   â”‚                                                                  

     567 â”‚   â”‚   """                                                            

  â±  568 â”‚   â”‚   return self.get_records(**kwargs)                              

     569 â”‚                                                                      

     570 â”‚   def get_records(  # noqa: C901 # this comment disables the comple  

     571 â”‚   â”‚   self,                                                          

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/gspread/worksheet.py:697    

  in get_records                                                                

                                                                                

     694 â”‚   â”‚   â”‚   value_render_option=value_render_option,                   

     695 â”‚   â”‚   )                                                              

     696 â”‚   â”‚                                                                  

  â±  697 â”‚   â”‚   values_len = len(values[0])                                    

     698 â”‚   â”‚   keys_len = len(keys)                                           

     699 â”‚   â”‚   values_wider_than_keys_by = values_len - keys_len              

     700 â”‚   â”‚   default_blank_in_keys = default_blank in keys                  

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

IndexError: list index out of range


File "/mount/src/job-alert-app/app.py", line 212, in <module>
    main()
File "/mount/src/job-alert-app/app.py", line 70, in main
    user_settings = UserSettings()
                    ^^^^^^^^^^^^^^
File "/mount/src/job-alert-app/user_settings.py", line 27, in __init__
    st.session_state.receivers = read_receivers()
                                 ^^^^^^^^^^^^^^^^
File "/mount/src/job-alert-app/google_sheets_helper.py", line 18, in read_receivers
    data = worksheet.get_all_records()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
File "/home/adminuser/venv/lib/python3.12/site-packages/gspread/utils.py", line 739, in wrapper
    return f(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^
File "/home/adminuser/venv/lib/python3.12/site-packages/gspread/worksheet.py", line 568, in get_all_records
    return self.get_records(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
File "/home/adminuser/venv/lib/python3.12/site-packages/gspread/worksheet.py", line 697, in get_records
    values_len = len(values[0])
                     ~~~~~~^^
ChatGPTì˜ ë§:
ì–¸ë‹ˆ ì˜í–ˆì–´! ì´ë²ˆ ì—ëŸ¬ë„ ì•„ì£¼ í”í•œ ê±°ë¼ ê¸ˆë°© í•´ê²°í•  ìˆ˜ ìˆì–´.
ì˜¤ë¥˜ ë©”ì‹œì§€ í•µì‹¬ì€ ì´ê±°ì•¼:

â—ï¸ì—ëŸ¬ ìš”ì•½
IndexError: list index out of range
â†’ values[0] â†’ ë¦¬ìŠ¤íŠ¸ê°€ ë¹„ì–´ ìˆìŒ
ì¦‰, Google Sheetsì˜ emails ì‹œíŠ¸ì— ë°ì´í„°ê°€ ì—†ê±°ë‚˜, í—¤ë”(ì²« í–‰)ê°€ ì—†ë‹¤ëŠ” ëœ»ì´ì•¼.

âœ… í•´ê²° ë°©ë²•
ğŸ‘‰ ì‹œíŠ¸ í™•ì¸: job-alert-settings â†’ emails íƒ­ì—
ë‹¤ìŒ êµ¬ì¡°ê°€ ë°˜ë“œì‹œ ë“¤ì–´ ìˆì–´ì•¼ í•´!

ì´ë©”ì¼ ì£¼ì†Œ	í™œì„±í™”
test@example.com	TRUE
â—ï¸ì¤‘ìš”: í—¤ë”(ì´ë©”ì¼ ì£¼ì†Œ, í™œì„±í™”)ê°€ ë°˜ë“œì‹œ ì²« ë²ˆì§¸ í–‰ì— ìˆì–´ì•¼ í•¨.

âœï¸ ì˜ˆì‹œë¡œ ì§ì ‘ ë¶™ì—¬ì¤˜:
ì‹œíŠ¸ ì—´ê¸°

A1: ì´ë©”ì¼ ì£¼ì†Œ

B1: í™œì„±í™”

A2 ì´í•˜: ìˆ˜ì‹ ì ì´ë©”ì¼

B2 ì´í•˜: TRUE ë˜ëŠ” FALSE

âœ… ì™„ì„± ì˜ˆ
A	B
ì´ë©”ì¼ ì£¼ì†Œ	í™œì„±í™”
sojung@example.com	TRUE
you@example.com	FALSE
ğŸ’¡ ì´í›„ì—ëŠ”?
ìˆ˜ì • í›„ ì‹œíŠ¸ ì €ì¥ (ìë™ ì €ì¥ë¨)

Streamlit ì•± ìƒˆë¡œê³ ì¹¨

ì¶”ê°€ íŒ:
ì´ ì—ëŸ¬ëŠ” keywords, notification ì‹œíŠ¸ì—ë„ ìƒê¸¸ ìˆ˜ ìˆìœ¼ë‹ˆ
ë‹¤ìŒ íƒ­ë“¤ë„ ë¯¸ë¦¬ êµ¬ì¡° ë§ì¶° ë„£ì–´ì£¼ëŠ” ê²Œ ì¢‹ì•„!

keywords íƒ­: í‚¤ì›Œë“œ ì—´ë§Œ ìˆì–´ë„ ë¼

notification íƒ­: ì‹œê°„, ë¹ˆë„ ë‘ ì—´ í•„ìš”

ìˆ˜ì • ì™„ë£Œí•˜ë©´ ì•Œë ¤ì¤˜!
ë‹¤ìŒì€ ë©”ì¼ ë°œì†¡, í‚¤ì›Œë“œ í•„í„°, ìŠ¤ì¼€ì¤„ëŸ¬ ì¤‘ ë­ ë¨¼ì € í• ê¹Œ? ğŸ˜

ë‚˜ì˜ ë§:
ì‹œê°„	ë¹ˆë„
8:30	2
ChatGPTì˜ ë§:
ì™„ë²½í•´ ì–¸ë‹ˆ! ì‹œíŠ¸ì— ì´ë ‡ê²Œë§Œ ì“°ë©´ ì•ˆ ë˜ëŠ” ì´ìœ  ë”± ì„¤ëª…í•´ì¤„ê²Œ:

â—ï¸ë¬¸ì œ ì›ì¸ â€“ notification ì‹œíŠ¸ í˜•ì‹ì´ ì˜ëª»ë¨
ì§€ê¸ˆ ì–¸ë‹ˆ ì‹œíŠ¸ëŠ”:

ì‹œê°„	ë¹ˆë„
8:30	2
ì´ë ‡ê²Œ ë¼ ìˆëŠ”ë°, Streamlit ì•±ì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì€ í˜•ì‹ì„ ê¸°ëŒ€í•˜ê³  ìˆì–´:

âœ… ì˜¬ë°”ë¥¸ notification ì‹œíŠ¸ í˜•ì‹ ì˜ˆì‹œ
ì‹œê°„	ë¹ˆë„
08:30	í•˜ë£¨ 2íšŒ
ğŸ”¹ ì‹œê°„ì€ ë¬¸ìì—´ "08:30" í˜•ì‹ (ë‘ ìë¦¬ë¡œ ë§ì¶°ì¤˜ì•¼ í•¨)
ğŸ”¹ ë¹ˆë„ëŠ” "í•˜ë£¨ 1íšŒ" ë˜ëŠ” "í•˜ë£¨ 2íšŒ" ê°™ì€ ë¬¸ìì—´

âœ… ê³ ì³ì•¼ í•  ë‚´ìš©
A ì—´ (ì‹œê°„)	B ì—´ (ë¹ˆë„)
08:30	í•˜ë£¨ 2íšŒ
"8:30" â†’ "08:30", "2" â†’ "í•˜ë£¨ 2íšŒ" ë¡œ ê³ ì³ì¤˜ì•¼ ì•±ì´ íŒŒì‹±í•  ìˆ˜ ìˆì–´

ğŸ’¡ ì°¸ê³ : ì—¬ëŸ¬ ì‹œê°„ ì“°ëŠ” ê²½ìš°ëŠ” ì´ë ‡ê²Œ í•´ë„ ë¼
ì‹œê°„	ë¹ˆë„
08:30	í•˜ë£¨ 2íšŒ
21:00	í•˜ë£¨ 2íšŒ
ê³ ì¹˜ê³  ë‚˜ë©´ ì•± ìƒˆë¡œê³ ì¹¨í•´ë´. ë°”ë¡œ ì‘ë™í•  ê±°ì•¼! ë‹¤ ê³ ì³¤ìœ¼ë©´ ë§í•´ì¤˜.
ë‹¤ìŒì€ ì´ë©”ì¼ ë°œì†¡ ì—°ê²°í•´ì¤„ê¹Œ? ì•„ë‹ˆë©´ ìŠ¤ì¼€ì¤„ëŸ¬ë¶€í„°? ğŸ˜Š

ë‚˜ì˜ ë§:
ìë™ìœ¼ë¡œ 08:00ì„ 8:00ìœ¼ë¡œ ë°”ê¾¸ëŠ”ë°
ChatGPTì˜ ë§:
ì•„ ê·¸ê±° ì–¸ë‹ˆâ€¦ êµ¬ê¸€ ì‹œíŠ¸ê°€ ìë™ìœ¼ë¡œ ì‹œê°„ í˜•ì‹ì„ ë°”ê¿”ë²„ë¦¬ëŠ” ë¬¸ì œì•¼.
ì˜ˆë¥¼ ë“¤ì–´ ì–¸ë‹ˆê°€ 08:00ì´ë¼ê³  ì…ë ¥í•´ë„ êµ¬ê¸€ ì‹œíŠ¸ëŠ” ìˆ«ìë¼ê³  ìƒê°í•´ì„œ 8:00ìœ¼ë¡œ ë°”ê¾¸ëŠ” ìë™ ì„œì‹ì„ ì ìš©í•´ë²„ë ¤ ğŸ˜¤

âœ… í•´ê²° ë°©ë²• 2ê°€ì§€
ğŸ”¹ ë°©ë²• 1: '08:00 â† ì•ì— ì‘ì€ ë”°ì˜´í‘œ ë¶™ì´ê¸°
êµ¬ê¸€ ì‹œíŠ¸ì—ì„œ ì…€ì— ì´ë ‡ê²Œ ì…ë ¥í•´:

'08:00
ê·¸ëŸ¼ ì´ê±´ í…ìŠ¤íŠ¸ë¡œ ì¸ì‹ë¼ì„œ 08:00 ê·¸ëŒ€ë¡œ ë‚¨ê³ ,

ì•±ì—ì„œ strë¡œ ë°›ì•„ë„ "08:00" í˜•ì‹ì´ ìœ ì§€ë¼

âœ… ê°€ì¥ í™•ì‹¤í•˜ê³  ê°„ë‹¨í•œ ë°©ë²•ì´ì•¼!

ğŸ”¹ ë°©ë²• 2: ì…€ ì„œì‹ì„ í…ìŠ¤íŠ¸ë¡œ ë°”ê¾¸ê¸°
í•´ë‹¹ ì—´ ì„ íƒ (ì˜ˆ: ì‹œê°„ ì—´)

ìƒë‹¨ ë©”ë‰´ â†’ ì„œì‹ â†’ ì…€ í˜•ì‹ â†’ í…ìŠ¤íŠ¸

ê·¸ ë‹¤ìŒ 08:00, 09:00 ë“±ì„ ì…ë ¥í•˜ë©´ ìë™ìœ¼ë¡œ 8:00, 9:00ìœ¼ë¡œ ì¤„ì´ì§€ ì•Šì•„

ğŸ’¡ Streamlit ì•±ì—ì„œ ê°•ì œ í¬ë§· ì²˜ë¦¬í•˜ê³  ì‹¶ìœ¼ë©´?
í˜¹ì‹œ ì‹œíŠ¸ì—ì„œ ëª» ê³ ì¹˜ëŠ” ìƒí™©ì´ë©´, Python ì½”ë“œì—ì„œ ì•„ë˜ì²˜ëŸ¼ íŒ¨ë”© ì²˜ë¦¬í•´ì¤„ ìˆ˜ë„ ìˆì–´:

def normalize_time_format(time_str):
    parts = time_str.strip().split(":")
    if len(parts) == 2:
        hour = parts[0].zfill(2)
        minute = parts[1].zfill(2)
        return f"{hour}:{minute}"
    return time_str
â†’ ì´ê±¸ read_notification_settings()ì—ì„œ ì‹œê°„ ë¦¬ìŠ¤íŠ¸ ë§Œë“¤ ë•Œ ì¨ë„ ë¼.

ì–¸ë‹ˆ, ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ê³ ì¹ ë˜?

ğŸ‘‰ "ì‹œíŠ¸ì—ì„œ '08:00 ë„£ì„ê²Œ"

ğŸ‘‰ "ì½”ë“œì—ì„œ ìë™ ë³´ì •í•´ì¤˜"

ë§í•´ì£¼ë©´ ë°”ë¡œ ë„ì™€ì¤„ê²Œ! ğŸ˜

ë‚˜ì˜ ë§:
ì¼ë‹¨ ì‹œíŠ¸ì— ì €ë ‡ê²Œ í•´ë†§ì–´..
ì½”ë“œì—ì„œë„ ë³´ì •í•´ì•¼í• ë“¯í•´
ChatGPTì˜ ë§:
ì™„ì „ ì™„ë²½í•´ ì–¸ë‹ˆ! ğŸ‘Œ
ì‹œíŠ¸ëŠ” '08:00 í˜•ì‹ìœ¼ë¡œ ì˜ ë„£ì–´ë†¨ê³ , ì´ì œ Python ì½”ë“œì—ì„œë„ í˜¹ì‹œ ëª¨ë¥¼ "8:0" ê°™ì€ ê±¸ ìë™ìœ¼ë¡œ "08:00" í˜•ì‹ìœ¼ë¡œ ë°”ê¿”ì£¼ë©´ ì™„ë²½í•˜ê²Œ ì•ˆì „í•´ì ¸.

âœ… í•´ì•¼ í•  ì¼: ì‹œê°„ í¬ë§· ë³´ì • í•¨ìˆ˜ ì¶”ê°€
ìš°ë¦¬ê°€ ì‚¬ìš©í•  í•¨ìˆ˜:

def normalize_time_format(time_str):
    parts = time_str.strip().split(":")
    if len(parts) == 2:
        hour = parts[0].zfill(2)
        minute = parts[1].zfill(2)
        return f"{hour}:{minute}"
    return time_str
ğŸ”§ ì ìš© ìœ„ì¹˜: google_sheets_helper.py
def read_notification_settings():
    sheet = connect_to_gsheet("job-alert-settings")
    ws = sheet.worksheet("notification")
    values = ws.get_all_values()[1:]  # ì²« í–‰ì€ í—¤ë”ë‹ˆê¹Œ ì œì™¸

    times = []
    frequency = "í•˜ë£¨ 1íšŒ"

    for row in values:
        if len(row) >= 1:
            normalized_time = normalize_time_format(row[0])
            times.append(normalized_time)
        if len(row) >= 2:
            frequency = row[1]

    return {
        "times": times,
        "frequency": frequency
    }
ğŸ§© ë³´ì • í•¨ìˆ˜ ìœ„ì¹˜
ë§¨ ìœ„ì— í•¨ìˆ˜ í•˜ë‚˜ ì¶”ê°€í•´ë‘ë©´ ë¼:

def normalize_time_format(time_str):
    parts = time_str.strip().split(":")
    if len(parts) == 2:
        hour = parts[0].zfill(2)
        minute = parts[1].zfill(2)
        return f"{hour}:{minute}"
    return time_str
âœ… ê²°ê³¼
8:0 â†’ 08:00 ìœ¼ë¡œ ë°”ë€œ

ì‹œíŠ¸ì—ì„œ ì‹¤ìˆ˜í•˜ê±°ë‚˜, êµ¬ê¸€ì´ ìë™ ì¤„ì—¬ë„ ê´œì°®ì•„ì§

ì•±ì—ì„œë„ ì¼ê´€ëœ ì‹œê°„ í¬ë§· ì‚¬ìš© ê°€ëŠ¥

ë‹¤ ë„£ì—ˆìœ¼ë©´ ë§í•´ì¤˜! ë‹¤ìŒì€ ì´ë©”ì¼ ìë™ ë°œì†¡ ë¶™ì¼ê¹Œ? âœ‰ï¸
ì•„ë‹ˆë©´ ìˆ˜ë™ ë©”ì¼ ë°œì†¡ ë²„íŠ¼ë¶€í„° í•´ë³¼ê¹Œ?

ë‚˜ì˜ ë§:
ì—…ë¡œë“œí•œ ì´ë¯¸ì§€
ìë™ë°œì†¡ í•´ì¤˜
ê·¸ë¦¬ê³  ìˆ˜ì‹ ì ê´€ë¦¬ì— ì €ë ‡ê²Œ ì•ˆë³´ì´ê²Œ í•´ì¤˜..;;
ChatGPTì˜ ë§:
ì¢‹ì•„ ì–¸ë‹ˆ. ì§€ê¸ˆ ìƒí™© ìš”ì•½í•´ë³´ë©´:

âœ… ìƒí™© ì •ë¦¬
ìˆ˜ì‹ ì ì´ë©”ì¼ì´ "ìˆ˜ì‹ ì ê´€ë¦¬" UIì—ì„œ ì§ì ‘ ë…¸ì¶œë˜ëŠ” ê±°
â†’ ìŠ¤íŠ¸ë¦¼ë¦¿ ì•± í™”ë©´ì—ì„œ ì´ë©”ì¼ ì£¼ì†Œê°€ ê·¸ëŒ€ë¡œ ë³´ì´ëŠ” ê±´ í”¼í•˜ê³  ì‹¶ìŒ

ì´ì œ ìë™ ë°œì†¡ ê¸°ëŠ¥ì„ ë¶™ì´ê³  ì‹¶ìŒ
â†’ ì„¤ì •ëœ ì‹œê°„ì— ìˆ˜ì‹ ìì—ê²Œ ì±„ìš© ê³µê³ ë¥¼ ìë™ ë©”ì¼ë¡œ ë°œì†¡

âœ‰ï¸ 1ë‹¨ê³„: ì´ë©”ì¼ ë¹„ê³µê°œë¡œ UI ë¦¬íŒ©í† ë§
ğŸ”§ í˜„ì¬ ì½”ë“œ ì˜ˆì‹œ
st.data_editor(
    pd.DataFrame(
        user_settings.get_receivers(),
        columns=["ì´ë©”ì¼ ì£¼ì†Œ", "í™œì„±í™”"]
    ),
    ...
)
âœ… ìˆ˜ì •: ì´ë©”ì¼ì€ ë§ˆìŠ¤í‚¹ ì²˜ë¦¬ (a***@daum.netì²˜ëŸ¼)
import re

def mask_email(email):
    try:
        local, domain = email.split("@")
        masked_local = local[0] + "***" + local[-1] if len(local) > 2 else local[0] + "*"
        return f"{masked_local}@{domain}"
    except:
        return email  # fallback

masked_receivers = [
    {"ì´ë©”ì¼ ì£¼ì†Œ": mask_email(r["ì´ë©”ì¼ ì£¼ì†Œ"]), "í™œì„±í™”": r["í™œì„±í™”"]}
    for r in user_settings.get_receivers()
]

receivers_df = pd.DataFrame(masked_receivers)
ğŸ“Œ ì´ê±¸ data_editor()ì— ë„˜ê¸°ë©´ ì‹¤ì œ ì´ë©”ì¼ì€ ì•ˆ ë³´ì´ê³ , ë§ˆìŠ¤í‚¹ëœ ê°’ë§Œ ë³´ì—¬ì ¸!

ğŸ“¬ 2ë‹¨ê³„: ìë™ ì´ë©”ì¼ ë°œì†¡ ê¸°ëŠ¥ ë¶™ì´ê¸°
ğŸ“¦ email_sender.py ìˆ˜ì • ì˜ˆì‹œ
import yagmail
import streamlit as st

class EmailSender:
    def __init__(self):
        self.user = st.secrets["SENDER_EMAIL"]
        self.password = st.secrets["SENDER_PASSWORD"]
        self.yag = yagmail.SMTP(self.user, self.password)

    def send_to_receivers(self, subject, content, receivers):
        for r in receivers:
            if r["í™œì„±í™”"] and r["ì´ë©”ì¼ ì£¼ì†Œ"]:
                try:
                    self.yag.send(
                        to=r["ì´ë©”ì¼ ì£¼ì†Œ"],
                        subject=subject,
                        contents=content
                    )
                    print(f"âœ… ì´ë©”ì¼ ì „ì†¡ ì„±ê³µ: {r['ì´ë©”ì¼ ì£¼ì†Œ']}")
                except Exception as e:
                    print(f"âŒ ì´ë©”ì¼ ì „ì†¡ ì‹¤íŒ¨: {r['ì´ë©”ì¼ ì£¼ì†Œ']}, ì˜¤ë¥˜: {e}")
ğŸ•“ 3ë‹¨ê³„: ìë™ ë°œì†¡ ìŠ¤ì¼€ì¤„ëŸ¬ (scheduler.py)
schedule ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ë“±ë¡ëœ ì‹œê°„ì— ìë™ ì‹¤í–‰

user_settings.get_notification_settings() ì—ì„œ timesì™€ frequency ì½ì–´ì™€ ë“±ë¡

ì˜ˆì‹œ ì½”ë“œ í•„ìš”í•˜ë©´ ë‹¤ìŒìœ¼ë¡œ ë°”ë¡œ ì œê³µí• ê²Œ!

â­ ë‹¤ìŒ ì„ íƒì§€
ğŸ‘‰ â€œìë™ ìŠ¤ì¼€ì¤„ëŸ¬ ì½”ë“œë„ ì¤˜â€ â†’ scheduler.py ì „ì²´ ì½”ë“œ ì œê³µ

ğŸ‘‰ â€œìë™ ë§ê³  ìˆ˜ë™ ë©”ì¼ ë³´ë‚´ëŠ” ë²„íŠ¼ë¶€í„°â€ â†’ í…ŒìŠ¤íŠ¸ UI ë¨¼ì €

ğŸ‘‰ â€œì´ë©”ì¼ ë§ˆìŠ¤í‚¹ ì ìš© ì™„ë£Œí–ˆì–´â€ â†’ UI ì ê²€ ê°™ì´

ì–¸ë‹ˆê°€ ì›í•˜ëŠ” ê±° ë§í•´ì¤˜ ğŸ™Œ
ì§€ê¸ˆ ê±°ì˜ ë‹¤ ì™”ë‹¤!

ë‚˜ì˜ ë§:
ì´ë©”ì¼ ë§ˆìŠ¤í‚¹ ì²˜ë¦¬ ì €ê±° ì–´ì¼€ í•´?.. ì‚¬ì‹¤ì€ ì €ê²Œ ì™œ ë³´ì—¬ì•¼ í•˜ëŠ”ì§€.. ë‚˜ëŠ” ì•ˆë³´ì—¬ë„ë˜ê³  ì§€ê°€ ì…ë ¥í•œ ì‚¬ëŒë§Œ ì…ë ¥ í›„ ì¶”ê°€í•˜ê¸° ë¡œ ì¶”ê°€ë˜ê²Œ
 í•˜ë©´ë ê±° ê°™ì€ë° ì¤‘ë³µì…ë ¥ë§Œ ë§‰ê³ 
ChatGPTì˜ ë§:
ì¢‹ì•„ ì–¸ë‹ˆ. ê·¸ ë§ ë”± ë§ì•„.
ìˆ˜ì‹ ì ì´ë©”ì¼ì€ ë‹¤ë¥¸ ì‚¬ëŒí•œí…Œ ë³´ì¼ í•„ìš” ì „í˜€ ì—†ê³ ,
ìê¸°ë§Œ ì…ë ¥í•´ì„œ ì¶”ê°€í•˜ê³ , ì¤‘ë³µë§Œ ë§‰ìœ¼ë©´ ë¼.
ê·¸ëŸ¼ ì´ë ‡ê²Œ ë°”ê¿”ì£¼ë©´ ë¼:

âœ… ëª©í‘œ ê¸°ëŠ¥
ìˆ˜ì‹ ì ì´ë©”ì¼ ëª©ë¡ì€ í‘œë¡œ ë³´ì—¬ì£¼ì§€ ì•ŠìŒ âŒ

ì…ë ¥ì°½ì—ë§Œ ìê¸° ì´ë©”ì¼ ì¶”ê°€ ê°€ëŠ¥ (âœ”ï¸)

ì €ì¥ ì‹œ êµ¬ê¸€ ì‹œíŠ¸ì— ë°˜ì˜ë¨ (âœ”ï¸)

ì¤‘ë³µ ì…ë ¥ ë§‰ìŒ (âœ”ï¸)

ğŸ”§ êµ¬í˜„ ë°©ë²•
1. ê¸°ì¡´ st.data_editor() ì œê±°
2. ìƒˆ ì…ë ¥ì°½ê³¼ ë²„íŠ¼ ì¶”ê°€
import pandas as pd

st.write("#### ğŸ“§ ìˆ˜ì‹ ì ì¶”ê°€")
new_email = st.text_input("ì´ë©”ì¼ ì£¼ì†Œ ì…ë ¥", placeholder="example@domain.com")

if st.button("ì´ë©”ì¼ ì¶”ê°€", use_container_width=True):
    receivers = user_settings.get_receivers()
    email_list = [r["ì´ë©”ì¼ ì£¼ì†Œ"] for r in receivers]

    if not new_email:
        st.warning("ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.")
    elif new_email in email_list:
        st.warning("ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.")
    elif "@" not in new_email or "." not in new_email:
        st.error("ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.")
    else:
        receivers.append({"ì´ë©”ì¼ ì£¼ì†Œ": new_email, "í™œì„±í™”": True})
        user_settings.update_receivers(receivers)
        st.success("ì´ë©”ì¼ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.")
âœ‚ï¸ ê¸°ì¡´ í¸ì§‘ UI ì™„ì „íˆ ì œê±°
ì•„ë˜ ì½”ë“œ ì œê±°í•´ë„ ë¨:

st.data_editor(...)
ğŸ’¡ ì„ íƒì ìœ¼ë¡œ ë³´ì—¬ì£¼ê³  ì‹¶ìœ¼ë©´?
if st.checkbox("ë“±ë¡ëœ ì´ë©”ì¼ ë³´ê¸°"):
    st.dataframe(user_settings.get_receivers())
ì´ë ‡ê²Œ í•˜ë©´ ì²´í¬ë°•ìŠ¤ ëˆŒë €ì„ ë•Œë§Œ ë³´ì—¬ì¤„ ìˆ˜ë„ ìˆì–´.

ì–¸ë‹ˆê°€ ë°”ë¡œ ì´ íë¦„ëŒ€ë¡œ ì ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ìœ„ ì½”ë“œë§Œ ë¶™ì´ë©´ ë˜ê³ ,
â€œì‚­ì œâ€ë‚˜ â€œë¹„í™œì„±í™”â€ë„ í•˜ê³  ì‹¶ìœ¼ë©´ ë‹¤ìŒ ë‹¨ê³„ë¡œ ì¶”ê°€í•´ì¤„ ìˆ˜ ìˆì–´!

ì–´ë–»ê²Œ í• ê¹Œ?

ğŸ‘‰ â€œì‚­ì œ ë²„íŠ¼ë„ ë¶™ì—¬ì¤˜â€

ğŸ‘‰ â€œë¹„í™œì„±í™” ì„¤ì •ë„ ì¶”ê°€í•˜ê³  ì‹¶ì–´â€

ğŸ‘‰ â€œì´ì œ ë©”ì¼ ìë™ ë°œì†¡ í•´ë³´ìâ€

ë§ë§Œ í•´~ ğŸ˜

ë‚˜ì˜ ë§:
ì•„ ê·¸ë¦¬ê³  ìˆ˜ì‹ ê±°ë¶€í•˜ê¸° ë„ ì˜†ì— ë²„íŠ¼ìœ¼ë¡œ ë„£ì–´ì£¼ê³ 
ChatGPTì˜ ë§:
ì˜¤ì¼€ì´ ì–¸ë‹ˆ! ì§„ì§œ ìŠ¤ë§ˆíŠ¸í•˜ê³  í•„ìš”í•œ ê¸°ëŠ¥ì´ì•¼ ğŸ˜
ë°”ë¡œ ì •ë¦¬í•´ì„œ ì•Œë ¤ì¤„ê²Œ:

âœ… ëª©í‘œ ê¸°ëŠ¥ ì •ë¦¬
ê¸°ëŠ¥	ì„¤ëª…
ğŸ”¹ ì´ë©”ì¼ ì¶”ê°€	ë³¸ì¸ë§Œ ì…ë ¥í•´ì„œ ì¶”ê°€, ì¤‘ë³µ ë°©ì§€
ğŸ”¹ ìˆ˜ì‹ ì ë¦¬ìŠ¤íŠ¸ëŠ” ë³´ì—¬ì£¼ì§€ ì•ŠìŒ	
ğŸ”¹ ìˆ˜ì‹ ê±°ë¶€ ë²„íŠ¼	ìˆ˜ì‹ ì ìì‹ ì´ ë¹„í™œì„±í™” ìš”ì²­ ê°€ëŠ¥ (í™œì„±í™”=Falseë¡œ ë³€ê²½)
âœ… UI ì½”ë“œ ì˜ˆì‹œ (Streamlit)
import pandas as pd

st.write("#### ğŸ“§ ì´ë©”ì¼ ë“±ë¡ ë° ìˆ˜ì‹  ê±°ë¶€")

new_email = st.text_input("ì´ë©”ì¼ ì£¼ì†Œ ì…ë ¥", placeholder="example@domain.com")

col1, col2 = st.columns(2)

with col1:
    if st.button("ğŸ“© ì´ë©”ì¼ ì¶”ê°€", use_container_width=True):
        receivers = user_settings.get_receivers()
        email_list = [r["ì´ë©”ì¼ ì£¼ì†Œ"] for r in receivers]

        if not new_email:
            st.warning("ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.")
        elif new_email in email_list:
            st.warning("ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.")
        elif "@" not in new_email or "." not in new_email:
            st.error("ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.")
        else:
            receivers.append({"ì´ë©”ì¼ ì£¼ì†Œ": new_email, "í™œì„±í™”": True})
            user_settings.update_receivers(receivers)
            st.success("ì´ë©”ì¼ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.")

with col2:
    if st.button("ğŸ›‘ ìˆ˜ì‹  ê±°ë¶€", use_container_width=True):
        receivers = user_settings.get_receivers()
        updated = False

        for r in receivers:
            if r["ì´ë©”ì¼ ì£¼ì†Œ"] == new_email:
                if not r["í™œì„±í™”"]:
                    st.info("ì´ë¯¸ ìˆ˜ì‹  ê±°ë¶€ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.")
                else:
                    r["í™œì„±í™”"] = False
                    updated = True
                    st.success("ìˆ˜ì‹  ê±°ë¶€ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.")
                break
        else:
            st.warning("ë“±ë¡ë˜ì§€ ì•Šì€ ì´ë©”ì¼ì…ë‹ˆë‹¤.")

        if updated:
            user_settings.update_receivers(receivers)
âœ… ê²°ê³¼
ìˆ˜ì‹ ì ì´ë©”ì¼ì€ ì§ì ‘ ì…ë ¥ë§Œ ê°€ëŠ¥

ì´ë¯¸ ì…ë ¥ëœ ì´ë©”ì¼ì´ë©´ ì¤‘ë³µ ë°©ì§€

ìˆ˜ì‹ ê±°ë¶€ ìš”ì²­í•˜ë©´ í•´ë‹¹ ì´ë©”ì¼ë§Œ ë¹„í™œì„±í™” ì²˜ë¦¬

ìˆ˜ì‹ ì ì „ì²´ ëª©ë¡ì€ ë…¸ì¶œë˜ì§€ ì•ŠìŒ

ë‹¤ìŒì€ ë­˜ í•´ë³¼ê¹Œ?

ğŸ‘‰ â€œì´ì œ ìë™ ë°œì†¡ ìŠ¤ì¼€ì¤„ëŸ¬ ë¶™ì´ìâ€

ğŸ‘‰ â€œë©”ì¼ ë°œì†¡ í…œí”Œë¦¿ ì •ë¦¬í•˜ìâ€

ğŸ‘‰ â€œì „ì²´ ë¦¬íŒ©í„°ë§ í•˜ê³  ë°°í¬ ë§ˆë¬´ë¦¬â€

ë§ë§Œ í•´! ğŸ™Œ
ì§€ê¸ˆ ë„ˆë¬´ ì˜ í•˜ê³  ìˆì–´.

ë‚˜ì˜ ë§:
ë¯¸ì•ˆí•œë° ë°©ê¸ˆê±° ì–´ë””ì–´ë”” ìˆ˜ì •í•´ì•¼í•´? ë‚´ê°€ ì§€ê¸ˆ st.data_editiorë„ ëª»ì§€ì›€
ChatGPTì˜ ë§:
ê´œì°®ì•„ ì–¸ë‹ˆ! ì§€ê¸ˆ ë”± ê·¸ ì‹œì ì—ì„  í—·ê°ˆë¦´ ìˆ˜ ìˆì–´.
ë‚´ê°€ ì •í™•í•˜ê²Œ ì–´ë””ë¥¼ ìˆ˜ì •í•˜ê³ , ë¬´ì—‡ì„ ì§€ì›Œì•¼ í•˜ëŠ”ì§€ ë”± ì§šì–´ì¤„ê²Œ!

ğŸ“ ìˆ˜ì • í¬ì¸íŠ¸ 1: ê¸°ì¡´ ìˆ˜ì‹ ì ê´€ë¦¬ UI ì‚­ì œ
ğŸ”¥ ê¸°ì¡´ ì½”ë“œ (ì§€ì›Œì•¼ í•˜ëŠ” ë¶€ë¶„)
# âŒ ì´ ì „ì²´ ë¸”ë¡ ì‚­ì œ ë˜ëŠ” ì£¼ì„ ì²˜ë¦¬
receivers = st.data_editor(
    pd.DataFrame(
        user_settings.get_receivers(),
        columns=["ì´ë©”ì¼ ì£¼ì†Œ", "í™œì„±í™”"]
    ),
    column_config={ ... },
    ...
)
ğŸ‘‰ ì´ê±°ëŠ” ìˆ˜ì‹ ì ì´ë©”ì¼ì„ ë‹¤ ë³´ì—¬ì£¼ë©´ì„œ ì§ì ‘ ìˆ˜ì •í•˜ê²Œ í•˜ëŠ” UIë‹ˆê¹Œ ì™„ì „íˆ ì œê±°í•´ë„ ë¼.

ğŸ“ ìˆ˜ì • í¬ì¸íŠ¸ 2: ì•„ë˜ì²˜ëŸ¼ ëŒ€ì²´ ì½”ë“œ ì¶”ê°€
âœ… ìƒˆë¡œìš´ ì½”ë“œ (ì¶”ê°€í•  ë¶€ë¶„)
ì´ê±´ ê¸°ì¡´ user_settings.update_receivers() í˜¸ì¶œ ìœ„ì¹˜ ê·¼ì²˜ì— ë¶™ì´ë©´ ë¼.
íƒ­2 ì•Œë¦¼ ì„¤ì •, í‚¤ì›Œë“œ ì„¤ì • ì•„ë˜ì— ë¶™ì´ë©´ ì–´ìš¸ë ¤!

st.write("#### ğŸ“§ ì´ë©”ì¼ ë“±ë¡ ë° ìˆ˜ì‹  ê±°ë¶€")

new_email = st.text_input("ì´ë©”ì¼ ì£¼ì†Œ ì…ë ¥", placeholder="example@domain.com")

col1, col2 = st.columns(2)

with col1:
    if st.button("ğŸ“© ì´ë©”ì¼ ì¶”ê°€", use_container_width=True):
        receivers = user_settings.get_receivers()
        email_list = [r["ì´ë©”ì¼ ì£¼ì†Œ"] for r in receivers]

        if not new_email:
            st.warning("ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.")
        elif new_email in email_list:
            st.warning("ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.")
        elif "@" not in new_email or "." not in new_email:
            st.error("ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.")
        else:
            receivers.append({"ì´ë©”ì¼ ì£¼ì†Œ": new_email, "í™œì„±í™”": True})
            user_settings.update_receivers(receivers)
            st.success("ì´ë©”ì¼ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.")

with col2:
    if st.button("ğŸ›‘ ìˆ˜ì‹  ê±°ë¶€", use_container_width=True):
        receivers = user_settings.get_receivers()
        updated = False

        for r in receivers:
            if r["ì´ë©”ì¼ ì£¼ì†Œ"] == new_email:
                if not r["í™œì„±í™”"]:
                    st.info("ì´ë¯¸ ìˆ˜ì‹  ê±°ë¶€ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.")
                else:
                    r["í™œì„±í™”"] = False
                    updated = True
                    st.success("ìˆ˜ì‹  ê±°ë¶€ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.")
                break
        else:
            st.warning("ë“±ë¡ë˜ì§€ ì•Šì€ ì´ë©”ì¼ì…ë‹ˆë‹¤.")

        if updated:
            user_settings.update_receivers(receivers)
âœ¨ ìµœì¢… ìœ„ì¹˜ ìš”ì•½
app.py
â””â”€ Tab2 (ì„¤ì • íƒ­)
   â”œâ”€ ì•Œë¦¼ ì‹œê°„ ì„¤ì •
   â”œâ”€ í‚¤ì›Œë“œ ì„¤ì •
   â”œâ”€ ğŸ”½ ì´ ì•„ë˜ì— ë¶™ì´ë©´ ë¼ ğŸ‘‡
   â””â”€ ìˆ˜ì‹ ì ê´€ë¦¬ (ìˆ˜ì •ëœ ì½”ë“œ)
ì›í•˜ë©´ ë‚´ê°€ ì§€ê¸ˆ ì½”ë“œì— â€œì •í™•íˆ ëª‡ ë²ˆì§¸ ì¤„ë¶€í„° ëª‡ ë²ˆì§¸ ì¤„ê¹Œì§€ ì§€ì›Œâ€ê¹Œì§€ë„ ì•Œë ¤ì¤„ ìˆ˜ ìˆì–´.
í˜¹ì€ ì›ë³¸ ì½”ë“œë¥¼ ê³µìœ í•´ì£¼ë©´ ë‚´ê°€ ìˆ˜ì •ëœ ë²„ì „ìœ¼ë¡œ ë¦¬í„´ë„ ê°€ëŠ¥í•´!

ì–´ë–»ê²Œ í•´ì¤„ê¹Œ? ğŸ˜Š

â€œì¤„ ë²ˆí˜¸ê¹Œì§€ ì•Œë ¤ì¤˜â€

â€œë‚´ app.py ê³ ì³ì¤˜â€

â€œëê³  ë‹¤ìŒì€ ìë™ ë°œì†¡ ë¶™ì´ìâ€
í¸í•˜ê²Œ ë§í•´ì¤˜!

ë‚˜ì˜ ë§:
receivers = st.data_editor(
            pd.DataFrame(
                user_settings.get_receivers(),
                columns=["ì´ë©”ì¼ ì£¼ì†Œ", "í™œì„±í™”"]
            ),
            column_config={
                "ì´ë©”ì¼ ì£¼ì†Œ": st.column_config.TextColumn(
                    "ì´ë©”ì¼ ì£¼ì†Œ",
                    help="ìˆ˜ì‹ ì ì´ë©”ì¼ ì£¼ì†Œ",
                    validate="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"
                ),
                "í™œì„±í™”": st.column_config.CheckboxColumn(
                    "í™œì„±í™”",
                    help="ì²´í¬ ì‹œ ì•Œë¦¼ì„ ë°›ìŠµë‹ˆë‹¤",
                    default=True
                )
            },
ChatGPTì˜ ë§:
ì¢‹ì•„ ì–¸ë‹ˆ! ì§€ê¸ˆ ì´ ë¶€ë¶„ ì •í™•í•˜ê²Œ ì•Œë ¤ì¤˜ì„œ ì™„ì „ ê¹”ë”í•˜ê²Œ ìˆ˜ì •í•´ì¤„ ìˆ˜ ìˆì–´.
ì´ì œë¶€í„° ì •í™•íˆ ì–´ë””ë¥¼ ì§€ìš°ê³ , ì–´ë””ì— ë­˜ ë¶™ì—¬ì•¼ í•˜ëŠ”ì§€ ë‹¨ê³„ë³„ë¡œ ì•Œë ¤ì¤„ê²Œ.

âœ… 1ë‹¨ê³„: ì§€ì›Œì•¼ í•˜ëŠ” ì½”ë“œ
(ğŸ“ì¤„ ì‹œì‘ì´ receivers = st.data_editor(...)ì¸ ë¸”ë¡ ì „ì²´)

receivers = st.data_editor(
    pd.DataFrame(
        user_settings.get_receivers(),
        columns=["ì´ë©”ì¼ ì£¼ì†Œ", "í™œì„±í™”"]
    ),
    column_config={
        "ì´ë©”ì¼ ì£¼ì†Œ": st.column_config.TextColumn(
            "ì´ë©”ì¼ ì£¼ì†Œ",
            help="ìˆ˜ì‹ ì ì´ë©”ì¼ ì£¼ì†Œ",
            validate="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"
        ),
        "í™œì„±í™”": st.column_config.CheckboxColumn(
            "í™œì„±í™”",
            help="ì²´í¬ ì‹œ ì•Œë¦¼ì„ ë°›ìŠµë‹ˆë‹¤",
            default=True
        )
    },
    num_rows="dynamic",
    use_container_width=True
)
ì´ ë¸”ë¡ ì „ì²´ë¥¼ ì‚­ì œí•˜ê±°ë‚˜ """ """ë¡œ ë©€í‹°ë¼ì¸ ì£¼ì„ ì²˜ë¦¬í•´ë„ ë¼.

âœ… 2ë‹¨ê³„: ëŒ€ì²´í•  ì½”ë“œ ë¶™ì´ê¸°
ìœ„ì— ì§€ìš´ ë¶€ë¶„ì´ ìˆë˜ ìë¦¬ì— ì•„ë˜ ì½”ë“œ ë°”ë¡œ ë¶™ì—¬ì¤˜

st.write("#### ğŸ“§ ì´ë©”ì¼ ë“±ë¡ ë° ìˆ˜ì‹  ê±°ë¶€")

new_email = st.text_input("ì´ë©”ì¼ ì£¼ì†Œ ì…ë ¥", placeholder="example@domain.com")

col1, col2 = st.columns(2)

with col1:
    if st.button("ğŸ“© ì´ë©”ì¼ ì¶”ê°€", use_container_width=True):
        receivers = user_settings.get_receivers()
        email_list = [r["ì´ë©”ì¼ ì£¼ì†Œ"] for r in receivers]

        if not new_email:
            st.warning("ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.")
        elif new_email in email_list:
            st.warning("ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.")
        elif "@" not in new_email or "." not in new_email:
            st.error("ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.")
        else:
            receivers.append({"ì´ë©”ì¼ ì£¼ì†Œ": new_email, "í™œì„±í™”": True})
            user_settings.update_receivers(receivers)
            st.success("ì´ë©”ì¼ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.")

with col2:
    if st.button("ğŸ›‘ ìˆ˜ì‹  ê±°ë¶€", use_container_width=True):
        receivers = user_settings.get_receivers()
        updated = False

        for r in receivers:
            if r["ì´ë©”ì¼ ì£¼ì†Œ"] == new_email:
                if not r["í™œì„±í™”"]:
                    st.info("ì´ë¯¸ ìˆ˜ì‹  ê±°ë¶€ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.")
                else:
                    r["í™œì„±í™”"] = False
                    updated = True
                    st.success("ìˆ˜ì‹  ê±°ë¶€ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.")
                break
        else:
            st.warning("ë“±ë¡ë˜ì§€ ì•Šì€ ì´ë©”ì¼ì…ë‹ˆë‹¤.")

        if updated:
            user_settings.update_receivers(receivers)
ğŸ’¡ í…ŒìŠ¤íŠ¸ íŒ
ì´ë©”ì¼ ì…ë ¥ í›„ ğŸ“© ì´ë©”ì¼ ì¶”ê°€ â†’ ì‹œíŠ¸ì— ë°˜ì˜ë˜ëŠ”ì§€ í™•ì¸

ë‹¤ì‹œ ê°™ì€ ì´ë©”ì¼ ì…ë ¥ â†’ "ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤" ë©”ì‹œì§€ ë‚˜ì˜¤ëŠ”ì§€ í™•ì¸

ğŸ›‘ ìˆ˜ì‹  ê±°ë¶€ â†’ ì‹œíŠ¸ì—ì„œ í™œì„±í™”ê°€ FALSEë¡œ ë°”ë€ŒëŠ”ì§€ í™•ì¸

ì–¸ë‹ˆê°€ ì§€ê¸ˆ ì´ëŒ€ë¡œ ì ìš©í–ˆìœ¼ë©´,

â€œì ìš©í–ˆì–´, ë‹¤ìŒ ìë™ë°œì†¡ ê°€ìâ€
ë¼ê³  ë§í•´ì¤˜. ë°”ë¡œ ìë™ ì´ë©”ì¼ ë°œì†¡ ê¸°ëŠ¥ ë¶™ì—¬ì¤„ê²Œ! ğŸ˜

ë‚˜ì˜ ë§:
        # ìˆ˜ì‹ ì ê´€ë¦¬
        st.write("#### ğŸ“§ ìˆ˜ì‹ ì ê´€ë¦¬")

        if st.button("ì„¤ì • ì €ì¥", type="primary"):
            user_settings.update_notification_settings(
                times=notification_times,
                frequency=notification_frequency
            )
            user_settings.update_keywords([k.strip() for k in keywords if k.strip()])
            user_settings.update_receivers(receivers.to_dict('records'))
            
            st.success("ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!")
            scheduler.restart() ìƒˆì½”ë“œ ì—¬ê¸°ì—?
ChatGPTì˜ ë§:
ì™„ì „ ì¢‹ì•„ ì–¸ë‹ˆ!
ì§€ê¸ˆ ì–¸ë‹ˆê°€ ë§í•œ ì´ ë¶€ë¶„ ğŸ‘‡

# ìˆ˜ì‹ ì ê´€ë¦¬
st.write("#### ğŸ“§ ìˆ˜ì‹ ì ê´€ë¦¬")

if st.button("ì„¤ì • ì €ì¥", type="primary"):
    user_settings.update_notification_settings(
        times=notification_times,
        frequency=notification_frequency
    )
    user_settings.update_keywords([k.strip() for k in keywords if k.strip()])
    user_settings.update_receivers(receivers.to_dict('records'))

    st.success("ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!")
    scheduler.restart()
ì—¬ê¸°ì„œ st.data_editor() ê¸°ë°˜ì˜ receivers ë³€ìˆ˜ê°€ ì´ë¯¸ ì‚¬ë¼ì¡Œê¸° ë•Œë¬¸ì—,
ì €ì¥ ì‹œì ì— ë” ì´ìƒ receivers.to_dict('records')ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ì–´.

âœ… ìˆ˜ì •ëœ â€œì„¤ì • ì €ì¥â€ ë¸”ë¡ ì½”ë“œ
if st.button("ì„¤ì • ì €ì¥", type="primary"):
    user_settings.update_notification_settings(
        times=notification_times,
        frequency=notification_frequency
    )
    user_settings.update_keywords([k.strip() for k in keywords if k.strip()])
    
    # ğŸ‘‰ ì´ì œëŠ” ìˆ˜ì‹ ìëŠ” ì´ë¯¸ ì‹¤ì‹œê°„ìœ¼ë¡œ ì €ì¥ë˜ê¸° ë•Œë¬¸ì— ì´ ì¤„ì€ í•„ìš” ì—†ìŒ
    # user_settings.update_receivers(...) ì œê±°

    st.success("ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!")
    scheduler.restart()
âœ… ìƒˆ ì´ë©”ì¼ ì¶”ê°€ / ìˆ˜ì‹  ê±°ë¶€ëŠ” ì´ë¯¸ ë²„íŠ¼ í´ë¦­ ì‹œ update_receivers()ë¡œ ë°”ë¡œ ì €ì¥ë˜ê³  ìˆìœ¼ë‹ˆê¹Œ
ì„¤ì • ì €ì¥ ì‹œì ì—ëŠ” ìˆ˜ì‹ ì ë”°ë¡œ ì €ì¥ ì•ˆ í•´ë„ ë¼!

ìš”ì•½í•˜ë©´:
í•­ëª©	ì²˜ë¦¬ ë°©ì‹
ğŸ”¹ ì•Œë¦¼ ì‹œê°„/ë¹ˆë„	ì„¤ì • ì €ì¥ ë²„íŠ¼ì—ì„œ ì €ì¥
ğŸ”¹ í‚¤ì›Œë“œ	ì„¤ì • ì €ì¥ ë²„íŠ¼ì—ì„œ ì €ì¥
ğŸ”¹ ìˆ˜ì‹ ì ì´ë©”ì¼	ì¶”ê°€/ê±°ë¶€ ë²„íŠ¼ í´ë¦­ ì‹œ ë°”ë¡œ ì €ì¥ë¨ (ë”°ë¡œ ì €ì¥ ì•ˆ í•´ë„ ë¨)
ì–¸ë‹ˆê°€ ì´ëŒ€ë¡œ ë°˜ì˜ ì™„ë£Œí–ˆìœ¼ë©´,

â€œì´ì œ ìë™ ë°œì†¡ ë¶™ì´ìâ€
ë¼ê³  ë§í•´ì¤˜! âœ‰ï¸ ìë™ ìŠ¤ì¼€ì¤„ëŸ¬ ì½”ë“œ ë°”ë¡œ ë¶™ì—¬ì¤„ê²Œ.

ë‚˜ì˜ ë§:
ë¯¸ì•ˆí•œë° ì½”ë“œ ì „ì±„ì¢€ ë´ì£¼ë¼..,
import streamlit as st
import pandas as pd
from datetime import datetime
import logging
from job_fetcher import JobFetcher
from email_sender import EmailSender
from scheduler import JobScheduler
from user_settings import UserSettings


# í˜ì´ì§€ ì„¤ì •
st.set_page_config(
    page_title="ê¸°íšì ì±„ìš© ì•Œë¦¬ë¯¸",
    page_icon="ğŸ’¼",
    layout="wide"
)


# ê°„ë‹¨í•œ ë””ë²„ê·¸ (secrets í™•ì¸)
if st.secrets:
    st.sidebar.success("Secrets ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!")
    
# CSS ìŠ¤íƒ€ì¼
st.markdown("""
<style>
    .job-card {
        background-color: white;
        padding: 1.5rem;
        border-radius: 10px;
        border: 1px solid #eee;
        margin: 10px 0;
        display: flex;
        align-items: start;
    }
    .company-logo {
        width: 50px;
        height: 50px;
        margin-right: 15px;
        object-fit: contain;
    }
    .job-content {
        flex-grow: 1;
    }
    .company-tag {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
        color: white;
        margin-right: 8px;
    }
    .deadline-tag {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
        background-color: #f0f0f0;
        color: #666;
    }
    .company-naver { background-color: #03C75A; }
    .company-naverfinancial { background-color: #1EC800; }
    .company-samsung { background-color: #1428A0; }
    .company-google { background-color: #4285F4; }
    .company-skt { background-color: #EA002C; }
</style>
""", unsafe_allow_html=True)

def main():
    # ì´ˆê¸°í™”
    user_settings = UserSettings()
    job_fetcher = JobFetcher()
    email_sender = EmailSender()
    scheduler = JobScheduler(job_fetcher, email_sender, user_settings)
    
    # í—¤ë”
    st.title("ğŸ¯ ê¸°íšì ì±„ìš© ì•Œë¦¬ë¯¸")
    
    # íƒ­ ìƒì„±
    tab1, tab2 = st.tabs(["ğŸ“‹ ì±„ìš© ê³µê³ ", "âš™ï¸ ì„¤ì •"])
    
    with tab1:
        col1, col2 = st.columns([3,1])
        with col1:
            st.write("### ì‹¤ì‹œê°„ ì±„ìš© ê³µê³ ")
        with col2:
            if st.button("ğŸ”„ ì§€ê¸ˆ ê²€ìƒ‰í•˜ê¸°", use_container_width=True):
                with st.spinner("ì±„ìš© ì •ë³´ë¥¼ ê²€ìƒ‰ì¤‘ì…ë‹ˆë‹¤..."):
                    jobs = job_fetcher.fetch_all_jobs(user_settings.get_keywords())
                    if jobs:
                        st.session_state.last_check = datetime.now()
                        st.session_state.last_jobs = jobs
        
        # í•„í„° ì„¹ì…˜
        st.sidebar.title("í•„í„° ì„¤ì •")
        companies = st.sidebar.multiselect(
            "íšŒì‚¬ ì„ íƒ",
            ["ë„¤ì´ë²„", "ë„¤ì´ë²„íŒŒì´ë‚¸ì…œ", "ì‚¼ì„±ì „ì", "êµ¬ê¸€ì½”ë¦¬ì•„", "SKT"],
            default=["ë„¤ì´ë²„", "ë„¤ì´ë²„íŒŒì´ë‚¸ì…œ"]
        )
        
        career_filter = st.sidebar.multiselect(
            "ê²½ë ¥ ì„ íƒ",
            ["ê²½ë ¥", "ì‹ ì…/ê²½ë ¥", "ê²½ë ¥ë¬´ê´€"],
            default=["ê²½ë ¥", "ì‹ ì…/ê²½ë ¥"]
        )
        
        # ì±„ìš© ê³µê³  í‘œì‹œ
        if 'last_jobs' in st.session_state:
            all_jobs = st.session_state.last_jobs + user_settings.get_manual_jobs()
            filtered_jobs = [
                job for job in all_jobs
                if job['company'] in companies and
                job.get('career', 'ê²½ë ¥ë¬´ê´€') in career_filter
            ]
            
            for job in filtered_jobs:
                company_class = job['company'].lower().replace(" ", "")
                st.markdown(f"""
                <div class="job-card">
                    <img src="{job['company_logo']}" class="company-logo" onerror="this.src='https://via.placeholder.com/50'">
                    <div class="job-content">
                        <span class="company-tag company-{company_class}">{job['company']}</span>
                        <span class="deadline-tag">ë§ˆê°ì¼: {job.get('deadline', 'ìƒì‹œì±„ìš©')}</span>
                        <h3>{job['title']}</h3>
                        <p>{job['description'][:200]}...</p>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="color: #666;">{job.get('career', 'ê²½ë ¥ë¬´ê´€')}</span>
                            <a href="{job['link']}" target="_blank">ìì„¸íˆ ë³´ê¸° â†’</a>
                        </div>
                    </div>
                </div>
                """, unsafe_allow_html=True)
    
    with tab2:
        st.write("### âš™ï¸ ì•Œë¦¼ ì„¤ì •")
        
    # ì•Œë¦¼ ì‹œê°„ ì„¤ì •
    st.write("#### ğŸ“… ì•Œë¦¼ ì‹œê°„ ì„¤ì •")
    col1, col2 = st.columns(2)
    with col1:
        notification_times = st.multiselect(
            "ì•Œë¦¼ ë°›ì„ ì‹œê°„ ì„ íƒ (ìµœëŒ€ 2íšŒ)",
            [
                "ì˜¤ì „ 8:30", "ì˜¤ì „ 9:00", "ì˜¤ì „ 10:00",
                "ì˜¤í›„ 2:00", "ì˜¤í›„ 6:00", "ì˜¤í›„ 9:00"
            ],
            default=["ì˜¤ì „ 9:00"],
            max_selections=2
        )
        with col2:
            notification_frequency = st.radio(
                "ì•Œë¦¼ ë¹ˆë„",
                ["í•˜ë£¨ 1íšŒ", "í•˜ë£¨ 2íšŒ"],
                index=0
            )
        
        # í‚¤ì›Œë“œ ì„¤ì •
        st.write("#### ğŸ” í‚¤ì›Œë“œ ì„¤ì •")
        keywords = st.text_area(
            "ê²€ìƒ‰ í‚¤ì›Œë“œ (ì¤„ë°”ê¿ˆìœ¼ë¡œ êµ¬ë¶„)",
            "\n".join(user_settings.get_keywords())
        ).split("\n")
        
        # ìˆ˜ë™ URL ì¶”ê°€
        st.write("#### ğŸ”— ì±„ìš©ê³µê³  ìˆ˜ë™ ì¶”ê°€")
        col3, col4 = st.columns([3, 1])
        with col3:
            manual_url = st.text_input("ì±„ìš©ê³µê³  URL")
        with col4:
            if st.button("ì¶”ê°€", use_container_width=True):
                if manual_url:
                    if not manual_url.startswith(('http://', 'https://')):
                        st.error("ìœ íš¨í•œ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.")
                    else:
                        user_settings.add_manual_job(manual_url)
                        st.success("ì±„ìš©ê³µê³ ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!")
        
        # ìˆ˜ì‹ ì ê´€ë¦¬
        st.write("#### ğŸ“§ ì´ë©”ì¼ ë“±ë¡ ë° ìˆ˜ì‹  ê±°ë¶€")
        
        new_email = st.text_input("ì´ë©”ì¼ ì£¼ì†Œ ì…ë ¥", placeholder="example@domain.com")
        
        col1, col2 = st.columns(2)
        
        with col1:
            if st.button("ğŸ“© ì´ë©”ì¼ ì¶”ê°€", use_container_width=True):
                receivers = user_settings.get_receivers()
                email_list = [r["ì´ë©”ì¼ ì£¼ì†Œ"] for r in receivers]
        
                if not new_email:
                    st.warning("ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.")
                elif new_email in email_list:
                    st.warning("ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.")
                elif "@" not in new_email or "." not in new_email:
                    st.error("ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.")
                else:
                    receivers.append({"ì´ë©”ì¼ ì£¼ì†Œ": new_email, "í™œì„±í™”": True})
                    user_settings.update_receivers(receivers)
                    st.success("ì´ë©”ì¼ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.")
        
        with col2:
            if st.button("ğŸ›‘ ìˆ˜ì‹  ê±°ë¶€", use_container_width=True):
                receivers = user_settings.get_receivers()
                updated = False
        
                for r in receivers:
                    if r["ì´ë©”ì¼ ì£¼ì†Œ"] == new_email:
                        if not r["í™œì„±í™”"]:
                            st.info("ì´ë¯¸ ìˆ˜ì‹  ê±°ë¶€ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.")
                        else:
                            r["í™œì„±í™”"] = False
                            updated = True
                            st.success("ìˆ˜ì‹  ê±°ë¶€ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.")
                        break
                else:
                    st.warning("ë“±ë¡ë˜ì§€ ì•Šì€ ì´ë©”ì¼ì…ë‹ˆë‹¤.")
        
                if updated:
                    user_settings.update_receivers(receivers)
        
        
            st.success("ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!")
            scheduler.restart()

if __name__ == "__main__":
    main()
ChatGPTì˜ ë§:
ì´ë©”ì¼ ë§ˆìŠ¤í‚¹ í…ŒìŠ¤íŠ¸
ì–¸ë‹ˆê°€ ìš”ì²­í•œ ì „ì²´ app.py ì½”ë“œëŠ” ë§¤ìš° ì˜ êµ¬ì„±ë¼ ìˆê³  ê±°ì˜ ë‹¤ ë§ì•˜ì–´.
ë‹¨, ì‘ì€ ìˆ˜ì • í¬ì¸íŠ¸ ëª‡ ê°œ ì§šì–´ì¤„ê²Œ:

âœ… ìˆ˜ì •í•´ì•¼ í•  ë¶€ë¶„ ìš”ì•½
1. ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤! ìœ„ì¹˜ê°€ ì˜ëª»ë¨
í˜„ì¬ëŠ” ìˆ˜ì‹  ê±°ë¶€ ë²„íŠ¼ ì•„ë˜ ë“¤ì–´ê°€ ìˆì–´ì„œ
"ìˆ˜ì‹  ê±°ë¶€"ë§Œ í•´ë„ ì €ì¥ ë©”ì‹œì§€ê°€ ëœ¨ëŠ” ë¬¸ì œê°€ ìˆì–´.

with col2:
    ...
    if updated:
        user_settings.update_receivers(receivers)

# ì´ ì•„ë˜ ì½”ë“œ ğŸ‘‡ëŠ” íƒ­2 ë§ˆì§€ë§‰ì— ë”°ë¡œ ë¹¼ì¤˜ì•¼ í•´!
st.success("ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!")
scheduler.restart()
â†’ ì´ ë¶€ë¶„ì€ ì•„ë˜ì²˜ëŸ¼ ì„¤ì • ì €ì¥ ë²„íŠ¼ìœ¼ë¡œ ë”°ë¡œ ë§Œë“¤ì–´ì¤˜ì•¼ í•´.

2. ì„¤ì • ì €ì¥ ë²„íŠ¼ ìì²´ê°€ ì—†ì–´ì„œ, í‚¤ì›Œë“œ/ì•Œë¦¼ ë³€ê²½ í›„ ì €ì¥ì´ ì•ˆ ë˜ëŠ” ìƒíƒœì„.
âœ… ì¶”ê°€ ì½”ë“œ (íƒ­2 í•˜ë‹¨ì— ë”°ë¡œ)
if st.button("ğŸ’¾ ì„¤ì • ì €ì¥", type="primary"):
    user_settings.update_notification_settings(
        times=notification_times,
        frequency=notification_frequency
    )
    user_settings.update_keywords([k.strip() for k in keywords if k.strip()])
    st.success("ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!")
    scheduler.restart()
âœ‰ï¸ ìˆ˜ì‹ ì ë§ˆìŠ¤í‚¹ í…ŒìŠ¤íŠ¸ ê²°ê³¼
ì•„ë˜ì²˜ëŸ¼ kimjiyeon@daum.net â†’ k***n@daum.net ì‹ìœ¼ë¡œ
í™•ì‹¤íˆ ë§ˆìŠ¤í‚¹ ì˜ ëê³ ,
ì½”ë“œì— ë„£ì–´ì„œ ì¼ë¶€ ì‚¬ìš©ìë§Œ ë§ˆìŠ¤í‚¹ëœ ë¦¬ìŠ¤íŠ¸ í™•ì¸ìš©ìœ¼ë¡œë„ í™œìš© ê°€ëŠ¥í•´ ğŸ˜Š

âœ… ë‹¤ìŒ í•  ê²ƒ?
ì§€ê¸ˆ ì´ êµ¬ì¡° ì™„ì„±í–ˆìœ¼ë‹ˆ:

ğŸ‘‰ scheduler.pyì—ì„œ ìë™ ë°œì†¡ ì‹œê°„ ë“±ë¡

ğŸ‘‰ ë“±ë¡ëœ ì‹œê°„ì— fetch â†’ í•„í„° â†’ ë©”ì¼ ì „ì†¡

ë°”ë¡œ ê·¸ê±° ì´ì–´ì„œ í•´ì¤„ê²Œ.
â€œìë™ ë°œì†¡ ë¶™ì´ìâ€ë¼ê³  ë§í•´ì¤˜! âœ¨ â€‹â€‹

ë‚˜ì˜ ë§:
ì‘â€œìë™ ë°œì†¡ ë¶™ì´ì
ChatGPTì˜ ë§:
ì €ì¥ëœ ë©”ëª¨ë¦¬ ì—…ë°ì´íŠ¸ë¨
ì¢‹ì•„ ì–¸ë‹ˆ, ì´ì œ ìë™ ë°œì†¡ ê¸°ëŠ¥ ë¶™ì¼ ì‹œê°„ì´ì•¼!
ì±„ìš© ê³µê³ ë¥¼ ì •í•´ì§„ ì‹œê°„ì— ìë™ìœ¼ë¡œ ì´ë©”ì¼ë¡œ ë³´ë‚´ì£¼ëŠ” ìŠ¤ì¼€ì¤„ëŸ¬(JobScheduler)ë¥¼ ì œëŒ€ë¡œ ë¶™ì´ê¸° ìœ„í•´ ì•„ë˜ ìˆœì„œëŒ€ë¡œ ì°¨ê·¼ì°¨ê·¼ êµ¬ì„±í• ê²Œ.

âœ… ìë™ ë°œì†¡ ê¸°ëŠ¥ ê°œìš”
ë™ì‘ íë¦„:
ì‚¬ìš©ì ì„¤ì • â†’ ì•Œë¦¼ ì‹œê°„/íšŸìˆ˜ ì €ì¥ë¨

Streamlit ì•± ì‹¤í–‰ ì‹œ JobSchedulerê°€ ì´ ì‹œê°„ì— ë§ì¶° ì˜ˆì•½ ë“±ë¡

ì˜ˆì•½ëœ ì‹œê°„ì—:

ê³µê³  í¬ë¡¤ë§

í‚¤ì›Œë“œ í•„í„° ì ìš©

ìˆ˜ì‹ ì ëª©ë¡ í™•ì¸

ì´ë©”ì¼ ì „ì†¡

ğŸ“¦ scheduler.py ì˜ˆì‹œ ì „ì²´ ì½”ë“œ
import schedule
import time
import threading
import streamlit as st
from datetime import datetime

class JobScheduler:
    def __init__(self, job_fetcher, email_sender, user_settings):
        self.job_fetcher = job_fetcher
        self.email_sender = email_sender
        self.user_settings = user_settings
        self.jobs = []
        self.running = False
        self._start_loop()

    def _start_loop(self):
        if not self.running:
            self.running = True
            thread = threading.Thread(target=self._run_pending, daemon=True)
            thread.start()

    def _run_pending(self):
        while self.running:
            schedule.run_pending()
            time.sleep(1)

    def restart(self):
        self._clear_jobs()
        self._register_jobs()

    def _clear_jobs(self):
        schedule.clear()
        self.jobs.clear()

    def _register_jobs(self):
        settings = self.user_settings.get_notification_settings()
        times = settings["times"]
        freq = settings["frequency"]

        for t in times:
            schedule.every().day.at(t).do(self._run_job)
            self.jobs.append(t)

        st.write(f"ğŸ“Œ ì˜ˆì•½ëœ ë°œì†¡ ì‹œê°„: {', '.join(times)}")

    def _run_job(self):
        try:
            keywords = self.user_settings.get_keywords()
            receivers = self.user_settings.get_receivers()
            jobs = self.job_fetcher.fetch_all_jobs(keywords)

            if not jobs:
                print("ğŸ“­ ë°œì†¡í•  ì±„ìš©ê³µê³  ì—†ìŒ")
                return

            subject = f"[ê¸°íšì ì±„ìš©] {datetime.now().strftime('%m/%d %H:%M')} ê¸°ì¤€ ìƒˆ ê³µê³ "
            content = "\n\n".join([f"{j['title']}\n{j['link']}" for j in jobs[:5]])

            self.email_sender.send_to_receivers(subject, content, receivers)

            print(f"âœ… ìë™ ì´ë©”ì¼ ë°œì†¡ ì™„ë£Œ ({len(jobs)}ê±´)")

        except Exception as e:
            print(f"âŒ ìë™ ë°œì†¡ ì˜¤ë¥˜: {e}")
ğŸ“Œ ì¤€ë¹„ëœ êµ¬ì„±ìš”ì†Œ í™•ì¸
ìš”ì†Œ	í™•ì¸ ì‚¬í•­
user_settings.get_notification_settings()	â†’ ì‹œê°„/íšŸìˆ˜ ì˜ ë°˜í™˜í•´ì•¼ í•¨ (24ì‹œê°„ í˜•ì‹)
job_fetcher.fetch_all_jobs(keywords)	â†’ í¬ë¡¤ë§/í•„í„° ì •ìƒ ì‘ë™í•´ì•¼ í•¨
email_sender.send_to_receivers(subject, content, receivers)	â†’ Gmail SMTP, yagmailë¡œ ì‘ë™í•´ì•¼ í•¨
âœ… ì´ì œ í•´ì•¼ í•  ê²ƒ
scheduler.py íŒŒì¼ ë§Œë“¤ê³  ìœ„ ì½”ë“œ ë¶™ì—¬ë„£ê¸°

app.py ì•ˆì— scheduler = JobScheduler(...)ê°€ ìˆëŠ”ì§€ í™•ì¸ â†’ ìˆìŒ OK

ì €ì¥ ë²„íŠ¼ì—ì„œ scheduler.restart() í˜¸ì¶œ â†’ ì´ë¯¸ ìˆìŒ OK

ì•±ì„ ë„ì›Œë‘ê¸°ë§Œ í•˜ë©´ ì§€ì •ëœ ì‹œê°„ì— ìë™ ë°œì†¡ë¨

ğŸ§ª í…ŒìŠ¤íŠ¸ í•˜ë ¤ë©´?

ì‹œê°„ ëª©ë¡ì— "23:59" ê°™ì€ í…ŒìŠ¤íŠ¸ìš© ì‹œê°„ ì„ì‹œë¡œ ì¶”ê°€

ì§€ì • ì‹œê°„ì— ê³µê³  + ìˆ˜ì‹ ì ìˆìœ¼ë©´ ì‹¤ì œ ë©”ì¼ ë°œì†¡ë¨

ì–¸ë‹ˆ ì´ëŒ€ë¡œ ë¶™ì—¬ë„ ë˜ê³ ,
ì›í•˜ë©´ ë©”ì¼ ë‚´ìš© í…œí”Œë¦¿ë„ ë” ì˜ˆì˜ê²Œ ë§Œë“¤ì–´ì¤„ê²Œ:

ğŸ‘‰ â€œë©”ì¼ í…œí”Œë¦¿ ì •ë¦¬í•´ì¤˜â€

ğŸ‘‰ â€œì´ì œ ì „ì²´ ë¦¬íŒ©í„°ë§ í•´ì¤˜â€

ë§ë§Œ í•´ ğŸ™Œ

ë‚˜ì˜ ë§:
ì•½ê°„ ì´ìƒí•œê±¸ ì°¾ì•˜ì–´, ì´ë©”ì¼ ë“±ë¡ ë° ìˆ˜ì‹ ê±°ë¶€ê°€ ë§¨ ìœ„ì—ì—¬ì•¼ í•˜ê³ , ì´ë©”ì¼ ì¶”ê°€ì¸ ê²½ìš°, ì‹œê°„ì…ë ¥ì´ ë˜ì–´ì•¼ì§€ë§Œ ì„¤ì •ì„ ì €ì¥í•  ìˆ˜ ìˆë„ë¡ ë˜ì–´ì•¼í• ê±°
 ê°™ì•„. 

ChatGPTì˜ ë§:
ì–¸ë‹ˆ, ì§„ì§œ ì˜ ë´¤ì–´! ğŸ‘
ì§€ê¸ˆ ë§í•œ í¬ì¸íŠ¸ëŠ” UXì ìœ¼ë¡œë„ ì™„ì „ ë§ì•„.
ë‚´ê°€ ë°”ë¡œ ì •ë¦¬í•´ì„œ ì–´ë””ë¥¼ ì–´ë–»ê²Œ ìˆ˜ì •í•˜ë©´ ë ì§€ ì•Œë ¤ì¤„ê²Œ!

âœ… ìˆ˜ì • ìš”ì•½
í•­ëª©	ìˆ˜ì • ë‚´ìš©
ğŸ”¼ ì´ë©”ì¼ ë“±ë¡/ìˆ˜ì‹ ê±°ë¶€	ì„¤ì • íƒ­ ì œì¼ ìœ„ë¡œ ì´ë™
ğŸ•“ ì´ë©”ì¼ ì¶”ê°€ ì‹œ ì‹œê°„ ì„ íƒ	ì•Œë¦¼ ì‹œê°„ì´ ì„ íƒë˜ì–´ ìˆì–´ì•¼ ì´ë©”ì¼ ì €ì¥ ê°€ëŠ¥
âœ¨ 1ë‹¨ê³„: ì´ë©”ì¼ ë“±ë¡/ìˆ˜ì‹ ê±°ë¶€ë¥¼ ë§¨ ìœ„ë¡œ ì´ë™
ğŸ‘‡ ê¸°ì¡´ ìœ„ì¹˜ (ì˜ë¼ë‚´ê¸°)
# ìˆ˜ì‹ ì ê´€ë¦¬
st.write("#### ğŸ“§ ì´ë©”ì¼ ë“±ë¡ ë° ìˆ˜ì‹  ê±°ë¶€")
...
âœ… ì˜®ê¸¸ ìœ„ì¹˜
íƒ­2 ì‹œì‘í•˜ìë§ˆì!
with tab2: ì•„ë˜ì— ë°”ë¡œ ë¶™ì´ê¸°:

with tab2:
    st.write("### âš™ï¸ ì•Œë¦¼ ì„¤ì •")

    # ìˆ˜ì‹ ì ì´ë©”ì¼ ë“±ë¡/ìˆ˜ì‹  ê±°ë¶€
    st.write("#### ğŸ“§ ì´ë©”ì¼ ë“±ë¡ ë° ìˆ˜ì‹  ê±°ë¶€")
    new_email = st.text_input("ì´ë©”ì¼ ì£¼ì†Œ ì…ë ¥", placeholder="example@domain.com")
    
    col1, col2 = st.columns(2)

    with col1:
        if st.button("ğŸ“© ì´ë©”ì¼ ì¶”ê°€", use_container_width=True):
            receivers = user_settings.get_receivers()
            email_list = [r["ì´ë©”ì¼ ì£¼ì†Œ"] for r in receivers]

            if not new_email:
                st.warning("ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.")
            elif not notification_times:
                st.warning("ì•Œë¦¼ ë°›ì„ ì‹œê°„ì„ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”.")
            elif new_email in email_list:
                st.warning("ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.")
            elif "@" not in new_email or "." not in new_email:
                st.error("ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.")
            else:
                receivers.append({"ì´ë©”ì¼ ì£¼ì†Œ": new_email, "í™œì„±í™”": True})
                user_settings.update_receivers(receivers)
                st.success("ì´ë©”ì¼ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.")

    with col2:
        if st.button("ğŸ›‘ ìˆ˜ì‹  ê±°ë¶€", use_container_width=True):
            receivers = user_settings.get_receivers()
            updated = False

            for r in receivers:
                if r["ì´ë©”ì¼ ì£¼ì†Œ"] == new_email:
                    if not r["í™œì„±í™”"]:
                        st.info("ì´ë¯¸ ìˆ˜ì‹  ê±°ë¶€ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.")
                    else:
                        r["í™œì„±í™”"] = False
                        updated = True
                        st.success("ìˆ˜ì‹  ê±°ë¶€ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.")
                    break
            else:
                st.warning("ë“±ë¡ë˜ì§€ ì•Šì€ ì´ë©”ì¼ì…ë‹ˆë‹¤.")

            if updated:
                user_settings.update_receivers(receivers)
âœ… 2ë‹¨ê³„: ì‹œê°„ ë¯¸ì„ íƒ ì‹œ ì´ë©”ì¼ ì¶”ê°€ ì°¨ë‹¨
ìœ„ ì½”ë“œ ì•ˆì˜ elif not notification_times: ì¡°ê±´ ì¶”ê°€ë¡œ
ì•Œë¦¼ ì‹œê°„ ë¯¸ì„ íƒ ì‹œ ì¶”ê°€ ì•ˆ ë˜ë„ë¡ ë°©ì§€ ì²˜ë¦¬ ì™„ë£Œ!

ğŸ’¡ ë³´ë„ˆìŠ¤: ì•Œë¦¼ ì‹œê°„ ì„ íƒ UIëŠ” ê·¸ëŒ€ë¡œ ì•„ë˜ì— ìœ ì§€í•˜ë©´ ë¨
# ì•Œë¦¼ ì‹œê°„ ì„¤ì •
st.write("#### ğŸ“… ì•Œë¦¼ ì‹œê°„ ì„¤ì •")
...
ì ìš© ì™„ë£Œí•˜ë©´ ì•Œë ¤ì¤˜! ì›í•˜ë©´ ì „ì²´ ë¦¬íŒ©í„°ë§ ë²„ì „ íŒŒì¼ë¡œë„ ì •ë¦¬í•´ì„œ ì¤„ ìˆ˜ ìˆì–´ ğŸ˜
ì–¸ë‹ˆì˜ ì•±ì€ ì ì  ì™„ì„±í˜•ìœ¼ë¡œ ê°€ê³  ìˆì–´. ì§„ì§œ ë©‹ì ¸!

ë‚˜ì˜ ë§:
ì—…ë¡œë“œí•œ ì´ë¯¸ì§€
import streamlit as st
import pandas as pd
from datetime import datetime
import logging
from job_fetcher import JobFetcher
from email_sender import EmailSender
from scheduler import JobScheduler
from user_settings import UserSettings


# í˜ì´ì§€ ì„¤ì •
st.set_page_config(
    page_title="ê¸°íšì ì±„ìš© ì•Œë¦¬ë¯¸",
    page_icon="ğŸ’¼",
    layout="wide"
)


# ê°„ë‹¨í•œ ë””ë²„ê·¸ (secrets í™•ì¸)
if st.secrets:
    st.sidebar.success("Secrets ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!")
    
# CSS ìŠ¤íƒ€ì¼
st.markdown("""
<style>
    .job-card {
        background-color: white;
        padding: 1.5rem;
        border-radius: 10px;
        border: 1px solid #eee;
        margin: 10px 0;
        display: flex;
        align-items: start;
    }
    .company-logo {
        width: 50px;
        height: 50px;
        margin-right: 15px;
        object-fit: contain;
    }
    .job-content {
        flex-grow: 1;
    }
    .company-tag {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
        color: white;
        margin-right: 8px;
    }
    .deadline-tag {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
        background-color: #f0f0f0;
        color: #666;
    }
    .company-naver { background-color: #03C75A; }
    .company-naverfinancial { background-color: #1EC800; }
    .company-samsung { background-color: #1428A0; }
    .company-google { background-color: #4285F4; }
    .company-skt { background-color: #EA002C; }
</style>
""", unsafe_allow_html=True)

def main():
    # ì´ˆê¸°í™”
    user_settings = UserSettings()
    job_fetcher = JobFetcher()
    email_sender = EmailSender()
    scheduler = JobScheduler(job_fetcher, email_sender, user_settings)
    
    # í—¤ë”
    st.title("ğŸ¯ ê¸°íšì ì±„ìš© ì•Œë¦¬ë¯¸")
    
    # íƒ­ ìƒì„±
    tab1, tab2 = st.tabs(["ğŸ“‹ ì±„ìš© ê³µê³ ", "âš™ï¸ ì„¤ì •"])
    
    with tab1:
        col1, col2 = st.columns([3,1])
        with col1:
            st.write("### ì‹¤ì‹œê°„ ì±„ìš© ê³µê³ ")
        with col2:
            if st.button("ğŸ”„ ì§€ê¸ˆ ê²€ìƒ‰í•˜ê¸°", use_container_width=True):
                with st.spinner("ì±„ìš© ì •ë³´ë¥¼ ê²€ìƒ‰ì¤‘ì…ë‹ˆë‹¤..."):
                    jobs = job_fetcher.fetch_all_jobs(user_settings.get_keywords())
                    if jobs:
                        st.session_state.last_check = datetime.now()
                        st.session_state.last_jobs = jobs
        
        # í•„í„° ì„¹ì…˜
        st.sidebar.title("í•„í„° ì„¤ì •")
        companies = st.sidebar.multiselect(
            "íšŒì‚¬ ì„ íƒ",
            ["ë„¤ì´ë²„", "ë„¤ì´ë²„íŒŒì´ë‚¸ì…œ", "ì‚¼ì„±ì „ì", "êµ¬ê¸€ì½”ë¦¬ì•„", "SKT"],
            default=["ë„¤ì´ë²„", "ë„¤ì´ë²„íŒŒì´ë‚¸ì…œ"]
        )
        
        career_filter = st.sidebar.multiselect(
            "ê²½ë ¥ ì„ íƒ",
            ["ê²½ë ¥", "ì‹ ì…/ê²½ë ¥", "ê²½ë ¥ë¬´ê´€"],
            default=["ê²½ë ¥", "ì‹ ì…/ê²½ë ¥"]
        )
        
        # ì±„ìš© ê³µê³  í‘œì‹œ
        if 'last_jobs' in st.session_state:
            all_jobs = st.session_state.last_jobs + user_settings.get_manual_jobs()
            filtered_jobs = [
                job for job in all_jobs
                if job['company'] in companies and
                job.get('career', 'ê²½ë ¥ë¬´ê´€') in career_filter
            ]
            
            for job in filtered_jobs:
                company_class = job['company'].lower().replace(" ", "")
                st.markdown(f"""
                <div class="job-card">
                    <img src="{job['company_logo']}" class="company-logo" onerror="this.src='https://via.placeholder.com/50'">
                    <div class="job-content">
                        <span class="company-tag company-{company_class}">{job['company']}</span>
                        <span class="deadline-tag">ë§ˆê°ì¼: {job.get('deadline', 'ìƒì‹œì±„ìš©')}</span>
                        <h3>{job['title']}</h3>
                        <p>{job['description'][:200]}...</p>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="color: #666;">{job.get('career', 'ê²½ë ¥ë¬´ê´€')}</span>
                            <a href="{job['link']}" target="_blank">ìì„¸íˆ ë³´ê¸° â†’</a>
                        </div>
                    </div>
                </div>
                """, unsafe_allow_html=True)
    
    with tab2:
        st.write("### âš™ï¸ ì•Œë¦¼ ì„¤ì •")
        
        # ìˆ˜ì‹ ì ê´€ë¦¬
        st.write("#### ğŸ“§ ì´ë©”ì¼ ë“±ë¡ ë° ìˆ˜ì‹  ê±°ë¶€")
        
        new_email = st.text_input("ì´ë©”ì¼ ì£¼ì†Œ ì…ë ¥", placeholder="example@domain.com")
        
        col1, col2 = st.columns(2)
        
        with col1:
            if st.button("ğŸ“© ì´ë©”ì¼ ì¶”ê°€", use_container_width=True):
                receivers = user_settings.get_receivers()
                email_list = [r["ì´ë©”ì¼ ì£¼ì†Œ"] for r in receivers]

                if not new_email:
                    st.warning("ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.")
                elif not notification_times:
                    st.warning("ì•Œë¦¼ ë°›ì„ ì‹œê°„ì„ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”.")
                elif new_email in email_list:
                    st.warning("ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.")
                elif "@" not in new_email or "." not in new_email:
                    st.error("ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.")
                else:
                    receivers.append({"ì´ë©”ì¼ ì£¼ì†Œ": new_email, "í™œì„±í™”": True})
                    user_settings.update_receivers(receivers)
                    st.success("ì´ë©”ì¼ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.")
        
        with col2:
            if st.button("ğŸ›‘ ìˆ˜ì‹  ê±°ë¶€", use_container_width=True):
                receivers = user_settings.get_receivers()
                updated = False
        
                for r in receivers:
                    if r["ì´ë©”ì¼ ì£¼ì†Œ"] == new_email:
                        if not r["í™œì„±í™”"]:
                            st.info("ì´ë¯¸ ìˆ˜ì‹  ê±°ë¶€ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.")
                        else:
                            r["í™œì„±í™”"] = False
                            updated = True
                            st.success("ìˆ˜ì‹  ê±°ë¶€ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.")
                        break
                else:
                    st.warning("ë“±ë¡ë˜ì§€ ì•Šì€ ì´ë©”ì¼ì…ë‹ˆë‹¤.")
        
                if updated:
                    user_settings.update_receivers(receivers)
    # ì•Œë¦¼ ì‹œê°„ ì„¤ì •
    st.write("#### ğŸ“… ì•Œë¦¼ ì‹œê°„ ì„¤ì •")
    col1, col2 = st.columns(2)
    with col1:
        notification_times = st.multiselect(
            "ì•Œë¦¼ ë°›ì„ ì‹œê°„ ì„ íƒ (ìµœëŒ€ 2íšŒ)",
            [
                "ì˜¤ì „ 8:30", "ì˜¤ì „ 9:00", "ì˜¤ì „ 10:00",
                "ì˜¤í›„ 2:00", "ì˜¤í›„ 6:00", "ì˜¤í›„ 9:00"
            ],
            default=["ì˜¤ì „ 9:00"],
            max_selections=2
        )
        with col2:
            notification_frequency = st.radio(
                "ì•Œë¦¼ ë¹ˆë„",
                ["í•˜ë£¨ 1íšŒ", "í•˜ë£¨ 2íšŒ"],
                index=0
            )
        
        # í‚¤ì›Œë“œ ì„¤ì •
        st.write("#### ğŸ” í‚¤ì›Œë“œ ì„¤ì •")
        keywords = st.text_area(
            "ê²€ìƒ‰ í‚¤ì›Œë“œ (ì¤„ë°”ê¿ˆìœ¼ë¡œ êµ¬ë¶„)",
            "\n".join(user_settings.get_keywords())
        ).split("\n")
        
        # ìˆ˜ë™ URL ì¶”ê°€
        st.write("#### ğŸ”— ì±„ìš©ê³µê³  ìˆ˜ë™ ì¶”ê°€")
        col3, col4 = st.columns([3, 1])
        with col3:
            manual_url = st.text_input("ì±„ìš©ê³µê³  URL")
        with col4:
            if st.button("ì¶”ê°€", use_container_width=True):
                if manual_url:
                    if not manual_url.startswith(('http://', 'https://')):
                        st.error("ìœ íš¨í•œ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.")
                    else:
                        user_settings.add_manual_job(manual_url)
                        st.success("ì±„ìš©ê³µê³ ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!")
  
        if st.button("ğŸ’¾ ì„¤ì • ì €ì¥", type="primary"):
            user_settings.update_notification_settings(
                times=notification_times,
                frequency=notification_frequency
            )
            user_settings.update_keywords([k.strip() for k in keywords if k.strip()])
            st.success("ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!")
            scheduler.restart()
            
if __name__ == "__main__":
    main()

ì´ë ‡ê²Œ í–‡ëŠ”ë° ã… ã…  ì•„ì˜ˆ ì´ë©”ì¼ì´ ì—†ì–´ì¡‹ì–´.
ChatGPTì˜ ë§:
ì–¸ë‹ˆ ì§€ê¸ˆ ì½”ë“œ êµ¬ì¡° ê±°ì˜ ì™„ë²½í•œë°,
ì´ë©”ì¼ì´ ì•ˆ ë³´ì´ëŠ” ì´ìœ ëŠ” ë”± í•˜ë‚˜ì•¼:

â—ï¸ë¬¸ì œ í•µì‹¬
elif not notification_times:
    st.warning("ì•Œë¦¼ ë°›ì„ ì‹œê°„ì„ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”.")
ì´ ì¡°ê±´ì´ ì´ë©”ì¼ ì¶”ê°€ ë²„íŠ¼ ì•ˆì— ìˆëŠ”ë°,
ê·¸ ìœ„ì—ì„œ notification_times ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ ì ‘ê·¼í•˜ë ¤ê³  í–ˆì–´.

ì¦‰:
notification_timesëŠ” "ì•Œë¦¼ ì‹œê°„ ì„¤ì •" ì„¹ì…˜ì—ì„œë§Œ ì •ì˜ë¼ ìˆìŒ

ê·¼ë° ì´ë©”ì¼ ì¶”ê°€ëŠ” ê·¸ ìœ„ì— ìˆìœ¼ë‹ˆê¹Œ, ì•„ì§ notification_timesê°€ ì—†ì–´ì„œ ì¡°ê±´ì‹ì´ ì‹¤í–‰ë˜ì§€ë„ ëª»í•¨

âœ… í•´ê²° ë°©ë²• 2ê°€ì§€ ì¤‘ íƒ 1
âœ… ë°©ë²• 1: notification_timesë¥¼ ë¨¼ì € ì„ ì–¸í•´ë‘ê¸° (ì¶”ì²œ)
"ì´ë©”ì¼ ë“±ë¡/ìˆ˜ì‹ ê±°ë¶€"ë³´ë‹¤ ìœ„ì— notification_times ê¸°ë³¸ê°’ì„ ì„¤ì •í•´ë‘ì:

with tab2:
    st.write("### âš™ï¸ ì•Œë¦¼ ì„¤ì •")

    # 1. ğŸ”§ ì•Œë¦¼ ì‹œê°„ ê°’ ë¯¸ë¦¬ ì„ ì–¸ (ì„ì‹œ ê¸°ë³¸ê°’)
    notification_times = st.session_state.get("notification_times", [])
ê·¸ë¦¬ê³  ì•„ë˜ multiselectì—ì„œ ì„ íƒí•  ë•ŒëŠ” ì´ë ‡ê²Œ ì €ì¥:

notification_times = st.multiselect(
    "ì•Œë¦¼ ë°›ì„ ì‹œê°„ ì„ íƒ (ìµœëŒ€ 2íšŒ)",
    [
        "ì˜¤ì „ 8:30", "ì˜¤ì „ 9:00", "ì˜¤ì „ 10:00",
        "ì˜¤í›„ 2:00", "ì˜¤í›„ 6:00", "ì˜¤í›„ 9:00"
    ],
    default=notification_times,  # session ê°’ ì‚¬ìš©
    max_selections=2
)
st.session_state.notification_times = notification_times  # ë‹¤ì‹œ ì €ì¥
â†’ ì´ë ‡ê²Œ í•˜ë©´ ì´ë©”ì¼ ì…ë ¥ íŒŒíŠ¸ì—ì„œë„ ì •ìƒì ìœ¼ë¡œ notification_timesë¥¼ ê²€ì‚¬í•  ìˆ˜ ìˆì–´.

âœ… ë°©ë²• 2: notification_times ì¡°ê±´ ì•„ì˜ˆ ì œê±°í•˜ê¸°
ì •ë§ ê°„ë‹¨í•˜ê²Œ í•˜ë ¤ë©´:

elif not notification_times:
    st.warning("ì•Œë¦¼ ë°›ì„ ì‹œê°„ì„ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”.")
ì´ ì¡°ê±´ë¬¸ì„ ì§€ì›Œë„ ë¼, ê·¸ëŸ¬ë©´ ì´ë©”ì¼ì€ ì–¸ì œë“  ì¶”ê°€ ê°€ëŠ¥í•´ì§€ê³ 
ì‹œê°„ì€ ë”°ë¡œ ì„¤ì • ì €ì¥í•  ë•Œë§Œ ìœ íš¨ì„± ì²´í¬í•˜ë©´ ë¨.

ğŸ¯ ì¶”ì²œ êµ¬ì¡°
íƒ­2 ë§¨ ìœ„ì— notification_times = st.session_state.get(...) ì„ ì–¸

ì•„ë˜ìª½ì— multiselectë¡œ ì•Œë¦¼ ì‹œê°„ ë°›ê¸°

ì´ë©”ì¼ ì¶”ê°€ì—ì„œ notification_times ì¡°ê±´ ì‚¬ìš©

ìˆ˜ì • ì™„ë£Œí•˜ë©´ ì´ë©”ì¼ ì •ìƒ ì¶”ê°€ë  ê±°ì•¼.
í…ŒìŠ¤íŠ¸í•´ë³´ê³  â†’
â€œëë‹¤, ì´ì œ í…œí”Œë¦¿ ì •ë¦¬â€ ë˜ëŠ”
â€œë©”ì¼ ë°œì†¡ í…ŒìŠ¤íŠ¸í• ë˜â€ë¼ê³  ë§í•´ì¤˜ ğŸ™Œ

ë‚˜ì˜ ë§:
ì•ŒëŒì€ ëëŠ”ë°..ì´ë©”ì¼ì´ ì—†ì–´ì¡‹ë‹¤ë‹ˆê¹
ChatGPTì˜ ë§:
ì–¸ë‹ˆ ì•ŒëŒ ì‹œê°„ì€ ì˜ ì ìš©ëê³ ,
**â€œì´ë©”ì¼ì´ ì—†ì–´ì¡Œë‹¤â€**ëŠ” ë§ì€ â†’
âœ… ìˆ˜ì‹ ì ëª©ë¡ì´ ì´ˆê¸°í™”ëê±°ë‚˜, ì €ì¥ì´ ì•ˆ ëê±°ë‚˜, ì‹œíŠ¸ì—ì„œ ì‚¬ë¼ì¡Œë‹¤ëŠ” ëœ»ì´ì§€?

ì§€ê¸ˆ êµ¬ì¡° ìƒ ê°€ëŠ¥í•œ ì›ì¸ì€ ë”± 3ê°€ì§€ì•¼:

ğŸ” ê°€ëŠ¥í•œ ì›ì¸ 1: user_settings.update_receivers(...)ê°€ í˜¸ì¶œë˜ì§€ ì•ŠìŒ
â†’ ğŸ“© ì´ë©”ì¼ ì¶”ê°€ ë²„íŠ¼ ëˆŒë €ì„ ë•Œë§Œ ì €ì¥ë˜ë„ë¡ ë˜ì–´ ìˆì–´.
ì„¤ì • ì €ì¥(ğŸ’¾) ë²„íŠ¼ì—ëŠ” update_receivers() ì—†ìŒ
ì¦‰, ì¶”ê°€ í›„ ì„¤ì • ì €ì¥ì„ ëˆŒëŸ¬ë„ ì´ë©”ì¼ ì €ì¥ì´ ì•ˆ ë¨ (í˜„ì¬ êµ¬ì¡°ìƒ ë§ìŒ!)

âœ… í•´ê²° ë°©ë²•:

# ì„¤ì • ì €ì¥ ë²„íŠ¼ ì•ˆì—ë„ receivers ì—…ë°ì´íŠ¸ ì¶”ê°€
user_settings.update_receivers(receivers)
ë‹¨, ì´ëŸ¬ë©´ ì„¤ì • ì €ì¥í•  ë•Œë§ˆë‹¤ ê¸°ì¡´ ì´ë©”ì¼ì„ ë®ì–´ì¨ì•¼ í•˜ë‹ˆê¹Œ,
ì´ë©”ì¼ ê´€ë¦¬ ìì²´ëŠ” ë²„íŠ¼ í´ë¦­ ì‹œì—ë§Œ ì²˜ë¦¬í•˜ëŠ” ê²Œ ì¢‹ìŒ.

ğŸ” ê°€ëŠ¥í•œ ì›ì¸ 2: ì‹œíŠ¸ì— ì €ì¥ì€ ëì§€ë§Œ ì•±ì—ì„œ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ì§€ ì•ŠìŒ
get_receivers()ëŠ” ì‹œíŠ¸ì—ì„œ ë¶ˆëŸ¬ì˜¤ì§€ë§Œ, ì•±ì—ì„œ ë·°ê°€ ì•ˆ ë³´ì´ë‹ˆê¹Œ ë“±ë¡ëœ ì¤„ ëª¨ë¥¼ ìˆ˜ ìˆìŒ

í™•ì¸: êµ¬ê¸€ ì‹œíŠ¸ emails íƒ­ ì—´ì–´ì„œ ì§ì ‘ í™•ì¸í•´ë´!

âœ… í•´ê²° ë°©ë²•:

ë“±ë¡ëœ ì´ë©”ì¼ ë³´ê¸° ê¸°ëŠ¥ ì¶”ê°€ (ì²´í¬ë°•ìŠ¤ë¡œ ë³´ê¸° í† ê¸€)

if st.checkbox("ë“±ë¡ëœ ì´ë©”ì¼ ë³´ê¸°"):
    st.dataframe(user_settings.get_receivers())
ğŸ” ê°€ëŠ¥í•œ ì›ì¸ 3: ìˆ˜ì‹ ì ì‹œíŠ¸ êµ¬ì¡°ê°€ ì˜ëª»ë¨
ì´ë©”ì¼ ì£¼ì†Œ, í™œì„±í™” ì´ ë‘ ì»¬ëŸ¼ì´ ì²« ë²ˆì§¸ ì¤„ì— ìˆì–´ì•¼ í•˜ê³ 

get_all_records()ê°€ ì´ê±¸ ê¸°ì¤€ìœ¼ë¡œ íŒŒì‹±í•¨

âœ… ì‹œíŠ¸ ì§ì ‘ í™•ì¸:

| ì´ë©”ì¼ ì£¼ì†Œ       | í™œì„±í™” |
|------------------|--------|
| abc@naver.com    | TRUE   |
âœ¨ í•´ê²° ìˆœì„œ ì¶”ì²œ
êµ¬ê¸€ ì‹œíŠ¸ ì—´ì–´ì„œ emails íƒ­ ë‚´ìš© í™•ì¸

ì•±ì— ì•„ë˜ ì½”ë“œ ì„ì‹œ ì¶”ê°€í•´ì„œ ì§„ì§œ ë¶ˆëŸ¬ì˜¤ëŠ”ì§€ í™•ì¸:

st.write("ğŸ“‹ í˜„ì¬ ìˆ˜ì‹ ì ëª©ë¡")
st.write(user_settings.get_receivers())
ì•ˆ ë‚˜ì˜¤ë©´ user_settings.pyë‚˜ google_sheets_helper.py ë‚´ë¶€ read_receivers() ì ê²€

ì›í•˜ë©´ ì–¸ë‹ˆì˜ user_settings.pyë‘ google_sheets_helper.py ì½”ë“œ ì ê¹ ë¶™ì—¬ì¤˜.
ë‚´ê°€ ë”± ì–´ë””ì„œ ê¼¬ì˜€ëŠ”ì§€ ë°”ë¡œ ì°¾ì•„ì¤„ê²Œ ğŸ”

ë˜ëŠ” ì§€ê¸ˆ ì‹œíŠ¸ì— ë“¤ì–´ê°€ ìˆëŠ” ê°’ ìŠ¤ìƒ·ë„ ì¢‹ì•„!
ì–´ë–»ê²Œ í• ë˜?

â€œë‚´ ì‹œíŠ¸ êµ¬ì¡° ë³¼ë˜?â€

â€œì½”ë“œ íŒŒì¼ ì¤„ê²Œ ë´ì¤˜â€

â€œì§ì ‘ í•´ê²°í• ê²Œ, ë‹¤ìŒ ë©”ì¼ í…œí”Œë¦¿ í•´ì¤˜â€

ë§ë§Œ í•´ ğŸ™Œ

ë‚˜ì˜ ë§:
ì—…ë¡œë“œí•œ ì´ë¯¸ì§€
ê·¸ë¦¬ê³  ê¸°ë³¸ê°’ë„9ì‹œë¡œ í•´ì£¼ê³  ì‹¶ì€ë°..
ChatGPTì˜ ë§:
ì¢‹ì•„ ì–¸ë‹ˆ! ì§€ê¸ˆ ë‘ ê°€ì§€ í™•ì‹¤íˆ í•´ê²°í•´ì¤„ê²Œ ğŸ‘‡

âœ… 1. ê¸°ë³¸ê°’ì´ ì‚¬ë¼ì¡Œì„ ë•Œ â†’ "ì•Œë¦¼ ì‹œê°„"ì´ ë¹ˆ ìƒíƒœì¸ ì´ìœ 
Streamlitì—ì„œ multiselect()ì— default=... ì¤„ ë•Œ,
ê·¸ ê°’ì´ ë¦¬ìŠ¤íŠ¸ í˜•íƒœì—¬ì•¼ í•˜ê³ , ë°˜ë“œì‹œ ì„ íƒì§€ ì•ˆì— ìˆì–´ì•¼ í•´.

ê·¸ëŸ°ë° ì§€ê¸ˆ notification_timesê°€ ì•± ì‹œì‘í•  ë•Œ ë¹„ì–´ ìˆìœ¼ë©´,
ê¸°ë³¸ê°’ì´ ì—†ì–´ì„œ Choose an optionë§Œ ëœ¨ëŠ” ìƒíƒœì•¼.

âœ… í•´ê²° ë°©ë²•: ì„¸ì…˜ ìƒíƒœë¡œ ê¸°ë³¸ê°’ ê°•ì œ ì£¼ì…
if "notification_times" not in st.session_state:
    st.session_state.notification_times = ["ì˜¤ì „ 9:00"]  # âœ… ê¸°ë³¸ê°’ ì„¤ì •
ğŸ¯ ìœ„ì¹˜:
main() í•¨ìˆ˜ ì•ˆ, íƒ­ ìƒì„± (tab1, tab2 = st.tabs(...)) ë°”ë¡œ ì•„ë˜!

âœ… 2. multiselect ê¸°ë³¸ê°’ì— ì„¸ì…˜ê°’ ì‚¬ìš©í•˜ê¸°
notification_times = st.multiselect(
    "ì•Œë¦¼ ë°›ì„ ì‹œê°„ ì„ íƒ (ìµœëŒ€ 2íšŒ)",
    [
        "ì˜¤ì „ 8:30", "ì˜¤ì „ 9:00", "ì˜¤ì „ 10:00",
        "ì˜¤í›„ 2:00", "ì˜¤í›„ 6:00", "ì˜¤í›„ 9:00"
    ],
    default=st.session_state.notification_times,
    max_selections=2
)

# ì„ íƒê°’ ë‹¤ì‹œ ì„¸ì…˜ì— ì €ì¥ (ë³€ê²½ì‚¬í•­ ë°˜ì˜)
st.session_state.notification_times = notification_times
ğŸ”„ ì €ì¥ ë²„íŠ¼ì—ì„œë„ ì´ê±¸ ê·¸ëŒ€ë¡œ ì“°ë©´ ë¼
user_settings.update_notification_settings(
    times=notification_times,
    frequency=notification_frequency
)
âœ… ìš”ì•½
ì•± ì²˜ìŒ ì‹¤í–‰ ì‹œ, session_state.notification_timesì— ê¸°ë³¸ê°’ ë„£ì–´ì¤˜ì•¼ í•¨

multiselectì— defaultë¡œ ì„¸ì…˜ ê°’ ì“°ë©´ ê¸°ë³¸ê°’ ë°˜ì˜ë¨

ì´í›„ ë°”ë€ ì„ íƒë„ ì„¸ì…˜ì— ë®ì–´ì¨ì¤˜ì•¼ ìœ ì§€ë¨

ğŸ“¦ ì˜µì…˜:
ë‚´ê°€ ì›í•˜ë©´ app.py ì „ì²´ ìˆ˜ì • ë²„ì „ìœ¼ë¡œ ë¦¬í„´í•´ì¤„ ìˆ˜ë„ ìˆì–´!
ë˜ëŠ” ì§€ê¸ˆ ë°”ë¡œ ë©”ì¼ í…œí”Œë¦¿ë„ ë‹¤ë“¬ì–´ì¤„ê²Œ.

ì–´ë–»ê²Œ í•´ì¤„ê¹Œ?

â€œapp.py ì •ë¦¬ë³¸ ì¤˜â€

â€œë©”ì¼ í…œí”Œë¦¿ ì •ë¦¬í•´ì¤˜â€

â€œì´ì œ ì‹¤ì œ ë°œì†¡ í…ŒìŠ¤íŠ¸í•˜ìâ€

ë§ë§Œ í•´ ì–¸ë‹ˆ ğŸ™Œ

ë‚˜ì˜ ë§:
ì—…ë¡œë“œí•œ ì´ë¯¸ì§€
ì•„ë‹ˆ..ì´ë©”ì¼ ì£¼ì†Œ ì…ë ¥ ì¹¸ì´ ì—†ì–´ ì¡‹ë‹¤êµ¬ ê·¼ë°.. ìš°ë¦¬ êµ¬ê¸€ ì‹œíŠ¸ ë§ì´ì•¼.. 
1ë²ˆ ìœ ì €ê°€ í•˜ë£¨ 2ë²ˆ 9ì‹œ 10ì‹œ ì´ë ‡ê²Œ, ì € í‚¤ì›Œë“œë¡œ ë°›ã„± ã…”í•œê±´ì§€ ì–´ì¼€ ì•Œì•„? 
ChatGPTì˜ ë§:
ì–¸ë‹ˆ! ì§€ê¸ˆ í•µì‹¬ ë‘ ê°€ì§€ ì–˜ê¸°í•´ì¤¬ì§€?
ë‚´ê°€ ì§„ì§œ ê¹”ë”í•˜ê²Œ ì •ë¦¬í•´ì„œ ì„¤ëª…í• ê²Œ ğŸ‘‡

âœ… 1. ì´ë©”ì¼ ì…ë ¥ ì¹¸ì´ ì‚¬ë¼ì§„ ì´ìœ 
ì§€ê¸ˆ UIìƒì— "ì´ë©”ì¼ ì£¼ì†Œ ì…ë ¥" ì¹¸ì´ ì•ˆ ë³´ì´ëŠ” ì´ìœ ëŠ”:

notification_timesë¥¼ ìœ„ì—ì„œ ì„ ì–¸í•˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ elif not notification_times: ì¡°ê±´ì„ ì“°ê³  ìˆì–´ì„œ,
Streamlitì´ ê·¸ ë¸”ë¡ ì „ì²´ë¥¼ ìŠ¤í‚µí•´ë²„ë¦° ìƒí™©ì¼ ê°€ëŠ¥ì„±ì´ ì»¤!

ğŸ”§ í•´ê²° ë°©ë²•
íƒ­2 ì‹œì‘í•˜ìë§ˆì notification_times ê¸°ë³¸ê°’ì„ ë„£ì–´ì¤˜ì•¼ í•´.
ê·¸ ì•„ë˜ìª½ì—ì„œ multiselectê°€ ë‚˜ì˜¤ê¸° ì „ì— ë§ì´ì•¼:

if "notification_times" not in st.session_state:
    st.session_state.notification_times = ["ì˜¤ì „ 9:00"]
ê·¸ë¦¬ê³  ì´ë©”ì¼ ì…ë ¥ í¼ì€ íƒ­2 ì•ˆì— ì•„ë˜ì²˜ëŸ¼ ë¶„ë¦¬ë˜ì–´ ìˆì–´ì•¼ í•´:

st.write("#### ğŸ“§ ì´ë©”ì¼ ë“±ë¡ ë° ìˆ˜ì‹  ê±°ë¶€")
new_email = st.text_input("ì´ë©”ì¼ ì£¼ì†Œ ì…ë ¥", placeholder="example@domain.com")
...
ì´ ë¶€ë¶„ì´ ëˆ„ë½ë˜ì—ˆê±°ë‚˜, Streamlitì´ ë Œë”ë§ ì•ˆ í•˜ê²Œ ë˜ë©´ ì¹¸ì´ ì•ˆ ë– .

âœ… 2. êµ¬ê¸€ ì‹œíŠ¸ êµ¬ì¡°ë¡œëŠ” ëˆ„ê°€ ì–´ë–¤ ì¡°ê±´ìœ¼ë¡œ ë°›ëŠ”ì§€ ì•Œ ìˆ˜ ì—†ë‹¤
ì§€ê¸ˆ êµ¬ì¡°ì—ì„œëŠ” emails, keywords, notification ì‹œíŠ¸ê°€ ì™„ì „ ë¶„ë¦¬ë˜ì–´ ìˆì–´:

emails íƒ­: ì´ë©”ì¼ ì£¼ì†Œ / í™œì„±í™”ë§Œ ìˆê³ 

keywords, notificationì€ ì „ì²´ ì‚¬ìš©ì ê³µí†µ ì„¤ì •ìœ¼ë¡œ ê´€ë¦¬ë¨

â—ï¸ë¬¸ì œì 
ì—¬ëŸ¬ ëª…ì´ ë™ì‹œì— ì„¤ì •ì„ ë°”ê¿”ë„ êµ¬ë¶„ ë¶ˆê°€

ëˆ„ê°€ ì–´ë–¤ í‚¤ì›Œë“œ, ì–´ë–¤ ì‹œê°„ì— ì„¤ì •í–ˆëŠ”ì§€ "ì´ë©”ì¼ ì£¼ì†Œë³„ë¡œ" ì—°ê²°ëœ ë°ì´í„°ê°€ ì—†ìŒ

âœ… í•´ê²° ë°©ë²• (ê¶Œì¥ êµ¬ì¡°)
ë°©ë²• 1. í†µí•© ì‹œíŠ¸ êµ¬ì¡°ë¡œ ë³€ê²½ (í•œ ì¤„ = í•œ ì‚¬ìš©ì)
ì´ë©”ì¼ ì£¼ì†Œ	í™œì„±í™”	ì•Œë¦¼ ì‹œê°„	ë¹ˆë„	í‚¤ì›Œë“œ
user1@naver.com	TRUE	09:00,10:00	í•˜ë£¨ 2íšŒ	ê¸°íš,ê¸°íšì,í”Œë«í¼ê¸°íš
user2@gmail.com	TRUE	08:30	í•˜ë£¨ 1íšŒ	PM,í”„ë¡œë•íŠ¸,ì„œë¹„ìŠ¤ê¸°íš
ğŸ‘‰ ì´ëŸ¬ë©´ í•œ ì¤„ì´ í•œ ìœ ì €, ì„¤ì •ì„ êµ¬ì²´ì ìœ¼ë¡œ ì €ì¥ ê°€ëŠ¥í•¨

ë°©ë²• 2. í˜„ì¬ êµ¬ì¡° ìœ ì§€ + ì´ë©”ì¼ë³„ ì„¤ì • ì‹œíŠ¸ ì¶”ê°€
ë³„ë„ user_settings ì‹œíŠ¸ë¥¼ ë§Œë“¤ì–´ì„œ:

ì´ë©”ì¼ ì£¼ì†Œ	í‚¤ì›Œë“œ	ì‹œê°„	ë¹ˆë„
user1@naver.com	ê¸°íš,ê¸°íšì,í”Œë«í¼ê¸°íš	09:00,10:00	í•˜ë£¨ 2íšŒ
â†’ ì´ ì‹œíŠ¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë°œì†¡ ëŒ€ìƒì + ì¡°ê±´ì„ ì •í™•íˆ êµ¬ë¶„ ê°€ëŠ¥!

ğŸ›  ì¶”ì²œ
ì§€ê¸ˆ êµ¬ì¡°ì—ì„œëŠ” ì´ë©”ì¼ í•˜ë‚˜ë§Œ ë°›ëŠ” êµ¬ì¡°ë¡œ ì„¤ê³„ëœ ê±°ë‹ˆê¹Œ â†’ êµ¬ì¡° í™•ì¥ ì›í•˜ë©´ ë°˜ë“œì‹œ â€œì´ë©”ì¼ ì£¼ì†Œë³„ ì„¤ì • ì €ì¥â€ ë°©ì‹ìœ¼ë¡œ ë¦¬íŒ©í„°ë§í•´ì•¼ í•´

ì›í•˜ë©´ êµ¬ì¡° ì„¤ê³„ë¶€í„° ì½”ë“œê¹Œì§€ ë¦¬íŒ©í„°ë§ í•´ì¤„ê²Œ

ì–¸ë‹ˆ ì„ íƒí•´ì¤˜:

ğŸ§± â€œì§€ê¸ˆì€ ë‹¨ì¼ ì‚¬ìš©ìë§Œ ì“¸ ê±°ë‹ˆê¹Œ ê·¸ëŒ€ë¡œ ë‘ìâ€

ğŸ”„ â€œì´ë©”ì¼ë³„ ì„¤ì • ì €ì¥ êµ¬ì¡°ë¡œ ë°”ê¿”ì¤˜ (ì‹œíŠ¸ + ì½”ë“œ ë¦¬íŒ©í„°ë§ í¬í•¨)â€

ğŸ›  â€œì¼ë‹¨ UI ì´ë©”ì¼ ì…ë ¥ì¹¸ë§Œ ë³µêµ¬í•˜ê³  ì‹¶ì–´â€

ì§€ê¸ˆ ë°©í–¥ë§Œ ë§í•´ì£¼ë©´ ë‚´ê°€ ë”± ê±°ê¸° ë§ì¶°ì„œ ë„ì™€ì¤„ê²Œ ğŸ˜

ë‚˜ì˜ ë§:
ğŸ”„ â€œì´ë©”ì¼ë³„ ì„¤ì • ì €ì¥ êµ¬ì¡°ë¡œ ë°”ê¿”ì¤˜ (ì‹œíŠ¸ + ì½”ë“œ ë¦¬íŒ©í„°ë§ í¬í•¨)â€ + ì´ë©”ì¼ ì…ë ¥ì¹¸ ë³µêµ¬ 
import streamlit as st
import pandas as pd
from datetime import datetime
import logging
from job_fetcher import JobFetcher
from email_sender import EmailSender
from scheduler import JobScheduler
from user_settings import UserSettings


# í˜ì´ì§€ ì„¤ì •
st.set_page_config(
    page_title="ê¸°íšì ì±„ìš© ì•Œë¦¬ë¯¸",
    page_icon="ğŸ’¼",
    layout="wide"
)


# ê°„ë‹¨í•œ ë””ë²„ê·¸ (secrets í™•ì¸)
if st.secrets:
    st.sidebar.success("Secrets ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!")
    
# CSS ìŠ¤íƒ€ì¼
st.markdown("""
<style>
    .job-card {
        background-color: white;
        padding: 1.5rem;
        border-radius: 10px;
        border: 1px solid #eee;
        margin: 10px 0;
        display: flex;
        align-items: start;
    }
    .company-logo {
        width: 50px;
        height: 50px;
        margin-right: 15px;
        object-fit: contain;
    }
    .job-content {
        flex-grow: 1;
    }
    .company-tag {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
        color: white;
        margin-right: 8px;
    }
    .deadline-tag {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
        background-color: #f0f0f0;
        color: #666;
    }
    .company-naver { background-color: #03C75A; }
    .company-naverfinancial { background-color: #1EC800; }
    .company-samsung { background-color: #1428A0; }
    .company-google { background-color: #4285F4; }
    .company-skt { background-color: #EA002C; }
</style>
""", unsafe_allow_html=True)

def main():
    # ì´ˆê¸°í™”
    user_settings = UserSettings()
    job_fetcher = JobFetcher()
    email_sender = EmailSender()
    scheduler = JobScheduler(job_fetcher, email_sender, user_settings)
    
    # í—¤ë”
    st.title("ğŸ¯ ê¸°íšì ì±„ìš© ì•Œë¦¬ë¯¸")
    
    # íƒ­ ìƒì„±
    tab1, tab2 = st.tabs(["ğŸ“‹ ì±„ìš© ê³µê³ ", "âš™ï¸ ì„¤ì •"])
    notification_times = st.session_state.get("notification_times", [])
    st.session_state.notification_times = ["ì˜¤ì „ 9:00"]  # âœ… ê¸°ë³¸ê°’ ì„¤ì •

    with tab1:
        col1, col2 = st.columns([3,1])
        with col1:
            st.write("### ì‹¤ì‹œê°„ ì±„ìš© ê³µê³ ")
        with col2:
            if st.button("ğŸ”„ ì§€ê¸ˆ ê²€ìƒ‰í•˜ê¸°", use_container_width=True):
                with st.spinner("ì±„ìš© ì •ë³´ë¥¼ ê²€ìƒ‰ì¤‘ì…ë‹ˆë‹¤..."):
                    jobs = job_fetcher.fetch_all_jobs(user_settings.get_keywords())
                    if jobs:
                        st.session_state.last_check = datetime.now()
                        st.session_state.last_jobs = jobs
        
        # í•„í„° ì„¹ì…˜
        st.sidebar.title("í•„í„° ì„¤ì •")
        companies = st.sidebar.multiselect(
            "íšŒì‚¬ ì„ íƒ",
            ["ë„¤ì´ë²„", "ë„¤ì´ë²„íŒŒì´ë‚¸ì…œ", "ì‚¼ì„±ì „ì", "êµ¬ê¸€ì½”ë¦¬ì•„", "SKT"],
            default=["ë„¤ì´ë²„", "ë„¤ì´ë²„íŒŒì´ë‚¸ì…œ"]
        )
        
        career_filter = st.sidebar.multiselect(
            "ê²½ë ¥ ì„ íƒ",
            ["ê²½ë ¥", "ì‹ ì…/ê²½ë ¥", "ê²½ë ¥ë¬´ê´€"],
            default=["ê²½ë ¥", "ì‹ ì…/ê²½ë ¥"]
        )
        
        # ì±„ìš© ê³µê³  í‘œì‹œ
        if 'last_jobs' in st.session_state:
            all_jobs = st.session_state.last_jobs + user_settings.get_manual_jobs()
            filtered_jobs = [
                job for job in all_jobs
                if job['company'] in companies and
                job.get('career', 'ê²½ë ¥ë¬´ê´€') in career_filter
            ]
            
            for job in filtered_jobs:
                company_class = job['company'].lower().replace(" ", "")
                st.markdown(f"""
                <div class="job-card">
                    <img src="{job['company_logo']}" class="company-logo" onerror="this.src='https://via.placeholder.com/50'">
                    <div class="job-content">
                        <span class="company-tag company-{company_class}">{job['company']}</span>
                        <span class="deadline-tag">ë§ˆê°ì¼: {job.get('deadline', 'ìƒì‹œì±„ìš©')}</span>
                        <h3>{job['title']}</h3>
                        <p>{job['description'][:200]}...</p>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="color: #666;">{job.get('career', 'ê²½ë ¥ë¬´ê´€')}</span>
                            <a href="{job['link']}" target="_blank">ìì„¸íˆ ë³´ê¸° â†’</a>
                        </div>
                    </div>
                </div>
                """, unsafe_allow_html=True)
    
    with tab2:
        st.write("### âš™ï¸ ì•Œë¦¼ ì„¤ì •")
        
        # ìˆ˜ì‹ ì ê´€ë¦¬
        st.write("#### ğŸ“§ ì´ë©”ì¼ ë“±ë¡ ë° ìˆ˜ì‹  ê±°ë¶€")
        
        new_email = st.text_input("ì´ë©”ì¼ ì£¼ì†Œ ì…ë ¥", placeholder="example@domain.com")
        
        col1, col2 = st.columns(2)
        
        with col1:
            if st.button("ğŸ“© ì´ë©”ì¼ ì¶”ê°€", use_container_width=True):
                receivers = user_settings.get_receivers()
                email_list = [r["ì´ë©”ì¼ ì£¼ì†Œ"] for r in receivers]

                if not new_email:
                    st.warning("ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.")
                elif not notification_times:
                    st.warning("ì•Œë¦¼ ë°›ì„ ì‹œê°„ì„ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”.")
                elif new_email in email_list:
                    st.warning("ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.")
                elif "@" not in new_email or "." not in new_email:
                    st.error("ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.")
                else:
                    receivers.append({"ì´ë©”ì¼ ì£¼ì†Œ": new_email, "í™œì„±í™”": True})
                    user_settings.update_receivers(receivers)
                    st.success("ì´ë©”ì¼ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.")
        
        with col2:
            if st.button("ğŸ›‘ ìˆ˜ì‹  ê±°ë¶€", use_container_width=True):
                receivers = user_settings.get_receivers()
                updated = False
        
                for r in receivers:
                    if r["ì´ë©”ì¼ ì£¼ì†Œ"] == new_email:
                        if not r["í™œì„±í™”"]:
                            st.info("ì´ë¯¸ ìˆ˜ì‹  ê±°ë¶€ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.")
                        else:
                            r["í™œì„±í™”"] = False
                            updated = True
                            st.success("ìˆ˜ì‹  ê±°ë¶€ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.")
                        break
                else:
                    st.warning("ë“±ë¡ë˜ì§€ ì•Šì€ ì´ë©”ì¼ì…ë‹ˆë‹¤.")
        
                if updated:
                    user_settings.update_receivers(receivers)
    # ì•Œë¦¼ ì‹œê°„ ì„¤ì •
    st.write("#### ğŸ“… ì•Œë¦¼ ì‹œê°„ ì„¤ì •")
    col1, col2 = st.columns(2)
    with col1:
        notification_times = st.multiselect(
            "ì•Œë¦¼ ë°›ì„ ì‹œê°„ ì„ íƒ (ìµœëŒ€ 2íšŒ)",
            [
                "ì˜¤ì „ 8:30", "ì˜¤ì „ 9:00", "ì˜¤ì „ 10:00",
                "ì˜¤í›„ 2:00", "ì˜¤í›„ 6:00", "ì˜¤í›„ 9:00"
            ],
            default=notification_times,  # session ê°’ ì‚¬ìš©
            max_selections=2
        )
        st.session_state.notification_times = notification_times  # ë‹¤ì‹œ ì €ì¥
        with col2:
            notification_frequency = st.radio(
                "ì•Œë¦¼ ë¹ˆë„",
                ["í•˜ë£¨ 1íšŒ", "í•˜ë£¨ 2íšŒ"],
                index=0
            )
        
        # í‚¤ì›Œë“œ ì„¤ì •
        st.write("#### ğŸ” í‚¤ì›Œë“œ ì„¤ì •")
        keywords = st.text_area(
            "ê²€ìƒ‰ í‚¤ì›Œë“œ (ì¤„ë°”ê¿ˆìœ¼ë¡œ êµ¬ë¶„)",
            "\n".join(user_settings.get_keywords())
        ).split("\n")
        
        # ìˆ˜ë™ URL ì¶”ê°€
        st.write("#### ğŸ”— ì±„ìš©ê³µê³  ìˆ˜ë™ ì¶”ê°€")
        col3, col4 = st.columns([3, 1])
        with col3:
            manual_url = st.text_input("ì±„ìš©ê³µê³  URL")
        with col4:
            if st.button("ì¶”ê°€", use_container_width=True):
                if manual_url:
                    if not manual_url.startswith(('http://', 'https://')):
                        st.error("ìœ íš¨í•œ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.")
                    else:
                        user_settings.add_manual_job(manual_url)
                        st.success("ì±„ìš©ê³µê³ ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!")
  
        if st.button("ğŸ’¾ ì„¤ì • ì €ì¥", type="primary"):
            user_settings.update_notification_settings(
                times=notification_times,
                frequency=notification_frequency
            )
            user_settings.update_keywords([k.strip() for k in keywords if k.strip()])
            st.success("ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!")
            scheduler.restart()
            
if __name__ == "__main__":
    main()
ChatGPTì˜ ë§:
ì €ì¥ëœ ë©”ëª¨ë¦¬ ì—…ë°ì´íŠ¸ë¨
ì–¸ë‹ˆ ìš”ì²­ ë°›ì€ ê·¸ëŒ€ë¡œ ì´ë©”ì¼ë³„ ê°œë³„ ì„¤ì • ì €ì¥ êµ¬ì¡°ë¡œ ë¦¬íŒ©í„°ë§ ì‹œì‘í• ê²Œ!
ìš°ì„  ì˜¤ëŠ˜ ì •ë¦¬í•  ê±´ 2ë‹¨ê³„ë¡œ ë‚˜ëˆŒê²Œ:

âœ… 1ë‹¨ê³„: êµ¬ê¸€ ì‹œíŠ¸ êµ¬ì¡° ì„¤ê³„ ë³€ê²½
ğŸ“‹ ì‹œíŠ¸ëª…: user_settings
ì´ë©”ì¼ ì£¼ì†Œ	í™œì„±í™”	í‚¤ì›Œë“œ	ì•Œë¦¼ ì‹œê°„	ì•Œë¦¼ ë¹ˆë„
user1@naver.com	TRUE	ê¸°íš,PM,ì„œë¹„ìŠ¤ê¸°íš	08:30,21:00	í•˜ë£¨ 2íšŒ
user2@gmail.com	FALSE	í”Œë«í¼,ê¸°íšì	09:00	í•˜ë£¨ 1íšŒ
ğŸ“Œ ì´ ì‹œíŠ¸ë§Œìœ¼ë¡œë„ ì‚¬ìš©ìë³„ ì¡°ê±´ì„ ì •í™•íˆ ì €ì¥ + ì¡°íšŒ ê°€ëŠ¥í•´.

âœ… 2ë‹¨ê³„: Streamlit ì•± ë¦¬íŒ©í„°ë§ ê³„íš
âœ”ï¸ ì£¼ìš” ë³€ê²½ì‚¬í•­
í•­ëª©	ë³€ê²½ ì „	ë³€ê²½ í›„
ì´ë©”ì¼/ì„¤ì •	ë³„ë„ ì‹œíŠ¸	í•œ ì‹œíŠ¸ì— í†µí•© ì €ì¥ (user_settings)
ìˆ˜ì‹ ì ê´€ë¦¬	receiversë§Œ ë”°ë¡œ ê´€ë¦¬	í‚¤ì›Œë“œ, ì‹œê°„, ë¹ˆë„ í¬í•¨í•œ ì „ì²´ ì„¤ì • ì €ì¥
ì„¤ì • ì €ì¥ ë²„íŠ¼	ê³µí†µ ì„¤ì • ì €ì¥	ì…ë ¥í•œ ì´ë©”ì¼ ê¸°ì¤€ ì„¤ì • ì €ì¥/ì—…ë°ì´íŠ¸
ğŸ›  ë¦¬íŒ©í„°ë§ì— í•„ìš”í•œ ì‘ì—…
ğŸ“ ìƒˆ íŒŒì¼ ì¶”ê°€ í•„ìš”
google_sheets_helper.pyì— ì•„ë˜ í•¨ìˆ˜ë“¤ ì¶”ê°€:

save_user_settings(email, keywords, times, freq)

load_user_settings(email)

ğŸ”§ user_settings.py ìˆ˜ì •
ê¸°ì¡´ get_keywords(), get_notification_settings() ë“± â†’ ì´ë©”ì¼ ê¸°ì¤€ìœ¼ë¡œ ì‘ë™í•˜ë„ë¡ ë³€ê²½

âœ‰ï¸ ê·¸ë¦¬ê³  í˜„ì¬ ìƒíƒœ ì²´í¬
ì–¸ë‹ˆê°€ ì˜¬ë ¤ì¤€ app.py ì½”ë“œëŠ” ì§€ê¸ˆ êµ¬ì¡°ë¡œëŠ” â€œì „ì²´ ì„¤ì •ì„ í•˜ë‚˜ë¡œ ì €ì¥â€í•˜ëŠ” í˜•íƒœë¼
ì´ë©”ì¼ë³„ë¡œ ì €ì¥/ì¡°íšŒí•˜ëŠ” ë¡œì§ì´ ë°˜ì˜ë˜ì§„ ì•Šì€ ìƒíƒœì•¼.

ğŸ‘‡ ë‹¤ìŒ ë‹¨ê³„ ì„ íƒ
âœ… ì§€ê¸ˆ ë°”ë¡œ í•„ìš”í•œ ë¦¬íŒ©í„°ë§ ëŒ€ìƒ ì½”ë“œ ëª©ë¡ ì •ë¦¬í•´ì„œ ë‹¤ ì œê³µí•´ì¤„ê¹Œ?

âœ… ì•„ë‹ˆë©´, ë¨¼ì € google_sheets_helper.pyë¶€í„° ë§Œë“¤ì–´ì¤„ê¹Œ?

ì–¸ë‹ˆ ë§ë§Œ í•´! ì™„ì „ ê¹”ë”í•˜ê²Œ ë§Œë“¤ì–´ì¤„ê²Œ ğŸ˜
(â€œëª¨ë“  íŒŒì¼ ìˆœì„œëŒ€ë¡œ ë‹¤ ë¦¬íŒ©í„°ë§í•´ì¤˜â€ë„ ê°€ëŠ¥í•´!)

ë‚˜ì˜ ë§:
í‚¤ì›Œë“œëŠ” ë¹¼ì, ê³ ì •ìœ¼ë¡œ í•˜ì.
ChatGPTì˜ ë§:
ì €ì¥ëœ ë©”ëª¨ë¦¬ ì—…ë°ì´íŠ¸ë¨
ì¢‹ì•„ ì–¸ë‹ˆ! í‚¤ì›Œë“œëŠ” ê³ ì •ê°’ìœ¼ë¡œ ì²˜ë¦¬í• ê²Œ.
ì´ì œ í›¨ì”¬ ë‹¨ìˆœí•´ì¡Œê³ , ì •ë¦¬í•˜ë©´ ì´ë©”ì¼ë³„ ì €ì¥ í•­ëª©ì€ ì´ë ‡ê²Œ ë”± 3ê°œì•¼:

âœ… ìµœì¢… ì €ì¥ êµ¬ì¡° (user_settings ì‹œíŠ¸)
ì´ë©”ì¼ ì£¼ì†Œ	í™œì„±í™”	ì•Œë¦¼ ì‹œê°„	ì•Œë¦¼ ë¹ˆë„
sojung@naver.com	TRUE	08:30,21:00	í•˜ë£¨ 2íšŒ
ğŸ’¡ í‚¤ì›Œë“œëŠ” ì½”ë“œì—ì„œë§Œ ê³ ì • ë¦¬ìŠ¤íŠ¸ë¡œ ì“°ë©´ ë¼!

DEFAULT_KEYWORDS = [
    "ê¸°íš", "PM", "í”„ë¡œë•íŠ¸ë§¤ë‹ˆì €",
    "í”Œë«í¼ê¸°íš", "ì„œë¹„ìŠ¤ê¸°íš", "ë¹„ì¦ˆë‹ˆìŠ¤ê¸°íš"
]
ë‹¤ìŒ ë‹¨ê³„ëŠ”?
ğŸ“ google_sheets_helper.py - ì´ë©”ì¼ë³„ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° í•¨ìˆ˜ ë§Œë“¤ê¸°

ğŸ§  user_settings.py - ì´ë©”ì¼ ê¸°ì¤€ìœ¼ë¡œ ì„¤ì • ë¶ˆëŸ¬ì˜¤ê³  ì €ì¥

ğŸ–¥ app.py - ì´ë©”ì¼ ì…ë ¥ í›„ ì•Œë¦¼ì‹œê°„/ë¹ˆë„ ì„¤ì • â†’ ì €ì¥

ì‹œì‘ì€ ì—¬ê¸°ì„œ:
â€œ1ë²ˆë¶€í„° ì°¨ê·¼ì°¨ê·¼ í•´ì¤˜ (sheets helper)â€
â€œì „ì²´ ë‹¤ í•œë²ˆì— íŒŒì¼ë³„ë¡œ ì¤˜â€
â€œapp.pyë¶€í„° ë°˜ì˜í• ê²Œâ€

ì–¸ë‹ˆê°€ ì›í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë°”ë¡œ ë¦¬íŒ©í„°ë§í•´ì¤„ê²Œ ğŸ’»âœ¨
ë§ë§Œ í•´!

ë‚˜ì˜ ë§:
ìˆœì°¨ì ìœ¼ë¡œ í•´ì¤˜. 
ChatGPTì˜ ë§:
ì™„ë²½í•´, ì–¸ë‹ˆ!
ì§€ê¸ˆë¶€í„° ìˆœì°¨ì ìœ¼ë¡œ ì´ë©”ì¼ë³„ ì„¤ì • ì €ì¥ êµ¬ì¡° ë¦¬íŒ©í„°ë§ì„ ì•„ë˜ ìˆœì„œë¡œ í•˜ë‚˜ì”© ì§„í–‰í• ê²Œ.

âœ… [1ë‹¨ê³„] google_sheets_helper.py â€“ ì´ë©”ì¼ë³„ ì„¤ì • ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°
ğŸ”§ ğŸ“„ google_sheets_helper.py íŒŒì¼ì— ì¶”ê°€í•  ì½”ë“œ
import gspread
from oauth2client.service_account import ServiceAccountCredentials
import streamlit as st

SHEET_NAME = "user_settings"  # êµ¬ê¸€ ì‹œíŠ¸ íƒ­ ì´ë¦„

def connect_to_gsheet():
    scope = ["https://spreadsheets.google.com/feeds", "https://www.googleapis.com/auth/drive"]
    creds = ServiceAccountCredentials.from_json_keyfile_dict(st.secrets["gcp_service_account"], scope)
    client = gspread.authorize(creds)
    sheet = client.open(SHEET_NAME).worksheet("settings")  # íƒ­ ì´ë¦„ì€ 'settings'
    return sheet

def load_user_settings(email):
    sheet = connect_to_gsheet()
    data = sheet.get_all_records()
    for row in data:
        if row["ì´ë©”ì¼ ì£¼ì†Œ"] == email:
            return {
                "email": row["ì´ë©”ì¼ ì£¼ì†Œ"],
                "active": str(row.get("í™œì„±í™”", "")).upper() == "TRUE",
                "times": row.get("ì•Œë¦¼ ì‹œê°„", "").split(","),
                "frequency": row.get("ì•Œë¦¼ ë¹ˆë„", "í•˜ë£¨ 1íšŒ")
            }
    return None

def save_user_settings(email, active, times, frequency):
    sheet = connect_to_gsheet()
    data = sheet.get_all_records()
    times_str = ",".join(times)

    for idx, row in enumerate(data):
        if row["ì´ë©”ì¼ ì£¼ì†Œ"] == email:
            sheet.update(f"B{idx+2}", [[str(active).upper()]])
            sheet.update(f"C{idx+2}", [[times_str]])
            sheet.update(f"D{idx+2}", [[frequency]])
            return

    # ìƒˆë¡œ ì¶”ê°€
    sheet.append_row([email, str(active).upper(), times_str, frequency])
ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œíŠ¸ êµ¬ì¡° (íƒ­ ì´ë¦„: settings)
ì´ë©”ì¼ ì£¼ì†Œ	í™œì„±í™”	ì•Œë¦¼ ì‹œê°„	ì•Œë¦¼ ë¹ˆë„
user@example.com	TRUE	08:30,21:00	í•˜ë£¨ 2íšŒ
â­ ë‹¤ìŒ ë‹¨ê³„ ì˜ˆê³ 
ë‹¤ìŒì€ [2ë‹¨ê³„] user_settings.py ë¦¬íŒ©í„°ë§
get_email_settings(email)

get_notification_settings(email)

save_settings(email, times, frequency, active) ë“±

ì–¸ë‹ˆ ì´ëŒ€ë¡œ google_sheets_helper.pyë¶€í„° ë¶™ì´ê³ ,
â€œëì–´, ë‹¤ìŒ ë‹¨ê³„ í•´ì¤˜â€ ë¼ê³  ë§í•´ì¤˜!
ë°”ë¡œ ë‹¤ìŒ ë‹¨ê³„ ì´ì–´ê°ˆê²Œ ğŸ”„

ë‚˜ì˜ ë§:
ë¯¸ì•ˆí•œë° í•˜ë‚˜ë§Œ ë” 

ë‚´ê°€ ì±„ìš©ì—…ì²´ ì²´í¬ ì£¼ì†Œë‘ í‚¤ì›Œë“œëŠ” ë‚˜ë§Œ ë”°ë¡œ ì—‘ì…€ì‹œíŠ¸ì— ì…ë ¥í• ê±°ì•¼. ì‹ ì…/ê²½ë ¥ ì—¬ë¶€ê¹Œì§€ êµ¬ë¶„í•´ì„œ ì´ìš©ì ì‚¬ì´ë“œì™€ ì—‘ì…€ ë‚˜ë§Œ ë‹¤ë¥¸ê±°ì§€
ChatGPTì˜ ë§:
ì €ì¥ëœ ë©”ëª¨ë¦¬ ì—…ë°ì´íŠ¸ë¨
ì–¸ë‹ˆ ë„ˆë¬´ ì¢‹ì•„, ê·¸ êµ¬ì¡° ì™„ì „ ê¹”ë”í•´.

ğŸ“Œ ìš”ì•½í•˜ë©´ ì´ë ‡ê²Œ ë˜ëŠ” ê±°ì§€:

âœ… ì‚¬ìš©ìë³„ ì„¤ì • (êµ¬ê¸€ ì‹œíŠ¸: user_settings > settings íƒ­)
ì´ë©”ì¼ ì£¼ì†Œ

í™œì„±í™”

ì•Œë¦¼ ì‹œê°„

ì•Œë¦¼ ë¹ˆë„

â†’ ì¼ë°˜ ì‚¬ìš©ìê°€ ì•±ì—ì„œ ì…ë ¥, ì¡°íšŒ, ìˆ˜ì • ê°€ëŠ¥

âœ… ê´€ë¦¬ì ì „ìš© ì„¤ì • (ì—‘ì…€ì—ì„œ ë„ˆë§Œ ì§ì ‘ ê´€ë¦¬)
íšŒì‚¬ëª…	ê²½ë ¥êµ¬ë¶„	í‚¤ì›Œë“œ ëª©ë¡
ë„¤ì´ë²„	ê²½ë ¥	ê¸°íš, í”Œë«í¼ê¸°íš, PM
ì‚¼ì„±ì „ì	ì‹ ì…/ê²½ë ¥	ì„œë¹„ìŠ¤ê¸°íš, ë¹„ì¦ˆë‹ˆìŠ¤ê¸°íš
íŒŒì¼ì€ ì˜ˆ: company_keywords.xlsx

Streamlit ì•±ì—ì„œëŠ” ìˆ¨ê²¨ì§„ ê´€ë¦¬ì ë¡œì§ìœ¼ë¡œë§Œ ì‚¬ìš©

ì¡°íšŒÂ·í•„í„° ì‹œ ì´ í…Œì´ë¸” ê¸°ë°˜ìœ¼ë¡œ í¬ë¡¤ë§Â·ë§¤ì¹­

ë‹¤ìŒ ë‹¨ê³„ë„ ì—¬ê¸°ì— ë§ì¶°ì„œ ì™„ì „ ë¶„ë¦¬ êµ¬ì¡°ë¡œ ë¦¬íŒ©í„°ë§í•´ì¤„ê²Œ.
ì§€ê¸ˆê¹Œì§€ ì •ë¦¬í•˜ë©´:

ë‹¨ê³„	ë‚´ìš©
âœ… 1ë‹¨ê³„	google_sheets_helper.py ì™„ë£Œ
ğŸ”œ 2ë‹¨ê³„	user_settings.py ë¦¬íŒ©í„°ë§ (ì´ë©”ì¼ë³„ ì„¤ì •)
ğŸ”œ 3ë‹¨ê³„	app.pyì—ì„œ ì´ë©”ì¼ ê¸°ì¤€ ì„¤ì • ì €ì¥ ë° ë¡œë”©
ğŸ”œ 4ë‹¨ê³„	ê´€ë¦¬ììš© company_keywords.xlsx ë¡œë”© ì²˜ë¦¬ (ìˆ¨ê²¨ì§„ ê´€ë¦¬ì ê¸°ëŠ¥)
ì¤€ë¹„ëìœ¼ë©´ â€œ2ë‹¨ê³„ í•´ì¤˜â€ë§Œ ë§í•´ì¤˜ ğŸ™Œ
ë°”ë¡œ ì´ì–´ì„œ ê°ˆê²Œ!

ë‚˜ì˜ ë§:
ê·¼ë° settings ì€ ë‚´ê±°ê³  userinfoê°€ ë§ì§€ ì•Šì„ê¹Œ? 
ChatGPTì˜ ë§:
ë§ì•„, ì–¸ë‹ˆ! ë„¤ê°€ ì§„ì§œ í•µì‹¬ì„ ì •í™•íˆ ì§šì—ˆì–´ ğŸ‘

âœ… êµ¬ê¸€ ì‹œíŠ¸ íƒ­ ì´ë¦„ ì •ë¦¬
ìš©ë„	ì‹œíŠ¸ íƒ­ ì´ë¦„ ì¶”ì²œ	ì´ìœ 
ê´€ë¦¬ì ì „ìš© ì„¤ì •	settings	âœ”ï¸ í¬ë¡¤ë§ ê¸°ì¤€ í‚¤ì›Œë“œ, íšŒì‚¬, ê²½ë ¥ êµ¬ë¶„ ë“± â†’ ë„ˆë§Œ ê´€ë¦¬í•˜ëŠ” ì„¤ì •
ì‚¬ìš©ìë³„ ì„¤ì • ì €ì¥	userinfo	âœ”ï¸ ì´ë©”ì¼/ì‹œê°„/ë¹ˆë„ ë“± ì‚¬ìš©ì ê°œë³„ ì„¤ì • â†’ ì‚¬ìš©ìë³„ ì •ë³´ë‹ˆê¹Œ userinfoê°€ ë”± ë§ì•„!
ğŸ“Œ ê·¸ë˜ì„œ êµ¬ì¡°ëŠ” ì´ë ‡ê²Œ:
ğŸ“ êµ¬ê¸€ ìŠ¤í”„ë ˆë“œì‹œíŠ¸ ë‚´ íƒ­ êµ¬ì„±
settings
â†’ ë„ˆë§Œ ì§ì ‘ ìˆ˜ì • (í¬ë¡¤ë§ í•„í„° ê¸°ì¤€: íšŒì‚¬ëª…, ê²½ë ¥, í‚¤ì›Œë“œ)

userinfo
â†’ Streamlit ì•±ì—ì„œ ì‚¬ìš©ìë“¤ì´ ì„¤ì • ì €ì¥í•  ê³³
â†’ ì´ë©”ì¼ ì£¼ì†Œ / í™œì„±í™” / ì•Œë¦¼ ì‹œê°„ / ì•Œë¦¼ ë¹ˆë„

âœ… ì½”ë“œì— ë°˜ì˜í•  ë¶€ë¶„
# ë³€ê²½ ì „
sheet = client.open("user_settings").worksheet("settings")

# ë³€ê²½ í›„
sheet = client.open("user_settings").worksheet("userinfo")
â†’ ì´ê±¸ load_user_settings(), save_user_settings() ë‘˜ ë‹¤ ë°”ê¿”ì£¼ë©´ ë¼.

ê·¸ëŸ¼ ì–¸ë‹ˆ,
ë°”ë¡œ 2ë‹¨ê³„ user_settings.py ë¦¬íŒ©í„°ë§ ê°€ë„ ë ê¹Œ?
â€œ2ë‹¨ê³„ í•´ì¤˜â€ë¼ê³  ë§í•´ì¤˜ ğŸ™Œ

ë‚˜ì˜ ë§:
user_settings.py
ChatGPTì˜ ë§:
ì–¸ë‹ˆ, user_settings.py ë¦¬íŒ©í„°ë§ ì™„ì„±í–ˆì–´!
ì´ì œ ì´ í´ë˜ìŠ¤ëŠ” ë‹¤ìŒì²˜ëŸ¼ ë”± ì •ë¦¬ëœ ì—­í• ë§Œ í•´:

âœ… ì£¼ìš” ê¸°ëŠ¥
ë©”ì„œë“œ	ì„¤ëª…
set_email(email)	ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì´ë©”ì¼ ë“±ë¡ & ì„¤ì • ë¡œë”©
get_keywords()	ê³ ì • í‚¤ì›Œë“œ ë°˜í™˜
get_notification_settings()	ì•Œë¦¼ ì‹œê°„/ë¹ˆë„ ë°˜í™˜
update_notification_settings(times, frequency)	ì‚¬ìš©ì ì„¤ì • ì €ì¥
set_active(True/False)	ìˆ˜ì‹  í™œì„±í™” / ê±°ë¶€ ì„¤ì •
get_email()	í˜„ì¬ ì‚¬ìš©ì ì´ë©”ì¼ ë°˜í™˜
ğŸ“Œ ë‚´ë¶€ì ìœ¼ë¡œ Google Sheets userinfo íƒ­ ì‚¬ìš©
ì´ì œ ì§„ì§œ ì‚¬ìš©ìë³„ ì•Œë¦¼ ì„¤ì • êµ¬ì¡°ê°€ ì™„ì„±ëì–´ ğŸ¯
ì´ì œ app.pyì—ì„œ ì´ê±¸ ì¨ì„œ ì‹¤ì œë¡œ ì €ì¥í•˜ê³  ë³´ì—¬ì£¼ë©´ ë¼.

ì´ì œ ë‹¤ìŒì€ ğŸ‘‰ app.pyì— ì´ êµ¬ì¡° ë§ì¶°ì„œ ì ìš©í•´ì¤„ê²Œ.

â€œapp.py 3ë‹¨ê³„ í•´ì¤˜â€ë¼ê³  ë§í•´ì¤˜ ğŸ™Œ

ë‚˜ì˜ ë§:
import streamlit as st
from datetime import datetime
from google_sheets_helper import (
    read_receivers, write_receivers,
    read_keywords, write_keywords,
    read_notification_settings, write_notification_settings
)

class UserSettings:
    def __init__(self):
        # ì´ë©”ì¼ ë¡œê·¸ì¸ ì •ë³´ (secretsì—ì„œë§Œ ìœ ì§€)
        if 'email_settings' not in st.session_state:
            try:
                st.session_state.email_settings = {
                    'sender_email': st.secrets["SENDER_EMAIL"],
                    'sender_password': st.secrets["SENDER_PASSWORD"],
                }
            except Exception as e:
                st.warning("ì´ë©”ì¼ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. Streamlit Secretsì— SENDER_EMAIL, SENDER_PASSWORDë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.")
                st.session_state.email_settings = {
                    'sender_email': "",
                    'sender_password': "",
                }

        # ìˆ˜ì‹ ì ì´ˆê¸°í™”
        if 'receivers' not in st.session_state:
            st.session_state.receivers = read_receivers()

        # í‚¤ì›Œë“œ ì´ˆê¸°í™”
        if 'keywords' not in st.session_state:
            st.session_state.keywords = read_keywords()

        # ì•Œë¦¼ ì„¤ì • ì´ˆê¸°í™”
        if 'notification_settings' not in st.session_state:
            st.session_state.notification_settings = read_notification_settings()

        # ìˆ˜ë™ ì±„ìš©ê³µê³ ëŠ” ë¡œì»¬ ìƒíƒœì—ë§Œ ì €ì¥
        if 'manual_jobs' not in st.session_state:
            st.session_state.manual_jobs = []

    def get_email_settings(self):
        return st.session_state.email_settings

    def get_notification_settings(self):
        return st.session_state.notification_settings

    def get_keywords(self):
        return st.session_state.keywords

    def get_receivers(self):
        return st.session_state.receivers

    def get_manual_jobs(self):
        return st.session_state.manual_jobs

    def add_manual_job(self, url):
        st.session_state.manual_jobs.append({
            'company': "ìˆ˜ë™ ì¶”ê°€",
            'company_logo': "https://via.placeholder.com/50",
            'title': "ìˆ˜ë™ ì¶”ê°€ëœ ì±„ìš©ê³µê³ ",
            'description': url,
            'link': url,
            'career': "ê²½ë ¥ë¬´ê´€",
            'deadline': "ìƒì‹œì±„ìš©",
            'added_at': datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        })

    def update_notification_settings(self, times, frequency):
        converted_times = [self._convert_to_24h_format(t) for t in times]
        updated = {
            'times': converted_times,
            'frequency': frequency
        }
        st.session_state.notification_settings = updated
        write_notification_settings(updated)

    def update_keywords(self, keywords):
        cleaned = [k.strip() for k in keywords if k.strip()]
        st.session_state.keywords = cleaned
        write_keywords(cleaned)

    def update_receivers(self, receivers):
        st.session_state.receivers = receivers
        write_receivers(receivers)

    def _convert_to_24h_format(self, time_str):
        """ì‹œê°„ì„ 24ì‹œê°„ í˜•ì‹ìœ¼ë¡œ ë³€í™˜"""
        if "ì˜¤ì „" in time_str:
            time = time_str.replace("ì˜¤ì „ ", "")
            hour, minute = map(int, time.split(":"))
            if hour == 12:
                hour = 0
        else:  # ì˜¤í›„
            time = time_str.replace("ì˜¤í›„ ", "")
            hour, minute = map(int, time.split(":"))
            if hour != 12:
                hour += 12
        return f"{hour:02d}:{minute:02d}"

ì—¬ê¸°ì— ì–´ë”” ë„£ìœ¼ë©´ë¼? ì¶”ê°€í•œê±°..
ChatGPTì˜ ë§:
ì–¸ë‹ˆê°€ ì§€ê¸ˆ ë¶™ì—¬ì¤€ ê¸°ì¡´ user_settings.pyëŠ”
**ì´ì „ êµ¬ì¡°(ê³µí†µ ìˆ˜ì‹ ì/ì•Œë¦¼ ì„¤ì • ì €ì¥)**ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë§Œë“¤ì–´ì¡Œê³ ,
ì´ì œ ìš°ë¦¬ê°€ ë§Œë“  ì´ë©”ì¼ë³„ ì‚¬ìš©ì ì„¤ì • ì €ì¥ êµ¬ì¡°ëŠ” ì´ êµ¬ì¡°ë‘ ì™„ì „íˆ ë‹¤ë¥´ê²Œ ì‘ë™í•´.

âœ… ì •ë¦¬í•˜ìë©´
ì§€ê¸ˆ ë¶™ì—¬ì¤€ ì´ íŒŒì¼ì€ âŒ ê¸°ì¡´ êµ¬ì¡°ìš© (read_receivers, read_keywords ë“±)
ìš°ë¦¬ê°€ ë§Œë“  ê±´ â­•ï¸ ì‹ ê·œ êµ¬ì¡°ìš© (userinfo ì‹œíŠ¸ ê¸°ì¤€ ì´ë©”ì¼ë³„ ì €ì¥)

âœ… ì§€ê¸ˆ í•´ì•¼ í•  ê²ƒ
ë°©ë²• 1: ê¸°ì¡´ ì½”ë“œì— ë®ì–´ì“°ê¸° ì—†ì´ ìƒˆ êµ¬ì¡°ë¡œ ëŒ€ì²´ (ê¶Œì¥)
ì•„ê¹Œ ë‚´ê°€ ë§Œë“¤ì–´ì¤€ user_settings.py (ì—¬ê¸° ë§í¬)ë¡œ ì™„ì „íˆ êµì²´í•˜ë©´ ë¼.

ğŸ‘‰ ê¸°ì¡´ì— ìˆë˜ í•¨ìˆ˜ë“¤ì€ ëª¨ë‘ í•„ìš” ì—†ì–´ì§€ê³ ,

get_keywords()ëŠ” ê³ ì • ë¦¬ìŠ¤íŠ¸

get_notification_settings()ëŠ” ì´ë©”ì¼ë³„ë¡œ ì¡°íšŒ

update_notification_settings()ëŠ” ì´ë©”ì¼ ê¸°ì¤€ìœ¼ë¡œ ì €ì¥

ğŸ” ì •í™•íˆ ë°”ê¿”ì•¼ í•  ë¶€ë¶„
ê¸°ì¡´ í•¨ìˆ˜	ëŒ€ì²´ë  í•¨ìˆ˜
read_receivers, write_receivers	âŒ ì—†ìŒ (ì‚­ì œ)
read_keywords, write_keywords	âŒ ì—†ìŒ (ê³ ì •ê°’ë§Œ ì‚¬ìš©)
read_notification_settings, write_notification_settings	âŒ ì—†ìŒ (ëŒ€ì‹  load_user_settings, save_user_settings)
âœ… íŒŒì¼ êµì²´ ë°©ë²•
ê¸°ì¡´ user_settings.py â†’ ì´ë¦„ ë°”ê¿”ì„œ ë°±ì—… (ì˜ˆ: user_settings_old.py)

ë‚´ê°€ ë§Œë“¤ì–´ì¤€ user_settings.py ë¶™ì—¬ë„£ê¸° â†’ ì™„ì „ ëŒ€ì²´

app.pyì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ë„ set_email(email)ë¶€í„° ì‹œì‘í•˜ëŠ” ê±¸ë¡œ ë°”ê¿”ì•¼ í•¨

ğŸ“¦ ë‹¤ìŒ ë‹¨ê³„
â€œapp.py ì–´ë–»ê²Œ ë°”ê¿”ì•¼ ë¼?â€ ë¼ê³  ë§í•´ì¤˜
ê·¸ëŸ¼ ë°”ë¡œ ìƒˆ êµ¬ì¡° ë§ì¶°ì„œ app.py ìˆ˜ì •í•´ì¤„ê²Œ!
ğŸ”¥ ì™„ì „ ê°œë³„ ì„¤ì • ì €ì¥ êµ¬ì¡°ë¡œ ë„˜ì–´ê°€ëŠ” íƒ€ì´ë°ì´ì•¼!

ë‚˜ì˜ ë§:
ê·¸ë¦¬ê³  í‚¤ì›Œë“œëŠ” settings ì‹œíŠ¸ì˜ í‚¤ì›Œë“œë¥¼ ì°¸ê³ í•´ì•¼í•´ 
ChatGPTì˜ ë§:
ì €ì¥ëœ ë©”ëª¨ë¦¬ ì—…ë°ì´íŠ¸ë¨
ì¢‹ì•„ ì–¸ë‹ˆ, ì´ì œ êµ¬ì¡° ì™„ì „íˆ ì •ë¦¬ëì–´ ğŸ’¡

âœ… ìµœì¢… êµ¬ì¡°
ğŸ“„ settings ì‹œíŠ¸ (ê´€ë¦¬ì ì „ìš©)
íšŒì‚¬ëª… / ê²½ë ¥ / í‚¤ì›Œë“œ ëª©ë¡

ì‚¬ìš©ìëŠ” ëª» ë°”ê¾¸ê³ , ì•±ì—ì„œëŠ” í‚¤ì›Œë“œ í•„í„°ìš©ìœ¼ë¡œë§Œ ì‚¬ìš©

ğŸ“„ userinfo ì‹œíŠ¸ (ì´ë©”ì¼ë³„ ì„¤ì •)
ì´ë©”ì¼ ì£¼ì†Œ

ì•Œë¦¼ ì‹œê°„ (ì˜ˆ: 08:30,21:00)

ì•Œë¦¼ ë¹ˆë„

í™œì„±í™” ì—¬ë¶€

ğŸ“Œ í‚¤ì›Œë“œ ì²˜ë¦¬ ë°©ì‹
user_settings.pyì—ì„œëŠ” ë” ì´ìƒ DEFAULT_KEYWORDS ê³ ì •í•˜ì§€ ì•Šê³ ,

google_sheets_helper.pyì— read_admin_keywords() í•¨ìˆ˜ ë§Œë“¤ì–´ì„œ â†’
settings ì‹œíŠ¸ì—ì„œ í‚¤ì›Œë“œë§Œ ì¶”ì¶œí•´ ì‚¬ìš©

ğŸ”œ ë‹¤ìŒ ìˆœì„œ
 google_sheets_helper.py â†’ read_admin_keywords() ì¶”ê°€

 user_settings.py â†’ get_keywords() ìˆ˜ì • (ìœ„ í•¨ìˆ˜ í˜¸ì¶œ)

 app.pyëŠ” ë” ì´ìƒ í‚¤ì›Œë“œ ì…ë ¥ ì•ˆ ë°›ë„ë¡ ë³€ê²½

ì‹œì‘í•´ë³¼ê¹Œ?

â€œ1ë‹¨ê³„ í‚¤ì›Œë“œ ì½ê¸° í•¨ìˆ˜ ë§Œë“¤ì–´ì¤˜â€
ë¼ê³  ë§í•´ì£¼ë©´ ë°”ë¡œ google_sheets_helper.pyë¶€í„° ì‘ì—… ì‹œì‘í• ê²Œ! ğŸ˜

ë‚˜ì˜ ë§:
ì•„ ê·¸ë¦¬ê³  ë¯¸ì•ˆí•œë° ìœ ì €ì¸í¬ì— ì‹ ì…/ê²½ë ¥ ì´ê²ƒê³  êµ¬ë¶„ìœ¼ë¡œ ë„£ì–´ì•¼ ê²Ÿì–´ uiì— ë…¸ì¶œí•˜ê³ 
ChatGPTì˜ ë§:
ì €ì¥ëœ ë©”ëª¨ë¦¬ ì—…ë°ì´íŠ¸ë¨
ì¢‹ì•„ ì–¸ë‹ˆ! ì´ì œ êµ¬ì¡°ëŠ” ì´ë ‡ê²Œ í™•ì •ì´ì•¼ ğŸ”§

âœ… userinfo ì‹œíŠ¸ ìµœì¢… êµ¬ì¡°
ì´ë©”ì¼ ì£¼ì†Œ	í™œì„±í™”	ì•Œë¦¼ ì‹œê°„	ì•Œë¦¼ ë¹ˆë„	ê²½ë ¥ êµ¬ë¶„
user@naver.com	TRUE	08:30,21:00	í•˜ë£¨ 2íšŒ	ê²½ë ¥
ğŸ“Œ â€œì‹ ì…â€, â€œì‹ ì…/ê²½ë ¥â€, â€œê²½ë ¥â€, â€œê²½ë ¥ë¬´ê´€â€ ì¤‘ ì„ íƒì§€ë¡œ UIì— ì œê³µ

âœ¨ Streamlit UI ë°˜ì˜ ë°©í–¥
UIì—ì„œ selectbox() ë˜ëŠ” radio()ë¡œ ê²½ë ¥ ì„ íƒ

ì €ì¥ ì‹œ save_user_settings(email, active, times, freq, career)ë¡œ í•¨ê»˜ ì €ì¥

ë¡œë”© ì‹œì—ë„ career ê°’ í¬í•¨í•´ì„œ load_user_settings()ì—ì„œ ë°˜í™˜

â­ ë‹¤ìŒ ì§„í–‰ ìˆœì„œ
ë‹¤ìŒ ë‹¨ê³„ë¶€í„°ëŠ” ì´ë ‡ê²Œ ì´ì–´ì§ˆê²Œ:
google_sheets_helper.py ì—…ë°ì´íŠ¸

í‚¤ì›Œë“œ ë¶ˆëŸ¬ì˜¤ê¸° (read_admin_keywords())

load_user_settings() + save_user_settings()ì— career í¬í•¨

user_settings.py ì—…ë°ì´íŠ¸

get_keywords()ëŠ” ê´€ë¦¬ì ì‹œíŠ¸ ê¸°ë°˜ìœ¼ë¡œ

career ì„¤ì •ë„ ì €ì¥/ì¡°íšŒ í¬í•¨

app.py UI ìˆ˜ì •

ì‹ ì…/ê²½ë ¥ ì„ íƒ UI ì¶”ê°€ + ì„¤ì • ì €ì¥ ì—°ë™

ì¤€ë¹„ëìœ¼ë©´ ë§í•´ì¤˜!

ğŸ‘‰ â€œ1ë‹¨ê³„ helper.py ì—…ë°ì´íŠ¸ í•´ì¤˜â€
ë°”ë¡œ ì‹œì‘í• ê²Œ ğŸ˜

ë‚˜ì˜ ë§:
ê·¸ë¦¬ê³  ê´€ë¦¬ìê´€ë¦¬ì ì „ìš©ì€ íšŒì‚¬ëª… í‚¤ì›Œë“œ ëª©ë¡ ë­ í¬ë¡¤ë§í•  ì‚¬ì´íŠ¸ ë§¤ì¹­í•´ì„œ ë‘ëŠ”ê±° ì •ë„ê²Ÿë„¤?
ChatGPTì˜ ë§:
ì‘, ì •í™•í•´ ì–¸ë‹ˆ!
**ê´€ë¦¬ì ì „ìš© ì‹œíŠ¸(settings)**ëŠ” ë”± ê·¸ ì—­í• ë§Œ í•˜ë©´ ë¼ â€” ì•„ì£¼ í•µì‹¬ì ì´ê³  ì‹¬í”Œí•˜ê²Œ ì •ë¦¬í•˜ë©´ ì´ë ‡ê²Œ ğŸ‘‡

âœ… ê´€ë¦¬ì ì „ìš© ì‹œíŠ¸ (settings íƒ­) êµ¬ì„±
íšŒì‚¬ëª…	í‚¤ì›Œë“œ ëª©ë¡	ëŒ€ìƒ URL(ë„ë©”ì¸ ë“±)	ê²½ë ¥ êµ¬ë¶„
ë„¤ì´ë²„	ê¸°íš, í”Œë«í¼, PM	recruit.navercorp.com	ê²½ë ¥
ì‚¼ì„±ì „ì	ì„œë¹„ìŠ¤ê¸°íš, ë¹„ì¦ˆë‹ˆìŠ¤ê¸°íš	samsungcareers.com	ì‹ ì…/ê²½ë ¥
SKT	í”„ë¡œë•íŠ¸ë§¤ë‹ˆì €, ì„œë¹„ìŠ¤ê¸°íš	skcareers.com	ê²½ë ¥ë¬´ê´€
âœ… ì‚¬ìš© ëª©ì  (ì•± ë‚´ì—ì„œë§Œ ì°¸ì¡°)
í•­ëª©	ì—­í• 
íšŒì‚¬ëª…	ì±„ìš©ê³µê³ ì—ì„œ í•´ë‹¹ íšŒì‚¬ëª… í¬í•¨ ì‹œ ë§¤ì¹­ ê¸°ì¤€
í‚¤ì›Œë“œ ëª©ë¡	í¬ë¡¤ë§ ê²°ê³¼ í•„í„°ë§ ì‹œ ì ìš©í•  í‚¤ì›Œë“œ
URL or ë„ë©”ì¸	ì–´ë–¤ ì±„ìš©ì‚¬ì´íŠ¸ì—ì„œ í•´ë‹¹ íšŒì‚¬ ê³µê³ ì¸ì§€ êµ¬ë¶„
ê²½ë ¥ êµ¬ë¶„	ìœ ì € ì„¤ì •ê³¼ ë§ëŠ” ê²½ìš°ì—ë§Œ ë³´ì—¬ì¤„ ê³µê³  ê²°ì •ìš©
ğŸ§  ì˜ˆì‹œ ì‚¬ìš© ë¡œì§
job_fetcher.pyì—ì„œ ì±„ìš©ê³µê³  ìˆ˜ì§‘

íšŒì‚¬ëª… í¬í•¨ ì—¬ë¶€ + ë„ë©”ì¸ ë§¤ì¹­ + í‚¤ì›Œë“œ í¬í•¨ ì—¬ë¶€ â†’ í†µê³¼ëœ ê³µê³ ë§Œ ì €ì¥

ìœ ì € ì„¤ì •ê³¼ ê°™ì€ ê²½ë ¥ ê¸°ì¤€ì¼ ê²½ìš°ì—ë§Œ ë°œì†¡ ëŒ€ìƒìœ¼ë¡œ ì‚¬ìš©

ğŸ“Œ Streamlit ì•±ì—ì„œëŠ” ë³´ì—¬ì£¼ì§€ ì•ŠìŒ
ìˆ¨ê²¨ì§„ ê´€ë¦¬ì ë¡œì§

ì§ì ‘ ì—‘ì…€ì—ì„œë§Œ ê´€ë¦¬

ì•±ì€ ì´ ì‹œíŠ¸ë¥¼ read-onlyë¡œë§Œ ì°¸ì¡°

ì–¸ë‹ˆê°€ ë”± ì´ ë°©í–¥ ì¡ì€ ê±° ì •ë§ ì˜í–ˆì–´.
ë‹¤ìŒì€ google_sheets_helper.py ë¶€í„° ë°”ë¡œ ì´ì–´ì„œ ì‘ì—…í• ê¹Œ?

ğŸ‘‰ â€œ1ë‹¨ê³„ helper.py ë§Œë“¤ì–´ì¤˜â€
í•œë§ˆë””ë§Œ í•´ì¤˜ ğŸ™Œ

ë‚˜ì˜ ë§:
ë¯¸ì•ˆí•œë°;; í‚¤ì›Œë“œëŠ” ë”´ ì‹œíŠ¸ì— ë¹¼ì•¼ê²Ÿë‹¤ 
ê¸°íš,ê¸°íšì,í”Œë«í¼ê¸°íš,í”Œë«í¼ ê¸°íš,ì„œë¹„ìŠ¤,ì„œë¹„ìŠ¤ ê¸°íš,í”Œë«í¼,ì„œë¹„ìŠ¤ê¸°íš,PO,PM, í”„ë¡œì íŠ¸ë§¤ë‹ˆì € 
ChatGPTì˜ ë§:
ì €ì¥ëœ ë©”ëª¨ë¦¬ ì—…ë°ì´íŠ¸ë¨
ì¢‹ì•„ ì–¸ë‹ˆ! ë³€ê²½ ì™„ë²½í•˜ê²Œ ë°˜ì˜í–ˆì–´ ğŸ’¡
ì´ì œ êµ¬ì¡°ëŠ” ì´ë ‡ê²Œ ì •ë¦¬ë¼:

âœ… ìµœì¢… ì‹œíŠ¸ êµ¬ì¡° ìš”ì•½
ì‹œíŠ¸ ì´ë¦„	ìš©ë„	ìˆ˜ì • ê¶Œí•œ
userinfo	ì‚¬ìš©ìë³„ ì„¤ì • (ì´ë©”ì¼, ì‹œê°„, ë¹ˆë„, ê²½ë ¥)	ì‚¬ìš©ì ì…ë ¥ ê°€ëŠ¥
settings	íšŒì‚¬ëª… + ë„ë©”ì¸ + ê²½ë ¥êµ¬ë¶„ ë§¤ì¹­ìš©	ê´€ë¦¬ìë§Œ ì§ì ‘ ê´€ë¦¬
keywords	í¬ë¡¤ë§ í•„í„°ìš© í‚¤ì›Œë“œ ëª©ë¡ (1ì—´ì”© ë‚˜ì—´)	ê´€ë¦¬ìë§Œ ì§ì ‘ ê´€ë¦¬
âœ… ì˜ˆì‹œ: keywords ì‹œíŠ¸
í‚¤ì›Œë“œ
ê¸°íš
ê¸°íšì
í”Œë«í¼ê¸°íš
í”Œë«í¼ ê¸°íš
ì„œë¹„ìŠ¤
ì„œë¹„ìŠ¤ ê¸°íš
í”Œë«í¼
ì„œë¹„ìŠ¤ê¸°íš
PO
PM
í”„ë¡œì íŠ¸ë§¤ë‹ˆì €
âœ… ì²˜ë¦¬ ë°©ì‹
ì•±ì—ì„œëŠ” keywords ì‹œíŠ¸ì—ì„œ í‚¤ì›Œë“œ ëª©ë¡ì„ ì½ê¸°ë§Œ í•¨

ì‚¬ìš©ìë³„ í‚¤ì›Œë“œ ì„¤ì • ì—†ì´ ì´ ëª©ë¡ë§Œ ê¸°ì¤€ìœ¼ë¡œ í•„í„°ë§

ì½”ë“œì—ì„œëŠ” read_keywords() í•¨ìˆ˜ë¡œ ë¶ˆëŸ¬ì™€ ì‚¬ìš©

ì´ì œ ì§„ì§œ ì™„ë²½í•˜ê²Œ ìª¼ê°  êµ¬ì¡°ì•¼!
ğŸ‘‰ ë°”ë¡œ ì´ì–´ì„œ google_sheets_helper.py ë§Œë“¤ì–´ë„ ë ê¹Œ?
â€œ1ë‹¨ê³„ helper.py ë§Œë“¤ì–´ì¤˜â€ë¼ê³  ë§í•´ì¤˜, ë°”ë¡œ ë¶™ì—¬ì¤„ê²Œ ğŸ™Œ

ë‚˜ì˜ ë§:
settingì—ëŠ” ê²½ë ¥ ë¹¼
ChatGPTì˜ ë§:
ì €ì¥ëœ ë©”ëª¨ë¦¬ ì—…ë°ì´íŠ¸ë¨
ì•Œê² ì–´ ì–¸ë‹ˆ!
settings ì‹œíŠ¸ì—ì„œ ê²½ë ¥ êµ¬ë¶„ì€ ì œê±°í•˜ê³ , ì´ì œëŠ” ì˜¤ì§ ì•„ë˜ 3ê°€ì§€ë§Œ ê´€ë¦¬í•˜ë©´ ë¼:

âœ… ê´€ë¦¬ì ì „ìš© settings ì‹œíŠ¸ ìµœì¢… êµ¬ì„±
íšŒì‚¬ëª…	í‚¤ì›Œë“œ ëª©ë¡	ëŒ€ìƒ URL (ë„ë©”ì¸ ë“±)
ë„¤ì´ë²„	ê¸°íš, í”Œë«í¼, PM	recruit.navercorp.com
ì‚¼ì„±ì „ì	ì„œë¹„ìŠ¤ê¸°íš, ë¹„ì¦ˆë‹ˆìŠ¤ê¸°íš	samsungcareers.com
ğŸ“Œ ê²½ë ¥ êµ¬ë¶„ì€ ì´ì œ ì‚¬ìš©ìë³„ ì„¤ì •ì¸ userinfo ì‹œíŠ¸ì—ì„œë§Œ ê´€ë¦¬í•´!
ì´ê±¸ ê¸°ì¤€ìœ¼ë¡œ í¬ë¡¤ë§/ë§¤ì¹­/í•„í„°ë§ ì§„í–‰í•˜ë©´ ë¼.

ì´ì œ ë‹¤ìŒìœ¼ë¡œ google_sheets_helper.py ì‹œì‘í•  ì¤€ë¹„ ëì–´ ğŸ™Œ
ğŸ‘‰ "1ë‹¨ê³„ helper.py ë§Œë“¤ì–´ì¤˜" ë¼ê³  ë§í•´ì¤˜, ì½”ë“œ ë°”ë¡œ ë¶™ì—¬ì¤„ê²Œ.

ë‚˜ì˜ ë§:
ê·¸ëŸ¼ ì˜í–¥ ë°›ëŠ” ë¶€ë¶„ë“¤ì´ ì‡ê²Ÿì§€?
ì¼ë‹¨ user_settings.py ì•„ë˜ ë¦¬íŒ©í† ë§


import streamlit as st
from datetime import datetime
from google_sheets_helper import (
    read_receivers, write_receivers,
    read_keywords, write_keywords,
    read_notification_settings, write_notification_settings
)

class UserSettings:
    def __init__(self):
        # ì´ë©”ì¼ ë¡œê·¸ì¸ ì •ë³´ (secretsì—ì„œë§Œ ìœ ì§€)
        if 'email_settings' not in st.session_state:
            try:
                st.session_state.email_settings = {
                    'sender_email': st.secrets["SENDER_EMAIL"],
                    'sender_password': st.secrets["SENDER_PASSWORD"],
                }
            except Exception as e:
                st.warning("ì´ë©”ì¼ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. Streamlit Secretsì— SENDER_EMAIL, SENDER_PASSWORDë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.")
                st.session_state.email_settings = {
                    'sender_email': "",
                    'sender_password': "",
                }

        # ìˆ˜ì‹ ì ì´ˆê¸°í™”
        if 'receivers' not in st.session_state:
            st.session_state.receivers = read_receivers()

        # í‚¤ì›Œë“œ ì´ˆê¸°í™”
        if 'keywords' not in st.session_state:
            st.session_state.keywords = read_keywords()

        # ì•Œë¦¼ ì„¤ì • ì´ˆê¸°í™”
        if 'notification_settings' not in st.session_state:
            st.session_state.notification_settings = read_notification_settings()

        # ìˆ˜ë™ ì±„ìš©ê³µê³ ëŠ” ë¡œì»¬ ìƒíƒœì—ë§Œ ì €ì¥
        if 'manual_jobs' not in st.session_state:
            st.session_state.manual_jobs = []

    def get_email_settings(self):
        return st.session_state.email_settings

    def get_notification_settings(self):
        return st.session_state.notification_settings

    def get_keywords(self):
        return st.session_state.keywords

    def get_receivers(self):
        return st.session_state.receivers

    def get_manual_jobs(self):
        return st.session_state.manual_jobs

    def add_manual_job(self, url):
        st.session_state.manual_jobs.append({
            'company': "ìˆ˜ë™ ì¶”ê°€",
            'company_logo': "https://via.placeholder.com/50",
            'title': "ìˆ˜ë™ ì¶”ê°€ëœ ì±„ìš©ê³µê³ ",
            'description': url,
            'link': url,
            'career': "ê²½ë ¥ë¬´ê´€",
            'deadline': "ìƒì‹œì±„ìš©",
            'added_at': datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        })

    def update_notification_settings(self, times, frequency):
        converted_times = [self._convert_to_24h_format(t) for t in times]
        updated = {
            'times': converted_times,
            'frequency': frequency
        }
        st.session_state.notification_settings = updated
        write_notification_settings(updated)

    def update_keywords(self, keywords):
        cleaned = [k.strip() for k in keywords if k.strip()]
        st.session_state.keywords = cleaned
        write_keywords(cleaned)

    def update_receivers(self, receivers):
        st.session_state.receivers = receivers
        write_receivers(receivers)

    def _convert_to_24h_format(self, time_str):
        """ì‹œê°„ì„ 24ì‹œê°„ í˜•ì‹ìœ¼ë¡œ ë³€í™˜"""
        if "ì˜¤ì „" in time_str:
            time = time_str.replace("ì˜¤ì „ ", "")
            hour, minute = map(int, time.split(":"))
            if hour == 12:
                hour = 0
        else:  # ì˜¤í›„
            time = time_str.replace("ì˜¤í›„ ", "")
            hour, minute = map(int, time.split(":"))
            if hour != 12:
                hour += 12
        return f"{hour:02d}:{minute:02d}"
ChatGPTì˜ ë§:
ë¦¬íŒ©í„°ë§ ì™„ë£Œí–ˆì–´, ì–¸ë‹ˆ!
ì´ì œ user_settings.pyëŠ” ì™„ì „íˆ ìƒˆ êµ¬ì¡°ì— ë§ì¶° ì´ë ‡ê²Œ ë°”ë€Œì—ˆì–´:

âœ… ì£¼ìš” ë³€ê²½ì‚¬í•­
í•­ëª©	ì„¤ëª…
read_keywords ì œê±°	ğŸ‘‰ ê´€ë¦¬ììš© read_admin_keywords() ì‚¬ìš©
í‚¤ì›Œë“œ ìˆ˜ì •/ì—…ë°ì´íŠ¸ ì œê±°	ğŸ‘‰ ëª¨ë“  í‚¤ì›Œë“œëŠ” ê´€ë¦¬ì ì‹œíŠ¸ ê¸°ì¤€ ê³ ì •ê°’
ê²½ë ¥ í•„ë“œ ì¶”ê°€	ğŸ‘‰ career í•„ë“œë¥¼ ì‚¬ìš©ì ì„¤ì •ì— í¬í•¨
ì•Œë¦¼ ì„¤ì • ì—…ë°ì´íŠ¸ ì‹œ career í¬í•¨ ì €ì¥	âœ”ï¸ ì´ë©”ì¼ ê¸°ì¤€ìœ¼ë¡œ ì €ì¥ ì™„ì„±
ìˆ˜ë™ ê³µê³ ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€	âœ”ï¸ manual_jobsëŠ” sessionì— ë³´ê´€
ì´ì œ ë‹¤ìŒ ë‹¨ê³„ë¡œ
ğŸ‘‰ google_sheets_helper.py ì—…ë°ì´íŠ¸ ë“¤ì–´ê°ˆê²Œ.

â€œë‹¤ìŒ ë‹¨ê³„ í•´ì¤˜â€ë¼ê³  ë§í•´ì¤˜ ğŸ™Œ
ì „ì²´ ì‚¬ìš©ì ì„¤ì • ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° ë¡œì§ ë°”ë¡œ ë¶™ì—¬ì¤„ê²Œ.

ë‚˜ì˜ ë§:
ìˆ˜ë™ê³µê³ ë¼ëŠ”ê²Œ ë¨¸ì•¼?
ChatGPTì˜ ë§:
ì¢‹ì€ ì§ˆë¬¸ì´ì•¼ ì–¸ë‹ˆ!
**â€œìˆ˜ë™ ê³µê³ â€**ëŠ” ë§ ê·¸ëŒ€ë¡œ í¬ë¡¤ë§ë˜ì§€ ì•Šì€ ì±„ìš©ê³µê³ ë¥¼ ë„¤ê°€ ì§ì ‘ URLë¡œ ì…ë ¥í•´ì„œ ì¶”ê°€í•œ ê³µê³ ë¥¼ ë§í•´.

âœ… ì˜ˆì‹œ ìƒí™©
ë„¤ì´ë²„/ì‚¼ì„±/SKT ì‚¬ì´íŠ¸ì— ì•ˆ ë–  ìˆëŠ”,
ë§í¬ë¡œë§Œ ì¡´ì¬í•˜ëŠ” íŠ¹ë³„í•œ ì±„ìš©ê³µê³ ê°€ ìˆë‹¤ê³  í•´ë´.

ì•±ì—ì„œ ì‚¬ìš©ìê°€ ğŸ”— ì±„ìš©ê³µê³  ìˆ˜ë™ ì¶”ê°€ë€ì— URLì„ ì…ë ¥í•˜ë©´,

user_settings.add_manual_job(url)
â†’ ì´ê±¸ í†µí•´ ê³µê³  í•˜ë‚˜ë¥¼ ì§ì ‘ ì…ë ¥í•´ì„œ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€í•  ìˆ˜ ìˆì–´.

âœ… ì½”ë“œì—ì„œì˜ ì²˜ë¦¬
def add_manual_job(self, url):
    st.session_state.manual_jobs.append({
        'company': "ìˆ˜ë™ ì¶”ê°€",
        'company_logo': "...",
        'title': "ìˆ˜ë™ ì¶”ê°€ëœ ì±„ìš©ê³µê³ ",
        'description': url,
        'link': url,
        ...
    })
â†’ ì¦‰, ì‚¬ìš©ìê°€ ì§ì ‘ ë§í¬ë§Œ ë„£ìœ¼ë©´
ì„ì‹œë¡œ "ìˆ˜ë™ ì¶”ê°€" ê³µê³  ì¹´ë“œê°€ ìƒê¸°ëŠ” ê±°ì•¼.

âœ… íŠ¹ì§•
í•­ëª©	ë‚´ìš©
ì €ì¥ ìœ„ì¹˜	st.session_state.manual_jobs (ë¡œê·¸ì•„ì›ƒ ì‹œ ì‚¬ë¼ì§)
ë³´ì—¬ì£¼ëŠ” ìœ„ì¹˜	í¬ë¡¤ë§ ê³µê³ ì™€ ë™ì¼í•˜ê²Œ ì¹´ë“œ í˜•íƒœë¡œ ë…¸ì¶œë¨
ì´ë©”ì¼ ë°œì†¡	ê¸°ë³¸ì ìœ¼ë¡œ í¬í•¨ë˜ì§€ëŠ” ì•Šì§€ë§Œ, ì›í•˜ë©´ í¬í•¨ ê°€ëŠ¥í•˜ê²Œ í•  ìˆ˜ ìˆìŒ
ğŸ”§ ì„ íƒì§€
â€œì´ ìˆ˜ë™ê³µê³ ë„ ë°œì†¡ ëŒ€ìƒì— ë„£ê³  ì‹¶ì–´â€

â€œì„¸ì…˜ì´ ì•„ë‹ˆë¼ ì‹œíŠ¸ì— ì €ì¥í•˜ê³  ì‹¶ì–´â€

â€œì™„ì „íˆ ì—†ì• ê³  ì‹¶ì–´â€

ì–¸ë‹ˆ ì›í•˜ëŠ” ëŒ€ë¡œ ìˆ˜ì •í•´ì¤„ ìˆ˜ ìˆì–´.
ì–´ë–»ê²Œ í• ë˜? ğŸ˜

ë‚˜ì˜ ë§:
í¬ë¡¤ë§ì´ë¼ëŠ”ê±´.. ëˆ„ê°€ ëˆŒëŸ¬ì•¼ í•˜ëŠ”ê±°ì•¼? ê°‘ìê¸° ê¶ê¸ˆí•˜ë„¤..
ChatGPTì˜ ë§:
ì•„ì£¼ ì¢‹ì€ ì§ˆë¬¸ì´ì•¼, ì–¸ë‹ˆ!
ì§€ê¸ˆê¹Œì§€ ë§Œë“  ì•± ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…í•´ì¤„ê²ŒğŸ‘‡

âœ… â€œí¬ë¡¤ë§â€ì´ë€?
ì±„ìš© ì‚¬ì´íŠ¸(ì˜ˆ: recruit.navercorp.com, samsungcareers.com ë“±)ì— ì ‘ì†í•´ì„œ
ìš°ë¦¬ê°€ ì›í•˜ëŠ” ì±„ìš©ê³µê³  ì •ë³´ë¥¼ ìë™ìœ¼ë¡œ ê°€ì ¸ì˜¤ëŠ” ì‘ì—…ì´ì•¼.

ğŸ¤– ê·¸ëŸ¼ ëˆ„ê°€ í¬ë¡¤ë§ì„ â€œì‹œì‘â€ì‹œì¼œ?
í¬ë¡¤ë§ì€ ë‘ ê°€ì§€ ë°©ë²• ì¤‘ í•˜ë‚˜ë¡œ ì‹¤í–‰ë˜ë„ë¡ ë§Œë“¤ ìˆ˜ ìˆì–´:

âœ… 1. ì‚¬ìš©ìê°€ ë²„íŠ¼ ëˆŒëŸ¬ì„œ ì‹¤í–‰
(ì§€ê¸ˆ ì•±ì— ìˆëŠ” ë°©ì‹ ì¤‘ í•˜ë‚˜)

if st.button(\"ğŸ”„ ì§€ê¸ˆ ê²€ìƒ‰í•˜ê¸°\"):
    jobs = job_fetcher.fetch_all_jobs(...)
ì‚¬ìš©ìê°€ ìˆ˜ë™ìœ¼ë¡œ ğŸ”„ ë²„íŠ¼ ëˆ„ë¥´ë©´ í¬ë¡¤ë§ ì‹œì‘

ìƒˆ ê³µê³ ë¥¼ ê°€ì ¸ì˜¤ê³  ë¦¬ìŠ¤íŠ¸ì— í‘œì‹œë¨

âœ… 2. ìë™ ë°œì†¡ ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ì‹œê°„ ë§ì¶° ì‹¤í–‰
(ìš°ë¦¬ê°€ ë§Œë“  JobSchedulerê°€ ì´ê±°ì•¼)

schedule.every().day.at(\"08:30\").do(self._run_job)
ë§¤ì¼ ì•„ì¹¨ 8:30, ë°¤ 9:00ì— ìë™ ì‹¤í–‰ë¨

fetch_all_jobs()ë¡œ ê³µê³  ìˆ˜ì§‘ â†’ ì´ë©”ì¼ë¡œ ìë™ ì „ì†¡

ğŸ¯ ê²°ë¡ 
ë™ì‘ ë°©ì‹	ëˆ„ê°€ ì‹¤í–‰?	ì–¸ì œ ì‹¤í–‰ë¨?	ì–´ë–¤ ìš©ë„?
ìˆ˜ë™ í¬ë¡¤ë§	ì‚¬ìš©ìê°€ ë²„íŠ¼ í´ë¦­	ì•„ë¬´ ë•Œë‚˜	í™”ë©´ì— ì±„ìš©ê³µê³  ë°”ë¡œ ë³´ê¸°ìš©
ìë™ í¬ë¡¤ë§	ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ì‹¤í–‰	ì„¤ì •í•œ ì‹œê°„	ì´ë©”ì¼ ë°œì†¡ìš© ë°ì´í„° ìˆ˜ì§‘
í•„ìš”í•˜ë©´ ë²„íŠ¼ ëˆŒë €ì„ ë•Œ í¬ë¡¤ë§í•œ ê²°ê³¼ë„ ì´ë©”ì¼ë¡œ ë³´ë‚´ê²Œ í•  ìˆ˜ ìˆì–´!
ë˜ëŠ” ì´ë©”ì¼ ìë™ ë°œì†¡ë„ êº¼ë²„ë¦´ ìˆ˜ë„ ìˆì–´.

ì–¸ë‹ˆê°€ â€œìë™ë§Œ í•˜ê³  ì‹¶ì–´â€ ë˜ëŠ” â€œì§ì ‘ ëˆ„ë¥´ê¸°ë§Œ í•˜ê²Œ í•˜ê³  ì‹¶ì–´â€ë¼ê³  ë§í•˜ë©´ ê±°ê¸°ì— ë§ì¶°ì¤„ê²Œ ğŸ˜
ì–´ë–»ê²Œ í• ê¹Œ?

ë‚˜ì˜ ë§:
ìë™ ë° ë‘˜ë‹¤ 

ChatGPTì˜ ë§:
ì €ì¥ëœ ë©”ëª¨ë¦¬ ì—…ë°ì´íŠ¸ë¨
ì™„ë²½í•´, ì–¸ë‹ˆ! ì§€ê¸ˆê¹Œì§€ ë§Œë“  êµ¬ì¡°ëŠ” ì´ë¯¸ ê·¸ê±¸ ì™„ë²½íˆ ì§€ì›í•˜ê³  ìˆì–´ ğŸ¯
ë‹¤ì‹œ ìš”ì•½í•´ì¤„ê²Œ:

âœ… í˜„ì¬ ì‹œìŠ¤í…œ êµ¬ì¡°
ë°©ì‹	ì‘ë™ ì£¼ì²´	ì‹¤í–‰ ì‹œì 	ìš©ë„
ğŸ”„ ìˆ˜ë™ í¬ë¡¤ë§	ì‚¬ìš©ìê°€ ì§ì ‘ ë²„íŠ¼ í´ë¦­	ì–¸ì œë“ ì§€	ì•±ì—ì„œ ê³µê³ ë¥¼ ì§ì ‘ í™•ì¸
â° ìë™ í¬ë¡¤ë§	ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ìë™ ì‹¤í–‰	ë§¤ì¼ 08:30 / 21:00	ì´ë©”ì¼ ìë™ ë°œì†¡ìš©
âœ¨ ë‘˜ ë‹¤ ë™ì‘ ë°©ì‹ ìœ ì§€í•˜ë©´ì„œ ë” ë˜‘ë˜‘í•˜ê²Œ í•˜ë ¤ë©´?
ìˆ˜ë™ í¬ë¡¤ë§ ê²°ê³¼ë„ last_jobsì— ì €ì¥í•´ì„œ í™”ë©´ì— ì¹´ë“œë¡œ ë³´ì—¬ì£¼ê³ 

ìë™ í¬ë¡¤ë§ì€ scheduler.pyì—ì„œ job_fetcher.fetch_all_jobs() í˜¸ì¶œ í›„ â†’ email_sender.send_emails() ì‹¤í–‰

ì¶”í›„ ì›í•˜ëŠ” ì¡°ê±´ì— ë”°ë¼ ë°œì†¡ ì¡°ê±´ í•„í„°ë§ë„ ê°€ëŠ¥í•¨ (ì˜ˆ: ê²½ë ¥ + í‚¤ì›Œë“œ ë§¤ì¹­ ì •ë„ ì´ìƒë§Œ)

ì´ì œ í•„ìš”í•œ ê±´ ë‘ ê°€ì§€ì•¼:

í¬ë¡¤ë§ ë¡œì§ (job_fetcher.py) â€” íšŒì‚¬ë³„ settings, keywords ê¸°ë°˜ í•„í„°ë§

ìŠ¤ì¼€ì¤„ëŸ¬ (scheduler.py) â€” ì‹œê°„ ë§ì¶° ìë™ ì‹¤í–‰

ì–¸ë‹ˆê°€ â€œí¬ë¡¤ë§ ë¡œì§ ë´ì¤˜â€ ë˜ëŠ”
â€œìŠ¤ì¼€ì¤„ëŸ¬ êµ¬ì¡° ë‹¤ì‹œ ì ê²€í•´ì¤˜â€ë¼ê³  í•˜ë©´
ê·¸ê±¸ë¡œ ë°”ë¡œ ì´ì–´ê°ˆê²Œ ğŸ˜

ë‚˜ì˜ ë§:
import streamlit as st
from datetime import datetime
from google_sheets_helper import (
    read_receivers, write_receivers,
    read_keywords, write_keywords,
    read_notification_settings, write_notification_settings
)

class UserSettings:
    def __init__(self):
        # ì´ë©”ì¼ ë¡œê·¸ì¸ ì •ë³´ (secretsì—ì„œë§Œ ìœ ì§€)
        if 'email_settings' not in st.session_state:
            try:
                st.session_state.email_settings = {
                    'sender_email': st.secrets["SENDER_EMAIL"],
                    'sender_password': st.secrets["SENDER_PASSWORD"],
                }
            except Exception as e:
                st.warning("ì´ë©”ì¼ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. Streamlit Secretsì— SENDER_EMAIL, SENDER_PASSWORDë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.")
                st.session_state.email_settings = {
                    'sender_email': "",
                    'sender_password': "",
                }

        # ìˆ˜ì‹ ì ì´ˆê¸°í™”
        if 'receivers' not in st.session_state:
            st.session_state.receivers = read_receivers()

        # í‚¤ì›Œë“œ ì´ˆê¸°í™”
        if 'keywords' not in st.session_state:
            st.session_state.keywords = read_keywords()

        # ì•Œë¦¼ ì„¤ì • ì´ˆê¸°í™”
        if 'notification_settings' not in st.session_state:
            st.session_state.notification_settings = read_notification_settings()

        # ìˆ˜ë™ ì±„ìš©ê³µê³ ëŠ” ë¡œì»¬ ìƒíƒœì—ë§Œ ì €ì¥
        if 'manual_jobs' not in st.session_state:
            st.session_state.manual_jobs = []

    def get_email_settings(self):
        return st.session_state.email_settings

    def get_notification_settings(self):
        return st.session_state.notification_settings

    def get_keywords(self):
        return st.session_state.keywords

    def get_receivers(self):
        return st.session_state.receivers

    def get_manual_jobs(self):
        return st.session_state.manual_jobs

    def add_manual_job(self, url):
        st.session_state.manual_jobs.append({
            'company': "ìˆ˜ë™ ì¶”ê°€",
            'company_logo': "https://via.placeholder.com/50",
            'title': "ìˆ˜ë™ ì¶”ê°€ëœ ì±„ìš©ê³µê³ ",
            'description': url,
            'link': url,
            'career': "ê²½ë ¥ë¬´ê´€",
            'deadline': "ìƒì‹œì±„ìš©",
            'added_at': datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        })

    def update_notification_settings(self, times, frequency):
        converted_times = [self._convert_to_24h_format(t) for t in times]
        updated = {
            'times': converted_times,
            'frequency': frequency
        }
        st.session_state.notification_settings = updated
        write_notification_settings(updated)

    def update_keywords(self, keywords):
        cleaned = [k.strip() for k in keywords if k.strip()]
        st.session_state.keywords = cleaned
        write_keywords(cleaned)

    def update_receivers(self, receivers):
        st.session_state.receivers = receivers
        write_receivers(receivers)

    def _convert_to_24h_format(self, time_str):
        """ì‹œê°„ì„ 24ì‹œê°„ í˜•ì‹ìœ¼ë¡œ ë³€í™˜"""
        if "ì˜¤ì „" in time_str:
            time = time_str.replace("ì˜¤ì „ ", "")
            hour, minute = map(int, time.split(":"))
            if hour == 12:
                hour = 0
        else:  # ì˜¤í›„
            time = time_str.replace("ì˜¤í›„ ", "")
            hour, minute = map(int, time.split(":"))
            if hour != 12:
                hour += 12
        return f"{hour:02d}:{minute:02d}" ìœ ì € ì…‹íŒ… ì ê²€í•´ì¤˜
ChatGPTì˜ ë§:
ì–¸ë‹ˆ ì´ user_settings.pyëŠ” ì§€ê¸ˆ êµ¬ì¡°ì™€ ë§ì§€ ì•ŠëŠ” ì´ì „ ë²„ì „ì´ì•¼.
í˜„ì¬ ìš°ë¦¬ê°€ ë§Œë“  êµ¬ì¡°ì™€ ë¹„êµí•´ì„œ ì–´ë””ê°€ ì˜ëª»ë˜ì—ˆëŠ”ì§€ ì •í™•í•˜ê²Œ ì§šì–´ì¤„ê²Œ. ğŸ‘‡

ğŸš¨ ë¬¸ì œ ìš”ì•½: ì§€ê¸ˆ ì½”ë“œëŠ” â€œì˜›ë‚  ë°©ì‹â€
ì´ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ì€ êµ¬ì¡°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ê³  ìˆì–´:
êµ¬ì¡° ìš”ì†Œ	í˜„ì¬ ì½”ë“œ ìƒíƒœ
í‚¤ì›Œë“œ ì €ì¥	âœ… ì‚¬ìš©ìë³„ st.session_state
ì•Œë¦¼ ì„¤ì • ì €ì¥	âœ… session + êµ¬ê¸€ ì‹œíŠ¸ì— ì „ì²´ ê³µí†µê°’ ì €ì¥
ìˆ˜ì‹ ì ì €ì¥	âœ… receivers ë¦¬ìŠ¤íŠ¸ ì „ì²´ ì €ì¥
ìˆ˜ë™ ê³µê³ 	âœ… sessionì—ë§Œ ì €ì¥ë¨
í•˜ì§€ë§Œ ì§€ê¸ˆ ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ëŠ” êµ¬ì¡°ëŠ” ì´ê±°ì•¼ ğŸ‘‡

âœ… ìƒˆ êµ¬ì¡° ê¸°ì¤€
ì„¤ì • í•­ëª©	ì €ì¥ ìœ„ì¹˜	êµ¬ë¶„ ë°©ì‹
í‚¤ì›Œë“œ ëª©ë¡	keywords ì‹œíŠ¸ (ê´€ë¦¬ì ì „ìš©)	ê³ ì •ê°’ (ëª¨ë“  ìœ ì € ê³µí†µ)
ì‚¬ìš©ì ì„¤ì • (ì‹œê°„, ë¹ˆë„, ê²½ë ¥)	userinfo ì‹œíŠ¸	ì´ë©”ì¼ ê¸°ì¤€ ê°œë³„ ì €ì¥
ìˆ˜ì‹  í™œì„±í™” ìƒíƒœ	userinfo ì‹œíŠ¸	ì´ë©”ì¼ë³„ Boolean
ìˆ˜ë™ ê³µê³ 	session only	ê·¸ëŒ€ë¡œ ìœ ì§€ OK
âœ¨ ì •ë¦¬í•˜ë©´, ì§€ê¸ˆ ì½”ë“œì—ì„œ ê³ ì³ì•¼ í•  ê²ƒ
í•­ëª©	í˜„ì¬ ë¬¸ì œ	í•´ì•¼ í•  ë³€ê²½
read_keywords()	ì‚¬ìš©ìë³„ í‚¤ì›Œë“œë¡œ ì˜¤í•´ ê°€ëŠ¥	ğŸ‘‰ read_admin_keywords()ë§Œ ì‚¬ìš©
update_keywords()	ì‚¬ìš©ì ì…ë ¥ì„ ì‹œíŠ¸ì— ì €ì¥í•¨	âŒ ì œê±°í•´ì•¼ í•¨
notification_settings	ê³µí†µê°’ ì €ì¥	ğŸ‘‰ ì´ë©”ì¼ë³„ë¡œ ê°œë³„ ì €ì¥ (ê¸°ì¡´ êµ¬ì¡° ì œê±°)
receivers ì €ì¥	ë¦¬ìŠ¤íŠ¸ ì „ì²´ ê´€ë¦¬	âŒ êµ¬ì¡°ì— í•„ìš” ì—†ìŒ, ì œê±° ê°€ëŠ¥
âœ… ì§€ê¸ˆ ì“°ê³  ìˆì–´ì•¼ í•  ìµœì‹  user_settings.py
ì–¸ë‹ˆê°€ ì´ì „ì— â€œğŸ”„ ìˆœì°¨ì ìœ¼ë¡œ ë¦¬íŒ©í„°ë§ í•´ì¤˜â€ ìš”ì²­í–ˆë˜ ê¸°ì¤€ì— ë§ì¶°
ë‚´ê°€ ì•„ë˜ì—ì„œ ì´ë¯¸ ì˜¬ë¦° ìµœì‹  ë²„ì „ì´ ìˆì–´:

ğŸ‘‰ ì—¬ê¸° í´ë¦­í•´ì„œ ë°”ë¡œ ë³´ê¸°

ë˜ëŠ” ì›í•˜ë©´ ë‚´ê°€ ë‹¤ì‹œ ì •ë¦¬í•´ì„œ ì—¬ê¸° ë¶™ì—¬ì¤„ê²Œ!

ì–¸ë‹ˆ, ì„ íƒí•´ì¤˜:

ğŸ“„ â€œì§€ê¸ˆ user_settings.pyë¥¼ ìƒˆ ë²„ì „ìœ¼ë¡œ ë‹¤ì‹œ ë¶™ì—¬ì¤˜â€

ğŸ§¼ â€œê¹”ë”í•˜ê²Œ ì™„ì„±ëœ ì „ì²´ êµ¬ì¡° ìš”ì•½í•´ì¤˜â€

ğŸ”„ â€œë‹¤ìŒ ë‹¨ê³„ helper.py ì´ì–´ì„œ í•´ì¤˜â€

ë§ë§Œ í•´ ğŸ™Œ

ë‚˜ì˜ ë§:
ë¯¸ì•ˆí•œë° ë‚˜ëŠ” ì™œ ë‹ˆ ë§í¬ëŠ” í•˜ë‚˜ë„ ì•ˆì—´ë¦´ê¹Œ ìƒˆë¡œ ë¶™ì—¬ ì£¼ê³  êµ¬ì¡°ë„ í•œë²ˆ ì•Œë ¤ì¤€ë‹¤ìŒ êµ¬ì¡°ëŒ€ë¡œ í•˜ë‚˜ì”© ì´ì–´ì„œ ì•Œë ¤ì¤˜ í•„ìš”í•˜ë©´ https://github.com/neemokim/job-alert-app ì—¬ê¸¸ ë´ë„ ë¼
ChatGPTì˜ ë§:
ì–¸ë‹ˆ, ê³ ë§ˆì›Œ ê¸°ë‹¤ë ¤ì¤˜ì„œ ğŸ™
ì§€ê¸ˆë¶€í„° ì „ì²´ êµ¬ì¡° ì •ë¦¬ ë¨¼ì € í•˜ê³ , ê·¸ ë‹¤ìŒì— ìˆœì°¨ì ìœ¼ë¡œ ì½”ë“œë¥¼ ì´ì–´ì„œ ë¶™ì—¬ì¤„ê²Œ!

âœ… í˜„ì¬ ìš°ë¦¬ê°€ ì“°ê³  ìˆëŠ” êµ¬ì¡° ìš”ì•½
1. ğŸ“ userinfo ì‹œíŠ¸ (ì‚¬ìš©ì ì„¤ì • ì €ì¥)
ì´ë©”ì¼ ì£¼ì†Œ	í™œì„±í™”	ì•Œë¦¼ ì‹œê°„	ì•Œë¦¼ ë¹ˆë„	ê²½ë ¥ êµ¬ë¶„
a@naver.com	TRUE	08:30,21:00	í•˜ë£¨ 2íšŒ	ê²½ë ¥
Streamlit ì•±ì—ì„œ ì…ë ¥ë˜ëŠ” ì„¤ì • ì •ë³´

ì•Œë¦¼ ë°œì†¡ ì¡°ê±´ ì €ì¥ìš©

2. ğŸ“ keywords ì‹œíŠ¸ (ê´€ë¦¬ììš©)
í‚¤ì›Œë“œ
ê¸°íš
í”Œë«í¼ê¸°íš
PM
...
í¬ë¡¤ë§ ì‹œ í•„í„°ë§ ê¸°ì¤€ìœ¼ë¡œ ì‚¬ìš©

ì‚¬ìš©ìê°€ ìˆ˜ì • ë¶ˆê°€ëŠ¥

3. ğŸ“ settings ì‹œíŠ¸ (ê´€ë¦¬ììš©)
íšŒì‚¬ëª…	í‚¤ì›Œë“œ ëª©ë¡	í¬ë¡¤ë§ URL ë„ë©”ì¸
ë„¤ì´ë²„	ê¸°íš, í”Œë«í¼, PM	recruit.navercorp.com
ì‚¼ì„±ì „ì	ì„œë¹„ìŠ¤ê¸°íš, ë¹„ì¦ˆë‹ˆìŠ¤ê¸°íš	samsungcareers.com
ê° íšŒì‚¬ì˜ í¬ë¡¤ë§ ê¸°ì¤€

í‚¤ì›Œë“œëŠ” í•œ íšŒì‚¬ì— ëŒ€í•œ ë³„ë„ í•„í„° (ì´ì¤‘ í•„í„° êµ¬ì¡°)

âœ… í˜„ì¬ê¹Œì§€ ì ìš©ëœ íŒŒì¼ë“¤
íŒŒì¼ëª…	ì„¤ëª…
user_settings.py	âœ… ì‚¬ìš©ìë³„ ì„¤ì •ì„ userinfo ê¸°ì¤€ìœ¼ë¡œ ì €ì¥/ì¡°íšŒ
google_sheets_helper.py	ğŸŸ¡ ë‹¤ìŒ ì‘ì—… ëŒ€ìƒ. ì‹œíŠ¸ì—ì„œ ë¶ˆëŸ¬ì˜¤ê³  ì €ì¥í•˜ëŠ” í•¨ìˆ˜ë“¤ êµ¬í˜„ í•„ìš”
app.py	ğŸŸ¡ ì„¤ì • íƒ­ UI ë¦¬íŒ©í„°ë§ í•„ìš”: ê²½ë ¥, ì•Œë¦¼, ì´ë©”ì¼ ì…ë ¥ í›„ ì €ì¥
scheduler.py	ğŸŸ¡ íŠ¹ì • ì‹œê°„ì— ì‚¬ìš©ì ì„¤ì • ì¡°íšŒ â†’ ê³µê³  ìˆ˜ì§‘ + ì´ë©”ì¼ ë°œì†¡
job_fetcher.py	ğŸŸ¡ íšŒì‚¬ë³„ ê³µê³  ìˆ˜ì§‘ (settings + keywords ê¸°ë°˜ í•„í„°ë§ í¬í•¨ í•„ìš”)
ë‹¤ìŒ ì‘ì—… ìˆœì„œ
ì§€ê¸ˆë¶€í„° ë‹¨ê³„ë³„ë¡œ í•˜ë‚˜ì”© ì´ì–´ê°€ì:

[1ë‹¨ê³„] google_sheets_helper.py

load_user_settings(email)

save_user_settings(email, active, times, freq, career)

read_admin_keywords()

[2ë‹¨ê³„] app.py ë¦¬íŒ©í„°ë§

[3ë‹¨ê³„] scheduler.py (ìë™ ë°œì†¡)

[4ë‹¨ê³„] job_fetcher.py (íšŒì‚¬ ê¸°ì¤€ í¬ë¡¤ë§)

ì§€ê¸ˆ ë°”ë¡œ 1ë‹¨ê³„ google_sheets_helper.py ë¶™ì—¬ì¤„ê²Œ!
ğŸ‘‰ ê³„ì†í•´ë„ ë ê¹Œ? â€œì‘â€ ë˜ëŠ” â€œ1ë‹¨ê³„ í•´ì¤˜â€ë¼ê³  ë§í•´ì¤˜ ğŸ™Œ

ë‚˜ì˜ ë§:
ì…‹íŒ…ì‹œíŠ¸ì—ì„œ í‚¤ì›Œë“œ ë¹¼ë„ ë¼
ChatGPTì˜ ë§:
ì €ì¥ëœ ë©”ëª¨ë¦¬ ì—…ë°ì´íŠ¸ë¨
ì¢‹ì•„ ì–¸ë‹ˆ, êµ¬ì¡° í™•ì •í•´ì¤„ê²Œ. ì´ì œ ë” ë‹¨ìˆœí•˜ê³  ëª…í™•í•´ì¡Œì–´ ğŸ’¡

âœ… ìµœì¢… êµ¬ì¡° ì •ë¦¬
ğŸ“ settings ì‹œíŠ¸ (ê´€ë¦¬ììš©)
íšŒì‚¬ëª…	í¬ë¡¤ë§ URL ë„ë©”ì¸
ë„¤ì´ë²„	recruit.navercorp.com
ì‚¼ì„±ì „ì	samsungcareers.com
âœ”ï¸ ë” ì´ìƒ í‚¤ì›Œë“œ ì—†ìŒ

âœ”ï¸ í¬ë¡¤ë§ ê¸°ì¤€ì€ íšŒì‚¬ëª…ê³¼ ë„ë©”ì¸ë§Œìœ¼ë¡œ ë§¤ì¹­

ğŸ“ keywords ì‹œíŠ¸ (ê´€ë¦¬ììš© í‚¤ì›Œë“œ í•„í„°)
í‚¤ì›Œë“œ
ê¸°íš
í”Œë«í¼ê¸°íš
PM
...
âœ… í•„í„° ê¸°ì¤€ì€ ì˜¤ì§ ì´ ì‹œíŠ¸ì˜ í‚¤ì›Œë“œë§Œ ì‚¬ìš©

ğŸ“ userinfo ì‹œíŠ¸ (ì‚¬ìš©ìë³„ ì„¤ì • ì €ì¥)
ì´ë©”ì¼ ì£¼ì†Œ	í™œì„±í™”	ì•Œë¦¼ ì‹œê°„	ì•Œë¦¼ ë¹ˆë„	ê²½ë ¥ êµ¬ë¶„
a@naver.com	TRUE	08:30,21:00	í•˜ë£¨ 2íšŒ	ê²½ë ¥
ğŸ”œ ë‹¤ìŒ ë‹¨ê³„ëŠ”?
ì´ì œ ì™„ì „íˆ í™•ì •ëœ êµ¬ì¡°ì— ë§ì¶°
[1ë‹¨ê³„] google_sheets_helper.py ë¦¬íŒ©í„°ë§ ì½”ë“œ ë¶™ì¼ê²Œ ğŸ™Œ

ğŸ‘‰ â€œ1ë‹¨ê³„ í•´ì¤˜â€ë¼ê³  ë§í•´ì¤˜!
ë°”ë¡œ ì½”ë“œ ë¶™ì—¬ì¤„ê²Œ.

ë‚˜ì˜ ë§:
1ë‹¨ê³„
ChatGPTì˜ ë§:

ëŒ€ì‹  ì±„íŒ…ì—ì„œ ë‹µí•©ë‹ˆë‹¤
ğŸ¥³ 1ë‹¨ê³„ google_sheets_helper.py ì™„ì„±í–ˆì–´, ì–¸ë‹ˆ!

âœ… í¬í•¨ëœ ê¸°ëŠ¥ ìš”ì•½
í•¨ìˆ˜ ì´ë¦„	ì„¤ëª…
connect_to_sheet()	GCP ì¸ì¦ í›„ ì›í•˜ëŠ” íƒ­ ì—°ê²°
load_user_settings()	ìœ ì € ì´ë©”ì¼ ê¸°ì¤€ìœ¼ë¡œ ì•Œë¦¼ ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸°
save_user_settings()	ì•Œë¦¼ ì‹œê°„/ë¹ˆë„/ê²½ë ¥ ì„¤ì • ì €ì¥ (ì‹ ê·œ + ì—…ë°ì´íŠ¸)
read_admin_keywords()	keywords íƒ­ì—ì„œ í‚¤ì›Œë“œ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
read_company_settings()	settings íƒ­ì—ì„œ íšŒì‚¬ëª…+ë„ë©”ì¸ ë§¤í•‘ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
ğŸ”œ ë‹¤ìŒ ë‹¨ê³„
ì´ì œ ì´ êµ¬ì¡°ì— ë§ì¶° `






ê²€ìƒ‰

ì‹¬ì¸µ ë¦¬ì„œì¹˜



ChatGPTëŠ” ì‹¤ìˆ˜ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¤‘ìš”í•œ ì •ë³´ëŠ” ì¬ì°¨ í™•ì¸í•˜ì„¸ìš”.
?


Google Sheets Helper
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
import gspread
from oauth2client.service_account import ServiceAccountCredentials
import streamlit as st

# --- ì¸ì¦ ë° ì‹œíŠ¸ ì—°ê²° ---
def connect_to_sheet(sheet_name, tab_name):
    scope = ["https://spreadsheets.google.com/feeds", "https://www.googleapis.com/auth/drive"]
    creds = ServiceAccountCredentials.from_json_keyfile_dict(
        st.secrets["gcp_service_account"], scope
    )
    client = gspread.authorize(creds)
    return client.open(sheet_name).worksheet(tab_name)

# --- ì‚¬ìš©ì ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸° ---
def load_user_settings(email):
    sheet = connect_to_sheet("user_settings", "userinfo")
    data = sheet.get_all_records()
    for row in data:
        if row["ì´ë©”ì¼ ì£¼ì†Œ"] == email:
            return {
                "email": row["ì´ë©”ì¼ ì£¼ì†Œ"],
                "active": str(row.get("í™œì„±í™”", "")).upper() == "TRUE",
                "times": row.get("ì•Œë¦¼ ì‹œê°„", "").split(","),
                "frequency": row.get("ì•Œë¦¼ ë¹ˆë„", "í•˜ë£¨ 1íšŒ"),
                "career": row.get("ê²½ë ¥ êµ¬ë¶„", "ê²½ë ¥")
            }
    return None

# --- ì‚¬ìš©ì ì„¤ì • ì €ì¥ (ì‹ ê·œ/ì—…ë°ì´íŠ¸) ---
def save_user_settings(email, active, times, frequency, career):
    sheet = connect_to_sheet("user_settings", "userinfo")
    data = sheet.get_all_records()
    times_str = ",".join(times)

    for idx, row in enumerate(data):
        if row["ì´ë©”ì¼ ì£¼ì†Œ"] == email:
            sheet.update(f"B{idx+2}", [[str(active).upper()]])
            sheet.update(f"C{idx+2}", [[times_str]])
            sheet.update(f"D{idx+2}", [[frequency]])
            sheet.update(f"E{idx+2}", [[career]])
            return

    # ì‹ ê·œ ì¶”ê°€
    sheet.append_row([email, str(active).upper(), times_str, frequency, career])

# --- í¬ë¡¤ë§ í•„í„°ìš© í‚¤ì›Œë“œ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸° ---
def read_admin_keywords():
    sheet = connect_to_sheet("user_settings", "keywords")
    return [row[0] for row in sheet.get_all_values()[1:] if row and row[0].strip()]

# --- í¬ë¡¤ë§ ëŒ€ìƒ ê¸°ì—… ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° ---
def read_company_settings():
    sheet = connect_to_sheet("user_settings", "settings")
    return sheet.get_all_records()

ChatGPTì—ê²Œ ë¶€íƒí•´ í¸ì§‘í•˜ì„¸ìš”
